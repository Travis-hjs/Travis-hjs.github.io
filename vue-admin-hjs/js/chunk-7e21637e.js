(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7e21637e"],{"0d9c":function(e,t,n){},7847:function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"page-canvas-autograph"},[n("div",{ref:"autograph-box",staticClass:"autograph-box"}),n("div",{staticClass:"pdt_10 pdb_20"},[n("el-button",{on:{click:function(t){return e.onReset()}}},[e._v("重置签名")]),n("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.setImage()}}},[e._v("生成签名")])],1),e.imgUrl?n("img",{staticClass:"autograph-img",attrs:{src:e.imgUrl,alt:""}}):e._e()])},o=[],a=n("d4ec"),r=n("bee2"),c=n("257e"),s=n("262e"),u=n("2caf"),l=n("ade3"),f=(n("99af"),n("9ab4")),h=n("1b40");function d(e){var t=document.createElement("canvas"),n=t.getContext("2d"),i=e.ratio||window.devicePixelRatio;function o(){t.width=e.el.clientWidth*i,t.height=e.el.clientHeight*i}function a(){t.style.width="100%",t.style.height="100%",n.lineCap="round",n.lineJoin="round",n.fillStyle=e.backgroundColor||"#ffffff",n.fillRect(0,0,t.width,t.height)}var r=0,c=0,s=function(){return e.lineSize||4},u=function(){return e.lineColor||"#000000"};function l(e){var t=e.x*i,o=e.y*i;n.beginPath(),n.moveTo(t,o),n.lineTo(t,o),n.strokeStyle=u(),n.lineWidth=s()*i,n.stroke(),n.closePath(),c=o,r=t}function f(e){var t=e.x*i,o=e.y*i;n.beginPath(),n.moveTo(r,c),n.lineTo(t,o),n.strokeStyle=u(),n.lineWidth=s()*i,n.stroke(),n.closePath(),c=o,r=t}function h(e){n.beginPath(),n.moveTo(r,c),n.lineTo(e.x*i,e.y*i),n.stroke(),n.closePath()}var d=!1,v=!1;function g(e){e.preventDefault(),v=!0,d=!0,l({x:e.offsetX,y:e.offsetY})}function p(e){e.preventDefault(),v&&f({x:e.offsetX,y:e.offsetY})}function m(e){e.preventDefault(),v&&(h({x:e.offsetX,y:e.offsetY}),v=!1)}function b(e){if(e.preventDefault(),1===e.touches.length){v=!0,d=!0;var n=e.touches[0],i=t.getBoundingClientRect();l({x:n.clientX-i.left,y:n.clientY-i.top})}}function y(e){if(e.preventDefault(),v&&1===e.touches.length){var n=e.touches[0],i=t.getBoundingClientRect();f({x:n.clientX-i.left,y:n.clientY-i.top})}}function j(e){if(e.preventDefault(),v&&1===e.touches.length){var n=e.touches[0],i=t.getBoundingClientRect();h({x:n.clientX-i.left,y:n.clientY-i.top})}}function O(){v=!1,document.body.contains(t)||(document.removeEventListener("mouseup",O),document.removeEventListener("touchend",O))}return e.el.appendChild(t),o(),a(),t.addEventListener("mousedown",g),t.addEventListener("mousemove",p),t.addEventListener("mouseup",m),t.addEventListener("touchstart",b),t.addEventListener("touchmove",y),t.addEventListener("touchend",j),document.addEventListener("mouseup",O),document.addEventListener("touchend",O),{canvas:t,reset:function(){d=!1,n.clearRect(0,0,t.width,t.height),a()},getBase64:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"image/jpeg";return d?t.toDataURL(e):""}}}var v=function(e){Object(s["a"])(n,e);var t=Object(u["a"])(n);function n(){var e;Object(a["a"])(this,n);for(var i=arguments.length,o=new Array(i),r=0;r<i;r++)o[r]=arguments[r];return e=t.call.apply(t,[this].concat(o)),Object(l["a"])(Object(c["a"])(e),"$refs",void 0),Object(l["a"])(Object(c["a"])(e),"autograph",void 0),Object(l["a"])(Object(c["a"])(e),"options",void 0),Object(l["a"])(Object(c["a"])(e),"timer",void 0),Object(l["a"])(Object(c["a"])(e),"imgUrl",""),e}return Object(r["a"])(n,[{key:"setImage",value:function(){var e=this.autograph.getBase64();if(!e)return this.$message.warning("没有任务签名！");this.imgUrl=e}},{key:"onReset",value:function(){this.autograph.reset(),this.options.lineColor="#2C72F3",this.options.lineSize=4,this.imgUrl="",this.timer&&clearTimeout(this.timer)}},{key:"mounted",value:function(){var e=this;this.options={el:this.$refs["autograph-box"],lineColor:"orange",lineSize:4},this.autograph=d(this.options),this.timer=setTimeout((function(){e.options.lineColor="green",e.options.lineSize=8}),3e3)}}]),n}(h["d"]);v=Object(f["a"])([Object(h["a"])({})],v);var g=v,p=g,m=(n("d77f"),n("2877")),b=Object(m["a"])(p,i,o,!1,null,null,null);t["default"]=b.exports},d77f:function(e,t,n){"use strict";n("0d9c")}}]);