import{o as e,c as l,w as a,a as t,n as s,b as u,i as n,d as i,C as r,f as c,B as o,D as d,k as p,E as v,G as f,p as m,v as h,u as b,e as g,t as _,r as y,F as k,H as C,I as D,P as N,J as S,K as w,L as x,m as F,M as Y,N as I,O as T,Q as V,R as M,S as q,T as j,U as $}from"./index-b795adff.js";import{T as z,a as A}from"./TheForm.6c47c183.js";import{s as B}from"./control.a6596622.js";import{_ as P}from"./_plugin-vue_export-helper.1b428a4d.js";import{T as U}from"./TheButton.ede9d954.js";const H=P({name:"Cross",props:{type:{type:String,default:"close"},size:String,lineWidth:String,color:String},computed:{useStyle(){const e={width:this.size,height:this.size,"--line-width":this.lineWidth,"--bg-color":this.color};for(const l in e)e[l]||delete e[l];return e}}},[["render",function(i,r,c,o,d,p){const v=n;return e(),l(v,{class:"the-cross",style:u(p.useStyle)},{default:a((()=>[t(v,{class:s(["the-cross-line",c.type])},null,8,["class"]),t(v,{class:s(["the-cross-line",c.type])},null,8,["class"])])),_:1},8,["style"])}],["__scopeId","data-v-d4888fe3"]]),O=P(i({name:"UploadImage",props:{minHeight:{type:String,default:"280rpx"},src:{type:String,default:""},uploadId:{type:[String,Number],default:""}},emits:["change"],setup(s,{emit:i}){const p=s,v=i,f=r(!1);return(i,r)=>{const m=n;return e(),l(m,{class:"upload-image card"},{default:a((()=>[s.src?(e(),c("img",{key:0,style:{width:"100%",display:"block"},src:s.src},null,8,["src"])):o("",!0),s.src?(e(),l(m,{key:1,class:"close",onClick:r[0]||(r[0]=e=>{v("change",{id:p.uploadId,src:""})})})):o("",!0),s.src||f.value?o("",!0):(e(),l(m,{key:2,class:"upload-icon fvc",onClick:r[1]||(r[1]=e=>{f.value||d({count:1,sizeType:"compressed",sourceType:["album"],success(e){const l=e.tempFilePaths;f.value=!0,setTimeout((()=>{f.value=!1,v("change",{id:p.uploadId,src:l[0]})}),800)},fail(e){console.log("chooseImage fail >>",e),B("读取图片失败！")}})}),style:u({"min-height":s.minHeight})},{default:a((()=>[t(H,{size:"100rpx",color:"#999",type:"plus"})])),_:1},8,["style"])),!s.src&&f.value?(e(),l(m,{key:3,class:"fvc",style:u({"min-height":s.minHeight})},{default:a((()=>[t(m,{class:"preloader"},{default:a((()=>[t(m,{class:"preloader-inner"},{default:a((()=>[t(m,{class:"preloader-inner-gap"}),t(m,{class:"preloader-inner-left"},{default:a((()=>[t(m,{class:"preloader-inner-half-circle"})])),_:1}),t(m,{class:"preloader-inner-right"},{default:a((()=>[t(m,{class:"preloader-inner-half-circle"})])),_:1})])),_:1})])),_:1})])),_:1},8,["style"])):o("",!0)])),_:1})}}}),[["__scopeId","data-v-0e7e78a2"]]);function W(e,l=300){const a=p({visible:!1,transition:!1});let t;return v(e,(function(e){t&&clearTimeout(t),e?(a.visible=!0,t=setTimeout((function(){a.transition=!0}))):(a.transition=!1,t=setTimeout((function(){a.visible=!1}),l))}),{immediate:!0}),f((function(){clearTimeout(t)})),{layer:a}}const J=P(i({name:"ThePicker",props:{show:{type:Boolean,default:!1},pickerId:{type:[Number,String],default:""},list:{type:Array,default:()=>[]},title:{type:[String,Number],default:""},column:{type:Number,default:0}},emits:["cancel","confirm"],setup(u,{expose:i,emit:o}){const d=u,p=o,f=r([0,0,0]),w=r([]),x=r([]);function F(){const e=d.list,l=f.value,a=d.column,t=e.length&&e[l[0]]&&e[l[0]].children&&e[l[0]].children.length>0;a>=2?w.value=t?e[l[0]].children:[{label:"-",value:""}]:0===a&&(w.value=t?e[l[0]].children:[]);const s=w.value,u=s.length>0&&s[l[1]]&&s[l[1]].children&&s[l[1]].children.length>0;a>=3?x.value=u?s[l[1]].children:[{label:"-",value:""}]:0===a&&(x.value=u?s[l[1]].children:[])}function Y(){p("cancel")}function I(e){const l=e.detail.value,a=C(l[0],"number")?l[0]:0,t=C(l[1],"number")?l[1]:0,s=C(l[2],"number")?l[2]:0;f.value=[a,t,s],F()}const{layer:T}=W((()=>d.show));return v((()=>d.list),(function(){D((function(){F()}))}),{immediate:!0}),i({setIndexs(e){const l=f.value;f.value=Object.assign(l,e)}}),(i,r)=>{const o=n,v=N,C=S;return m((e(),l(o,{class:s(["the-picker f-wrap",{"the-picker-show":b(T).transition}])},{default:a((()=>[t(o,{class:"f1",onClick:r[0]||(r[0]=e=>Y())}),t(o,{class:"picker-content"},{default:a((()=>[t(o,{class:"picker-option f-vertical"},{default:a((()=>[t(o,{class:"btn",onClick:r[1]||(r[1]=e=>Y())},{default:a((()=>[g("取消")])),_:1}),t(o,{class:"f1 picker-title"},{default:a((()=>[g(_(u.title),1)])),_:1}),t(o,{class:"btn confirm",onClick:r[2]||(r[2]=e=>function(){const e=f.value,l=[d.list[e[0]]];w.value[e[1]]&&l.push(w.value[e[1]]),x.value[e[2]]&&l.push(x.value[e[2]]),p("confirm",{id:d.pickerId,value:l.filter((e=>""!==e.value))})}())},{default:a((()=>[g("确定")])),_:1})])),_:1}),t(C,{class:"picker-view","indicator-style":"height: 36px;",value:f.value,onChange:I},{default:a((()=>[m(t(v,null,{default:a((()=>[(e(!0),c(k,null,y(u.list,((t,s)=>(e(),l(o,{class:"picker-item ellipsis-1",key:s},{default:a((()=>[g(_(t.label),1)])),_:2},1024)))),128))])),_:1},512),[[h,u.list.length>0]]),m(t(v,null,{default:a((()=>[(e(!0),c(k,null,y(w.value,((t,s)=>(e(),l(o,{class:"picker-item ellipsis-1",key:s},{default:a((()=>[g(_(t.label),1)])),_:2},1024)))),128))])),_:1},512),[[h,w.value.length>0]]),m(t(v,null,{default:a((()=>[(e(!0),c(k,null,y(x.value,((t,s)=>(e(),l(o,{class:"picker-item ellipsis-1",key:s},{default:a((()=>[g(_(t.label),1)])),_:2},1024)))),128))])),_:1},512),[[h,x.value.length>0]])])),_:1},8,["value"])])),_:1})])),_:1},8,["class"])),[[h,b(T).visible]])}}}),[["__scopeId","data-v-c6708db8"]]),E=new Date;function G(e){return e.split("-").map((e=>Number(e)))}function K(e,l){const a=[];for(let t=e;t<=l;t++)a.push(("0"+t).slice(-2));return a}const L=P(i({name:"PickerDate",props:{show:{type:Boolean,default:!1},title:{type:[String,Number],default:""},value:{type:String,default:""},type:{type:String,default:"Y-M-D"},startDate:{type:String,default:E.getFullYear()-10+"-01-01"},endDate:{type:String,default:`${E.getFullYear()}-12-${new Date(E.getFullYear(),12,0).getDate()}`}},emits:["cancel","confirm"],setup(u,{emit:i}){const d=u,p=i,f=r([]),D=r([]),F=r([]),Y=r([]);let I;function T(){const e=[],l=G(d.startDate),a=G(d.endDate);for(let t=l[0];t<=a[0];t++)e.push(t);if(f.value=e,"Y-M-D"===d.type||"Y-M"===d.type){let e=1,t=12;const s=f.value[Y.value[0]];s===l[0]&&(e=l[1]),s===a[0]&&(t=a[1]),D.value=K(e,t)}if("Y-M-D"===d.type){const e=f.value[Y.value[0]],t=Number(D.value[Y.value[1]]);let s=1,u=new Date(e,t,0).getDate();e===l[0]&&t===l[1]&&(s=l[2]),e===a[0]&&t===a[1]&&(u=a[2]),F.value=K(s,u)}}function V(e){const l=e.detail.value,a=C(l[0],"number")?l[0]:0,t=C(l[1],"number")?l[1]:0,s=C(l[2],"number")?l[2]:0;Y.value=[a,t,s],T()}function M(){d.value&&I.toString()!==Y.value.toString()&&q(),p("cancel")}function q(){Y.value=function(){let e=[f.value.length-1,0,0];if(d.value&&d.value.split("-").length){const l=d.value.split("-"),a=x(f.value,(e=>e===Number(l[0])));if(e[0]=a>-1?a:0,l[1]){const a=Number(l[1])-1;if(e[1]=isNaN(a)?0:a,l[2]){const a=Number(l[2])-1;e[2]=isNaN(a)?0:a}}}return e}(),I=Y.value,T()}const{layer:j}=W((()=>d.show));return T(),w((function(){setTimeout(q)})),v((()=>d.value),(function(e,l){e&&e!=l&&q()})),(i,r)=>{const v=n,C=N,w=S;return m((e(),l(v,{class:s(["the-picker f-wrap",{"the-picker-show":b(j).transition}])},{default:a((()=>[t(v,{class:"f1",onClick:r[0]||(r[0]=e=>M())}),t(v,{class:"picker-content"},{default:a((()=>[t(v,{class:"picker-option f-vertical"},{default:a((()=>[t(v,{class:"btn",onClick:r[1]||(r[1]=e=>M())},{default:a((()=>[g("取消")])),_:1}),t(v,{class:"f1 picker-title"},{default:a((()=>[g(_(u.title),1)])),_:1}),t(v,{class:"btn confirm",onClick:r[2]||(r[2]=e=>function(){let e=f.value[Y.value[0]].toString();"Y-M-D"!==d.type&&"Y-M"!==d.type||(e=`${e}-${D.value[Y.value[1]]}`),"Y-M-D"===d.type&&(e=`${e}-${F.value[Y.value[2]]}`),p("confirm",e)}())},{default:a((()=>[g("确定")])),_:1})])),_:1}),t(w,{class:"picker-view","indicator-style":"height: 36px;",onChange:V,value:Y.value},{default:a((()=>[["Y-M-D","Y-M","Y"].includes(u.type)?(e(),l(C,{key:0},{default:a((()=>[(e(!0),c(k,null,y(f.value,((t,s)=>(e(),l(v,{class:"picker-item ellipsis-1",key:s},{default:a((()=>[g(_(t),1)])),_:2},1024)))),128))])),_:1})):o("",!0),["Y-M-D","Y-M"].includes(u.type)?(e(),l(C,{key:1},{default:a((()=>[(e(!0),c(k,null,y(D.value,((t,s)=>(e(),l(v,{class:"picker-item ellipsis-1",key:s},{default:a((()=>[g(_(t),1)])),_:2},1024)))),128))])),_:1})):o("",!0),"Y-M-D"===u.type?(e(),l(C,{key:2},{default:a((()=>[(e(!0),c(k,null,y(F.value,((t,s)=>(e(),l(v,{class:"picker-item ellipsis-1",key:s},{default:a((()=>[g(_(t),1)])),_:2},1024)))),128))])),_:1})):o("",!0)])),_:1},8,["value"])])),_:1})])),_:1},8,["class"])),[[h,b(j).visible]])}}}),[["__scopeId","data-v-f802468a"]]);const Q=P(i({__name:"form",setup(s){const u=p({userName:"",phone:"",avatar:"",isAdmin:!1,date:"2020-06-18",multiple:[],radioValue:"",description:"",address:[]}),i=p({userName:[{required:!0,message:"请输入用户名"}],phone:[{required:!0,message:"请输入用户手机号"},{reg:/^1[345678]\d{9}$/.toString(),message:"手机号不正确"}],avatar:[{required:!0,message:"请上传用户头像"}],date:[{required:!0,message:"请选择日期"}],multiple:[{required:!0,message:"至少选择一个选项"}],radioValue:[{required:!0,message:"请选择单选项"}],description:[{required:!1,message:"请输入描述"}],address:[{required:!0,message:"请选择地址"}]}),o=r("left"),d=[{value:"left",label:"靠左排列"},{value:"right",label:"靠右排列"},{value:"top",label:"靠顶部排列"}];function v(e){o.value=e.detail.value}const f=r(!0);const m=r(!1);function h(){m.value=!1}function C(e){u.date=e,h()}const D=[{label:"广东省",value:0,children:[{label:"广州市",value:0,children:[{label:"天河区",value:0},{label:"番禺区",value:1},{label:"白云区",value:2}]},{label:"深圳市",value:1,children:[{label:"保安区",value:0},{label:"龙华区",value:1},{label:"福田区",value:2}]},{label:"其他",value:2}]},{label:"湖南省",value:1,children:[{label:"长沙市",value:0,children:[{label:"芙蓉区",value:0},{label:"天心区",value:1},{label:"岳麓区",value:2}]},{label:"衡阳市",value:1,children:[{label:"衡阳县",value:0},{label:"衡南县",value:1},{label:"衡山县",value:2}]}]},{label:"黑龙江省",value:1,children:[{label:"哈尔滨市",value:0,children:[{label:"道外区",value:0},{label:"松北区",value:1},{label:"呼兰区",value:2}]},{label:"沈阳市",value:1}]},{label:"浙江省",value:12}],N=r(""),S=r(!1);function w(){S.value=!1}function x(e){u.address=e.value.map((e=>e.value)),N.value=e.value.map((e=>e.label)).join("-"),w()}function P(e){u.isAdmin=e.detail.value}const H=[{value:"1",label:"多选一"},{value:"2",label:"多选二"},{value:"3",label:"多选三"},{value:"4",label:"多选四"},{value:"5",label:"多选五"}];function W(e){u.multiple=e.detail.value}const E=[{value:"1",label:"单选一"},{value:"2",label:"单选二"},{value:"3",label:"单选三"},{value:"4",label:"单选四"}];function G(e){u.radioValue=e.detail.value}function K(e){u.avatar=e.src}const Q=r();return(s,r)=>{const p=q,R=n,X=j,Z=Y,ee=I,le=T,ae=V,te=$,se=M;return e(),l(R,{class:"form-page"},{default:a((()=>[t(Z,{class:"grid-box",onChange:v},{default:a((()=>[(e(),c(k,null,y(d,(e=>t(X,{class:"f-vertical",key:e.value},{default:a((()=>[t(p,{value:e.value,checked:e.value===o.value},null,8,["value","checked"]),t(R,null,{default:a((()=>[g(_(e.label),1)])),_:2},1024)])),_:2},1024))),64))])),_:1}),t(R,{class:"line"}),t(A,{model:u,rules:i,labelWidth:"168rpx",labelPosition:o.value,border:f.value,ref_key:"theForm",ref:Q},{default:a((()=>[t(z,{prop:"userName",label:"用户名"},{default:a((()=>[t(ee,{class:"the-input",type:"text",modelValue:u.userName,"onUpdate:modelValue":r[0]||(r[0]=e=>u.userName=e),placeholder:i.userName[0].message},null,8,["modelValue","placeholder"])])),_:1}),t(z,{prop:"phone",label:"用户手机号"},{default:a((()=>[t(ee,{class:"the-input",type:"number",modelValue:u.phone,"onUpdate:modelValue":r[1]||(r[1]=e=>u.phone=e),placeholder:i.phone[0].message},null,8,["modelValue","placeholder"])])),_:1}),t(z,{prop:"avatar",label:"用户头像",border:!1},{default:a((()=>[t(O,{src:u.avatar,onChange:K},null,8,["src"])])),_:1}),t(z,{prop:"isAdmin",label:"是否管理员"},{default:a((()=>[t(le,{checked:u.isAdmin,onChange:P},null,8,["checked"]),t(ae,{style:{"font-size":"30rpx"}},{default:a((()=>[g(_(u.isAdmin?"是":"否"),1)])),_:1})])),_:1}),t(z,{prop:"date",label:"日期"},{default:a((()=>[t(U,{round:!0,onClick:r[2]||(r[2]=e=>{m.value=!0})},{default:a((()=>[g(_(u.date||"请选择日期"),1)])),_:1})])),_:1}),t(z,{prop:"address",label:"地址"},{default:a((()=>[t(U,{round:!0,onClick:r[3]||(r[3]=e=>{S.value=!0})},{default:a((()=>[g(_(N.value||"请选择地址"),1)])),_:1})])),_:1}),t(z,{prop:"multiple",label:"多选项"},{default:a((()=>[t(se,{class:"grid-box",onChange:W},{default:a((()=>[(e(),c(k,null,y(H,(e=>t(X,{class:"f-vertical",key:e.value},{default:a((()=>[t(te,{value:e.value,checked:u.multiple.includes(e.value)},null,8,["value","checked"]),t(R,null,{default:a((()=>[g(_(e.label),1)])),_:2},1024)])),_:2},1024))),64))])),_:1})])),_:1}),t(z,{prop:"radioValue",label:"单选项"},{default:a((()=>[t(Z,{class:"grid-box",onChange:G},{default:a((()=>[(e(),c(k,null,y(E,(e=>t(X,{class:"f-vertical",key:e.value},{default:a((()=>[t(p,{value:e.value,checked:e.value===u.radioValue},null,8,["value","checked"]),t(R,null,{default:a((()=>[g(_(e.label),1)])),_:2},1024)])),_:2},1024))),64))])),_:1})])),_:1}),t(z,{prop:"description",label:"描述"},{default:a((()=>[t(ee,{class:"the-input",modelValue:u.description,"onUpdate:modelValue":r[4]||(r[4]=e=>u.description=e),placeholder:i.description[0].message},null,8,["modelValue","placeholder"])])),_:1}),t(R,{class:"grid-box"},{default:a((()=>[t(U,{color:"#07c160",onClick:r[5]||(r[5]=e=>{Q.value.validate(((e,l)=>{if(e)B("验证通过，在控制台可以查看表单数据"),console.log("表单数据 >>",JSON.stringify(u,null,"\t"));else{const e=Object.keys(l)[0];B(`${l[e][0].message}`)}}))})},{default:a((()=>[g("提交表单")])),_:1}),t(U,{color:"#eee",textColor:"#555",onClick:r[6]||(r[6]=e=>{Q.value.resetFields((e=>{F(u,e)}))})},{default:a((()=>[g("重置")])),_:1}),t(U,{color:"linear-gradient(45deg, #FA8BFF 0%, #2BD2FF 52%, #2BFF88 90%)",onClick:r[7]||(r[7]=e=>{Q.value.validateField("phone",((e,l)=>{B(e?"手机验证通过":l.phone[0].message)}))})},{default:a((()=>[g("验证手机号码")])),_:1}),t(U,{color:"#eee",textColor:"#555",onClick:r[8]||(r[8]=e=>{Q.value.resetField("phone")})},{default:a((()=>[g("移除手机验证")])),_:1}),t(U,{onClick:r[9]||(r[9]=e=>{f.value=!f.value})},{default:a((()=>[g("表单边框切换")])),_:1}),t(U,{color:"#ffba00",onClick:r[10]||(r[10]=e=>function(){const e=i.description;e[0].required=!e[0].required}())},{default:a((()=>[t(ae,{class:"ellipsis",style:{"font-size":"28rpx"}},{default:a((()=>[g("切换“描述”验证状态")])),_:1})])),_:1})])),_:1})])),_:1},8,["model","rules","labelPosition","border"]),t(L,{show:m.value,onCancel:h,onConfirm:C,value:u.date,startDate:"2019-03-12",endDate:"2021-06-04",title:"请选择日期"},null,8,["show","value"]),t(J,{show:S.value,onCancel:w,onConfirm:x,list:b(D),title:"动态层级变动"},null,8,["show","list"])])),_:1})}}}),[["__scopeId","data-v-de4170fc"]]);export{Q as default};
