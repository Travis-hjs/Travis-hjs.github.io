import{d as e,C as l,o as a,c as t,w as u,f as s,e as n,B as i,p as r,a as c,D as o,E as d,G as p,b as v,t as f,l as m,v as h,r as b,F as _,H as g,I as k,P as y,J as C,K as D,L as N,j as w,u as x,m as F,M as S,N as Y,O as V,Q as I,R as M,S as q,T as j,U as T}from"./index-9c1d1735.js";import{T as $,a as A}from"./TheForm.bd2e1b39.js";import{s as B}from"./control.41ccfec6.js";import{_ as P}from"./pluginHelper.1b428a4d.js";import{T as U}from"./TheButton.c1e599e6.js";const H=e({name:"UploadImage"}),O=P(e({...H,props:{minHeight:{type:String,default:"280rpx"},src:{type:String,default:""},uploadId:{type:[String,Number],default:""}},emits:["change"],setup(e,{emit:d}){const p=e,v=d,f=l(!1);return(l,d)=>{const m=s;return a(),t(m,{class:"upload-image card"},{default:u((()=>[e.src?(a(),n("img",{key:0,style:{width:"100%",display:"block"},src:e.src},null,8,["src"])):i("",!0),e.src?(a(),t(m,{key:1,class:"close",onClick:d[0]||(d[0]=e=>{v("change",{id:p.uploadId,src:""})})})):i("",!0),e.src||f.value?i("",!0):(a(),t(m,{key:2,class:"upload-icon",onClick:d[1]||(d[1]=e=>{f.value||o({count:1,sizeType:"compressed",sourceType:["album"],success(e){const l=e.tempFilePaths;f.value=!0,setTimeout((()=>{f.value=!1,v("change",{id:p.uploadId,src:l[0]})}),800)},fail(e){console.log("chooseImage fail >>",e),B("读取图片失败！")}})}),style:r({"min-height":e.minHeight})},null,8,["style"])),!e.src&&f.value?(a(),t(m,{key:3,class:"fvc",style:r({"min-height":e.minHeight})},{default:u((()=>[c(m,{class:"preloader"},{default:u((()=>[c(m,{class:"preloader-inner"},{default:u((()=>[c(m,{class:"preloader-inner-gap"}),c(m,{class:"preloader-inner-left"},{default:u((()=>[c(m,{class:"preloader-inner-half-circle"})])),_:1}),c(m,{class:"preloader-inner-right"},{default:u((()=>[c(m,{class:"preloader-inner-half-circle"})])),_:1})])),_:1})])),_:1})])),_:1},8,["style"])):i("",!0)])),_:1})}}}),[["__scopeId","data-v-37226070"]]),z=e({name:"ThePicker"}),J=P(e({...z,props:{show:{type:Boolean,default:!1},pickerId:{type:[Number,String],default:""},list:{type:Array,default:()=>[]},title:{type:[String,Number],default:""},column:{type:Number,default:0}},emits:["cancel","confirm"],setup(e,{expose:i,emit:r}){const o=e,D=r,N=l([0,0,0]),w=l([]),x=l([]);function F(){const e=o.list,l=N.value,a=o.column,t=e.length&&e[l[0]]&&e[l[0]].children&&e[l[0]].children.length>0;a>=2?w.value=t?e[l[0]].children:[{label:"-",value:""}]:0===a&&(w.value=t?e[l[0]].children:[]);const u=w.value,s=u.length>0&&u[l[1]]&&u[l[1]].children&&u[l[1]].children.length>0;a>=3?x.value=s?u[l[1]].children:[{label:"-",value:""}]:0===a&&(x.value=s?u[l[1]].children:[])}function S(){D("cancel")}function Y(e){const l=e.detail.value,a=g(l[0],"number")?l[0]:0,t=g(l[1],"number")?l[1]:0,u=g(l[2],"number")?l[2]:0;N.value=[a,t,u],F()}return d((()=>o.list),(function(){k((function(){F()}))}),{immediate:!0}),i({setIndexs(e){const l=N.value;N.value=Object.assign(l,e)}}),(l,i)=>{const r=s,d=y,g=C;return a(),t(r,{class:p(["the-picker fwrap",{"the-picker-show":e.show}])},{default:u((()=>[c(r,{class:"f1",onClick:i[0]||(i[0]=e=>S())}),c(r,{class:"picker-content"},{default:u((()=>[c(r,{class:"picker-option fvertical"},{default:u((()=>[c(r,{class:"btn",onClick:i[1]||(i[1]=e=>S())},{default:u((()=>[v("取消")])),_:1}),c(r,{class:"f1 picker-title"},{default:u((()=>[v(f(e.title),1)])),_:1}),c(r,{class:"btn confirm",onClick:i[2]||(i[2]=e=>function(){const e=N.value,l=[o.list[e[0]]];w.value[e[1]]&&l.push(w.value[e[1]]),x.value[e[2]]&&l.push(x.value[e[2]]),D("confirm",{id:o.pickerId,value:l.filter((e=>""!==e.value))})}())},{default:u((()=>[v("确定")])),_:1})])),_:1}),c(g,{class:"picker-view","indicator-style":"height: 36px;",value:N.value,onChange:Y},{default:u((()=>[m(c(d,null,{default:u((()=>[(a(!0),n(_,null,b(e.list,((e,l)=>(a(),t(r,{class:"picker-item ellipsis_1",key:l},{default:u((()=>[v(f(e.label),1)])),_:2},1024)))),128))])),_:1},512),[[h,e.list.length>0]]),m(c(d,null,{default:u((()=>[(a(!0),n(_,null,b(w.value,((e,l)=>(a(),t(r,{class:"picker-item ellipsis_1",key:l},{default:u((()=>[v(f(e.label),1)])),_:2},1024)))),128))])),_:1},512),[[h,w.value.length>0]]),m(c(d,null,{default:u((()=>[(a(!0),n(_,null,b(x.value,((e,l)=>(a(),t(r,{class:"picker-item ellipsis_1",key:l},{default:u((()=>[v(f(e.label),1)])),_:2},1024)))),128))])),_:1},512),[[h,x.value.length>0]])])),_:1},8,["value"])])),_:1})])),_:1},8,["class"])}}}),[["__scopeId","data-v-e2b9522b"]]),E=new Date;function G(e){return e.split("-").map((e=>Number(e)))}function K(e,l){const a=[];for(let t=e;t<=l;t++)a.push(("0"+t).slice(-2));return a}const L=e({name:"PickerDate"}),Q=P(e({...L,props:{show:{type:Boolean,default:!1},title:{type:[String,Number],default:""},value:{type:String,default:""},type:{type:String,default:"Y-M-D"},startDate:{type:String,default:E.getFullYear()-10+"-01-01"},endDate:{type:String,default:`${E.getFullYear()}-12-${new Date(E.getFullYear(),12,0).getDate()}`}},emits:["cancel","confirm"],setup(e,{emit:r}){const o=e,m=r,h=l([]),k=l([]),w=l([]),x=l([]);let F;function S(){const e=[],l=G(o.startDate),a=G(o.endDate);for(let t=l[0];t<=a[0];t++)e.push(t);if(h.value=e,"Y-M-D"===o.type||"Y-M"===o.type){let e=1,t=12;const u=h.value[x.value[0]];u===l[0]&&(e=l[1]),u===a[0]&&(t=a[1]),k.value=K(e,t)}if("Y-M-D"===o.type){const e=h.value[x.value[0]],t=Number(k.value[x.value[1]]);let u=1,s=new Date(e,t,0).getDate();e===l[0]&&t===l[1]&&(u=l[2]),e===a[0]&&t===a[1]&&(s=a[2]),w.value=K(u,s)}}function Y(e){const l=e.detail.value,a=g(l[0],"number")?l[0]:0,t=g(l[1],"number")?l[1]:0,u=g(l[2],"number")?l[2]:0;x.value=[a,t,u],S()}function V(){o.value&&F.toString()!==x.value.toString()&&I(),m("cancel")}function I(){x.value=function(){let e=[h.value.length-1,0,0];if(o.value&&o.value.split("-").length){const l=o.value.split("-"),a=N(h.value,(e=>e===Number(l[0])));if(e[0]=a>-1?a:0,l[1]){const a=Number(l[1])-1;if(e[1]=isNaN(a)?0:a,l[2]){const a=Number(l[2])-1;e[2]=isNaN(a)?0:a}}}return e}(),F=x.value,S()}return S(),D((function(){I()})),d((()=>o.value),(function(e,l){e&&e!=l&&I()})),(l,r)=>{const d=s,g=y,D=C;return a(),t(d,{class:p(["the-picker fwrap",{"the-picker-show":e.show}])},{default:u((()=>[c(d,{class:"f1",onClick:r[0]||(r[0]=e=>V())}),c(d,{class:"picker-content"},{default:u((()=>[c(d,{class:"picker-option fvertical"},{default:u((()=>[c(d,{class:"btn",onClick:r[1]||(r[1]=e=>V())},{default:u((()=>[v("取消")])),_:1}),c(d,{class:"f1 picker-title"},{default:u((()=>[v(f(e.title),1)])),_:1}),c(d,{class:"btn confirm",onClick:r[2]||(r[2]=e=>function(){let e=h.value[x.value[0]].toString();"Y-M-D"!==o.type&&"Y-M"!==o.type||(e=`${e}-${k.value[x.value[1]]}`),"Y-M-D"===o.type&&(e=`${e}-${w.value[x.value[2]]}`),m("confirm",e)}())},{default:u((()=>[v("确定")])),_:1})])),_:1}),c(D,{class:"picker-view","indicator-style":"height: 36px;",onChange:Y,value:x.value},{default:u((()=>["Y-M-D"===e.type||"Y-M"===e.type||"Y"===e.type?(a(),t(g,{key:0},{default:u((()=>[(a(!0),n(_,null,b(h.value,((e,l)=>(a(),t(d,{class:"picker-item ellipsis_1",key:l},{default:u((()=>[v(f(e),1)])),_:2},1024)))),128))])),_:1})):i("",!0),"Y-M-D"===e.type||"Y-M"===e.type?(a(),t(g,{key:1},{default:u((()=>[(a(!0),n(_,null,b(k.value,((e,l)=>(a(),t(d,{class:"picker-item ellipsis_1",key:l},{default:u((()=>[v(f(e),1)])),_:2},1024)))),128))])),_:1})):i("",!0),"Y-M-D"===e.type?(a(),t(g,{key:2},{default:u((()=>[(a(!0),n(_,null,b(w.value,((e,l)=>(a(),t(d,{class:"picker-item ellipsis_1",key:l},{default:u((()=>[v(f(e),1)])),_:2},1024)))),128))])),_:1})):i("",!0)])),_:1},8,["value"])])),_:1})])),_:1},8,["class"])}}}),[["__scopeId","data-v-a78da1e2"]]);const R=P(e({__name:"form",setup(e){const i=w({userName:"",phone:"",avatar:"",isAdmin:!1,date:"2020-06-18",multiple:[],radioValue:"",description:"",address:[]}),r=w({userName:[{required:!0,message:"请输入用户名"}],phone:[{required:!0,message:"请输入用户手机号"},{reg:/^1[345678]\d{9}$/.toString(),message:"手机号不正确"}],avatar:[{required:!0,message:"请上传用户头像"}],date:[{required:!0,message:"请选择日期"}],multiple:[{required:!0,message:"至少选择一个选项"}],radioValue:[{required:!0,message:"请选择单选项"}],description:[{required:!1,message:"请输入描述"}],address:[{required:!0,message:"请选择地址"}]}),o=l("left"),d=[{value:"left",label:"靠左排列"},{value:"right",label:"靠右排列"},{value:"top",label:"靠顶部排列"}];function p(e){o.value=e.detail.value}const m=l(!0);const h=l(!1);function g(){h.value=!1}function k(e){i.date=e,g()}const y=[{label:"广东省",value:0,children:[{label:"广州市",value:0,children:[{label:"天河区",value:0},{label:"番禺区",value:1},{label:"白云区",value:2}]},{label:"深圳市",value:1,children:[{label:"保安区",value:0},{label:"龙华区",value:1},{label:"福田区",value:2}]},{label:"其他",value:2}]},{label:"湖南省",value:1,children:[{label:"长沙市",value:0,children:[{label:"芙蓉区",value:0},{label:"天心区",value:1},{label:"岳麓区",value:2}]},{label:"衡阳市",value:1,children:[{label:"衡阳县",value:0},{label:"衡南县",value:1},{label:"衡山县",value:2}]}]},{label:"黑龙江省",value:1,children:[{label:"哈尔滨市",value:0,children:[{label:"道外区",value:0},{label:"松北区",value:1},{label:"呼兰区",value:2}]},{label:"沈阳市",value:1}]},{label:"浙江省",value:12}],C=l(""),D=l(!1);function N(){D.value=!1}function P(e){i.address=e.value.map((e=>e.value)),C.value=e.value.map((e=>e.label)).join("-"),N()}function H(e){i.isAdmin=e.detail.value}const z=[{value:"1",label:"多选一"},{value:"2",label:"多选二"},{value:"3",label:"多选三"},{value:"4",label:"多选四"},{value:"5",label:"多选五"}];function E(e){i.multiple=e.detail.value}const G=[{value:"1",label:"单选一"},{value:"2",label:"单选二"},{value:"3",label:"单选三"},{value:"4",label:"单选四"}];function K(e){i.radioValue=e.detail.value}function L(e){i.avatar=e.src}const R=l();return(e,l)=>{const w=q,W=s,X=j,Z=S,ee=Y,le=V,ae=I,te=T,ue=M;return a(),t(W,{class:"form-page"},{default:u((()=>[c(Z,{class:"grid-box",onChange:p},{default:u((()=>[(a(),n(_,null,b(d,(e=>c(X,{class:"fvertical",key:e.value},{default:u((()=>[c(w,{value:e.value,checked:e.value===o.value},null,8,["value","checked"]),c(W,null,{default:u((()=>[v(f(e.label),1)])),_:2},1024)])),_:2},1024))),64))])),_:1}),c(W,{class:"line"}),c(A,{model:i,rules:r,labelWidth:"168rpx",labelPosition:o.value,border:m.value,ref_key:"theForm",ref:R},{default:u((()=>[c($,{prop:"userName",label:"用户名"},{default:u((()=>[c(ee,{class:"the-input",type:"text",modelValue:i.userName,"onUpdate:modelValue":l[0]||(l[0]=e=>i.userName=e),placeholder:r.userName[0].message},null,8,["modelValue","placeholder"])])),_:1}),c($,{prop:"phone",label:"用户手机号"},{default:u((()=>[c(ee,{class:"the-input",type:"number",modelValue:i.phone,"onUpdate:modelValue":l[1]||(l[1]=e=>i.phone=e),placeholder:r.phone[0].message},null,8,["modelValue","placeholder"])])),_:1}),c($,{prop:"avatar",label:"用户头像",border:!1},{default:u((()=>[c(O,{src:i.avatar,onChange:L},null,8,["src"])])),_:1}),c($,{prop:"isAdmin",label:"是否管理员"},{default:u((()=>[c(le,{checked:i.isAdmin,onChange:H},null,8,["checked"]),c(ae,{style:{"font-size":"30rpx"}},{default:u((()=>[v(f(i.isAdmin?"是":"否"),1)])),_:1})])),_:1}),c($,{prop:"date",label:"日期"},{default:u((()=>[c(U,{round:!0,onClick:l[2]||(l[2]=e=>{h.value=!0})},{default:u((()=>[v(f(i.date||"请选择日期"),1)])),_:1})])),_:1}),c($,{prop:"address",label:"地址"},{default:u((()=>[c(U,{round:!0,onClick:l[3]||(l[3]=e=>{D.value=!0})},{default:u((()=>[v(f(C.value||"请选择地址"),1)])),_:1})])),_:1}),c($,{prop:"multiple",label:"多选项"},{default:u((()=>[c(ue,{class:"grid-box",onChange:E},{default:u((()=>[(a(),n(_,null,b(z,(e=>c(X,{class:"fvertical",key:e.value},{default:u((()=>[c(te,{value:e.value,checked:i.multiple.includes(e.value)},null,8,["value","checked"]),c(W,null,{default:u((()=>[v(f(e.label),1)])),_:2},1024)])),_:2},1024))),64))])),_:1})])),_:1}),c($,{prop:"radioValue",label:"单选项"},{default:u((()=>[c(Z,{class:"grid-box",onChange:K},{default:u((()=>[(a(),n(_,null,b(G,(e=>c(X,{class:"fvertical",key:e.value},{default:u((()=>[c(w,{value:e.value,checked:e.value===i.radioValue},null,8,["value","checked"]),c(W,null,{default:u((()=>[v(f(e.label),1)])),_:2},1024)])),_:2},1024))),64))])),_:1})])),_:1}),c($,{prop:"description",label:"描述"},{default:u((()=>[c(ee,{class:"the-input",modelValue:i.description,"onUpdate:modelValue":l[4]||(l[4]=e=>i.description=e),placeholder:r.description[0].message},null,8,["modelValue","placeholder"])])),_:1}),c(W,{class:"grid-box"},{default:u((()=>[c(U,{color:"#07c160",onClick:l[5]||(l[5]=e=>{R.value.validate(((e,l)=>{if(e)B("验证通过，在控制台可以查看表单数据"),console.log("表单数据 >>",JSON.stringify(i,null,"\t"));else{const e=Object.keys(l)[0];B(`${l[e][0].message}`)}}))})},{default:u((()=>[v("提交表单")])),_:1}),c(U,{color:"#eee",textColor:"#555",onClick:l[6]||(l[6]=e=>{R.value.resetFields((e=>{F(i,e)}))})},{default:u((()=>[v("重置")])),_:1}),c(U,{color:"linear-gradient(45deg, #FA8BFF 0%, #2BD2FF 52%, #2BFF88 90%)",onClick:l[7]||(l[7]=e=>{R.value.validateField("phone",((e,l)=>{B(e?"手机验证通过":l.phone[0].message)}))})},{default:u((()=>[v("验证手机号码")])),_:1}),c(U,{color:"#eee",textColor:"#555",onClick:l[8]||(l[8]=e=>{R.value.resetField("phone")})},{default:u((()=>[v("移除手机验证")])),_:1}),c(U,{onClick:l[9]||(l[9]=e=>{m.value=!m.value})},{default:u((()=>[v("表单边框切换")])),_:1}),c(U,{color:"#ffba00",onClick:l[10]||(l[10]=e=>function(){const e=r.description;e[0].required=!e[0].required}())},{default:u((()=>[c(ae,{class:"ellipsis",style:{"font-size":"28rpx"}},{default:u((()=>[v("切换“描述”验证状态")])),_:1})])),_:1})])),_:1})])),_:1},8,["model","rules","labelPosition","border"]),c(Q,{show:h.value,onCancel:g,onConfirm:k,value:i.date,startDate:"2019-03-12",endDate:"2021-06-04",title:"请选择日期"},null,8,["show","value"]),c(J,{show:D.value,onCancel:N,onConfirm:P,list:x(y),title:"动态层级变动"},null,8,["show","list"])])),_:1})}}}),[["__scopeId","data-v-f53ceb31"]]);export{R as default};
