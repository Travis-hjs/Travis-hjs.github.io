import{d as e,k as l,C as a,o as t,c as o,w as s,a as r,e as u,f as d,r as i,F as n,m as c,N as m,i as p,t as f}from"./index-b795adff.js";import{T as _,a as g}from"./TheForm.6c47c183.js";import{T as b}from"./TheButton.ede9d954.js";import{s as h}from"./control.a6596622.js";import{_ as v}from"./_plugin-vue_export-helper.1b428a4d.js";const V=v(e({__name:"form-dynamic",setup(e){const v=l({title:"",email:"",list:[]}),V=l({title:[{required:!0,message:"请输入标题"}],email:[{required:!0,message:"请输入邮箱"},{reg:/^([a-zA-Z]|[0-9])(\w|\-)+@[a-zA-Z0-9]+\.([a-zA-Z]{2,4})$/.toString(),message:"邮箱地址不正确"}],list:[{required:!0,message:"列表不能为空"}]});function k(e){return[{required:!0,message:"请输入"+e}]}const F=a();const x=a([]);return(e,l)=>{const a=m,C=p;return t(),o(C,{class:"form-dynamic"},{default:s((()=>[r(g,{model:v,rules:V,labelWidth:"160rpx",ref_key:"theForm",ref:F},{default:s((()=>[r(_,{prop:"title",label:"标题"},{default:s((()=>[r(a,{class:"the-input",type:"text",modelValue:v.title,"onUpdate:modelValue":l[0]||(l[0]=e=>v.title=e),placeholder:V.title[0].message},null,8,["modelValue","placeholder"])])),_:1}),r(_,{prop:"email",label:"邮箱地址"},{default:s((()=>[r(a,{class:"the-input",type:"text",modelValue:v.email,"onUpdate:modelValue":l[1]||(l[1]=e=>v.email=e),placeholder:V.email[0].message},null,8,["modelValue","placeholder"])])),_:1}),r(_,{prop:"list",label:"列表"},{default:s((()=>[r(b,{onClick:l[2]||(l[2]=e=>{v.list.push({label:Math.random().toString(36).slice(2),value:""})})},{default:s((()=>[u("添加一条列表项")])),_:1}),r(C,{class:"mgb-20"}),(t(!0),d(n,null,i(v.list,((e,l)=>(t(),o(C,{class:"f-vertical",key:l},{default:s((()=>[r(_,{prop:"list."+l+".value",label:e.label,labelWidth:"100rpx",rules:k(e.label)},{default:s((()=>[r(a,{class:"the-input mgb-20",type:"text",modelValue:e.value,"onUpdate:modelValue":l=>e.value=l,placeholder:k(e.label)[0].message},null,8,["modelValue","onUpdate:modelValue","placeholder"]),r(b,{color:"#f44336",round:!0,onClick:e=>function(e){v.list.splice(e,1)}(l)},{default:s((()=>[u("删除"+f(e.label),1)])),_:2},1032,["onClick"])])),_:2},1032,["prop","label","rules"])])),_:2},1024)))),128))])),_:1}),(t(!0),d(n,null,i(x.value,((e,l)=>(t(),o(_,{prop:e,label:"新增"+e,key:l},{default:s((()=>[r(a,{class:"the-input mgb-20",modelValue:v[e],"onUpdate:modelValue":l=>v[e]=l,placeholder:V[e][0].message},null,8,["modelValue","onUpdate:modelValue","placeholder"]),r(b,{onClick:e=>function(e){const l=x.value[e];delete v[l],delete V[l],x.value.splice(e,1)}(l),color:"#f44336",round:!0},{default:s((()=>[u("删除当前动态表单")])),_:2},1032,["onClick"])])),_:2},1032,["prop","label"])))),128)),r(C,{class:"grid-box"},{default:s((()=>[r(b,{color:"#07c160",onClick:l[3]||(l[3]=e=>{F.value.validate(((e,l)=>{if(e)console.log("表单数据 >>",v);else{const e=Object.keys(l)[0];h(`${l[e][0].message}`)}}))})},{default:s((()=>[u("提交表单")])),_:1}),r(b,{color:"#eee",textColor:"#555",onClick:l[4]||(l[4]=e=>{F.value.resetFields(((e,l)=>{c(v,e),c(V,l),x.value=[]}))})},{default:s((()=>[u("重置")])),_:1}),r(b,{color:"linear-gradient(45deg, #FA8BFF 0%, #2BD2FF 52%, #2BFF88 90%)",onClick:l[5]||(l[5]=e=>function(){const e=`add${Date.now()}`;v[e]="",V[e]=[{required:!0,message:`请输入 ${e}`}],x.value.push(e)}())},{default:s((()=>[u("添加动态表单")])),_:1})])),_:1})])),_:1},8,["model","rules"])])),_:1})}}}),[["__scopeId","data-v-cdb03f12"]]);export{V as default};
