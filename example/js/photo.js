(function(){function e(e){e.parentElement.remove()}function t(e){return new Promise(function(t,n){const c=new FileReader;c.onload=function(){t(c.result)},c.onerror=function(){console.warn("reader error >>",c.error),n(new Error("blobOrFlieToBase64 error"))},c.readAsDataURL(e)})}function n(e){function n(n,c){t(c).then(t=>{if(s[n]=t,i++,i>=o){e.value="";const t=[];s.forEach(e=>{const n=document.createElement("div");n.className="item",n.innerHTML=`<div class="img-wrap"><img src="${e}" crossorigin="anonymous" ></div><button onclick="deletePhoto(this)">${r}</button>`,t.push(n)}),l.append(...t)}})}const c=e.files,o=c.length;let i=0;const s=new Array(o).fill("");for(let e=0;e<o;e++)n(e,c[e]);const r='<svg t="1700013819512" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="4055"><path d="M858.31 208.58h-165.5l0.85-28.29c0.38-27.08-9.23-52.8-27.06-72.4-18.41-20.24-43.3-31.6-70.06-31.98l-164.8-2.34c-26.75-0.29-51.96 10.27-70.94 29.99-18.37 19.09-28.71 44.52-29.08 71.05l-1.03 33.96h-165c-18.96 0-34.33 15.37-34.33 34.33s15.37 34.33 34.33 34.33h31.54v570.19c0 56.8 46.2 103 103 103h423.55c56.8 0 103-46.2 103-103V277.24h31.53c18.96 0 34.33-15.37 34.33-34.33s-15.37-34.33-34.33-34.33z m-457.94-32.44c0.13-9.6 3.65-18.47 9.91-24.96 5.66-5.87 12.4-9.42 20.49-8.94l164.81 2.34c7.55 0.1 14.74 3.48 20.22 9.51 6.07 6.67 9.34 15.63 9.21 24.68l-0.89 29.81H399.39l0.98-32.44z m357.74 671.3c0 18.93-15.4 34.33-34.33 34.33H300.23c-18.93 0-34.33-15.4-34.33-34.33v-570.2h492.22v570.2z" p-id="4056" fill="#ffffff"></path><path d="M364.67 768.85c18.96 0 34.33-15.37 34.33-34.33V454.33c0-18.96-15.37-34.33-34.33-34.33s-34.33 15.37-34.33 34.33v280.19c0 18.96 15.37 34.33 34.33 34.33zM512 768.85c18.96 0 34.33-15.37 34.33-34.33V454.33c0-18.96-15.37-34.33-34.33-34.33s-34.33 15.37-34.33 34.33v280.19c0 18.96 15.37 34.33 34.33 34.33zM659.33 768.85c18.96 0 34.33-15.37 34.33-34.33V454.33c0-18.96-15.37-34.33-34.33-34.33S625 435.37 625 454.33v280.19c0 18.96 15.37 34.33 34.33 34.33z" p-id="4057" fill="#ffffff"></path></svg>'}function c(e){if(!l.children.length)return alert("请上传图片再继续");if(d)return;l.classList.add(s.btnHide),d=!0;const t=r.value?Number(r.value):2;setTimeout(function(){html2canvas(l,{useCORS:!0,scale:t,width:l.clientWidth,height:l.clientHeight}).then(t=>{const n=t.toDataURL("image/jpeg");e?(a.children[0].innerHTML=`<img src="${n}" style="display: block; height: calc(100% - 36px); margin: 0 auto"><button class="mask-close" onclick="closeMask()">点击关闭(长摁可保存)</button>`,a.classList.remove(s.maskHide)):o(n),l.classList.remove(s.btnHide),d=!1})},60)}function o(e){const t=document.createElement("a");t.href=e,t.download="合成长图.jpg",t.click()}function i(){a.classList.add(s.maskHide)}const s={maskHide:"mask-hide",btnHide:"btn-hide"},l=document.querySelector(".content"),r=document.querySelector(".scale-input"),a=document.querySelector(".mask");let d=!1;const u={deletePhoto:e,upload:n,closeMask:i,createPicture:c};for(const e in u)window[e]=u[e]})();