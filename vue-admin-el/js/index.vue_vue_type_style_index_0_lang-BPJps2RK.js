import{F as A}from"./index-DU6CGFct.js";import{k as V,f as S}from"./index-CEK233na.js";import{h as I,c as i,b as y,F as B,s as D,A as _,aD as $,d as T,e as m,y as L,j as v,S as U,u as C,a2 as M,az as G,f as j,l as h,m as H,D as J,B as f,t as q,z as K,g as O}from"./element-plus-x0cfZ0jw.js";function Q(s){return typeof s=="function"||Object.prototype.toString.call(s)==="[object Object]"&&!$(s)}function R(s){return i(B,null,[s.label,i(y("el-tooltip"),{effect:"dark",content:s.tips,"raw-content":!0,placement:"top-start"},{default:()=>[i(y("el-button"),{type:"info",link:!0,style:"height: 32px;"},{default:()=>[i("i",{class:"el-icon-question"},null)]})]})])}const W=I({props:{attrs:{type:Object,required:!0}},emits:["change"],setup(s,{emit:w}){const p=D({get(){const l=s.attrs.modelValue;return V(l,"array")?l.map(g=>new Date(g)):l&&new Date(l)},set(l){w("change",l)}});return()=>i(y("el-date-picker"),_({"range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},s.attrs,{modelValue:p.value,"onUpdate:modelValue":l=>p.value=l}),null)}}),X=I({props:{attrs:{type:Object,required:!0},field:{type:Object,required:!0}},emits:["change"],setup(s,{emit:w}){const p=D({get(){return s.attrs.modelValue},set(r){w("change",r)}}),l=D(()=>{const r=s.field.optionSetting||{};return{value:r.value||"value",label:r.label||"label"}});function g(r){const n=l.value;return`${r[n.label]||r[n.value]}`}return()=>{let r;return s.field.options.length>36?i(y("el-select-v2"),_(s.attrs,{options:s.field.options,props:l.value,modelValue:p.value,"onUpdate:modelValue":n=>p.value=n}),{default:({item:n})=>i("span",{title:g(n)},[g(n)])}):i(y("el-select"),_(s.attrs,{modelValue:p.value,"onUpdate:modelValue":n=>p.value=n}),Q(r=s.field.options.map(n=>i(y("el-option"),{key:n[l.value.value],label:g(n),value:n[l.value.value]},null)))?r:{default:()=>[r]})}}}),Y={key:8,class:"tips-box"},Z={class:"the-tag blue"},ee=O("i",{class:"el-icon--left el-icon-info"},null,-1),te={name:"TheFields"},se=I({...te,props:{type:{type:String,default:"form"},data:{type:Object,required:!0},list:{type:Array,required:!0}},emits:["change"],setup(s,{emit:w}){const p=s,l=w,g=D(()=>p.list.filter(t=>V(t.show,"boolean")?t.show:V(t.show,"function")?t.show():!0));function r(t,a){const o=t.prop,u=p.data;if(o.includes(".")){const x=[null,void 0],b=o.split(".");let e=u;for(const d of b){if(x.includes(e[d]))return;e=e[d]}return e}return u[t.prop]}function n(t,a,o){const u=o||t.prop,x=p.data;if(u.includes(".")){const b=u.split(".");let e=x;for(let d=0;d<b.length-1;d++){const c=b[d];e[c]||(e[c]={}),e=e[c]}e[b[b.length-1]]=a}else x[u]=a}function k(t,a){const o=t.prop,u=a;t.type!=="date"&&n(t,u),t.onChange&&t.onChange(u),l("change",o,u)}function N(t){return t.class||(p.type==="form"?"w-full":"short-value")}function F(t){const a=V(t.disabled,"function")?t.disabled():t.disabled;return{placeholder:t.placeholder,disabled:a,class:N(t),clearable:t.type==="textarea"?void 0:!t.noClear,modelValue:r(t)}}function P(t){const a=t.type==="select-multiple",o=V(t.disabled,"function")?t.disabled():t.disabled,u=t.type==="select-multiple"?t.showAll:!1;return{placeholder:t.placeholder,disabled:o,multiple:a,clearable:!t.noClear,filterable:!0,collapseTags:!u,class:N(t),modelValue:r(t)}}function E(t){const a=["",null,void 0],o=p.data[t.prop];return(a.includes(o)?t.placeholder:o)||"-"}function z(t,a){const o=t.bind;n(t,a),["daterange","datetimerange"].includes(t.dateType)?a?(n(t,S(a[0],t.format),o[0]),n(t,S(a[1],t.format),o[1])):(n(t,void 0,o[0]),n(t,void 0,o[1])):n(t,a?S(a,t.format):void 0,o[0]),k(t,a)}return(t,a)=>{const o=y("el-input"),u=y("el-input-number"),x=y("el-switch"),b=y("el-text");return m(!0),T(B,null,L(g.value,(e,d)=>(m(),v(U(p.type==="form"?C(M):C(A)),{key:e.key||`${e.prop}-${d}`,label:e.label,prop:e.prop,class:"the-fields-item"},G({default:j(()=>[e.type==="input"?(m(),v(o,_({key:0},F(e),{onInput:c=>k(e,c)}),null,16,["onInput"])):h("",!0),e.type==="textarea"?(m(),v(o,_({key:1},F(e),{rows:e.rows,"show-word-limit":"",type:"textarea",onInput:c=>k(e,c)}),null,16,["rows","onInput"])):h("",!0),e.type==="number"?(m(),v(u,_({key:2},F(e),{min:e.min,max:e.max,"controls-position":"right",onInput:c=>k(e,c)}),null,16,["min","max","onInput"])):h("",!0),e.type==="select"||e.type==="select-multiple"?(m(),v(C(X),{key:3,attrs:P(e),field:e,onChange:c=>k(e,c)},null,8,["attrs","field","onChange"])):h("",!0),e.type==="date"?(m(),v(C(W),{key:4,attrs:{type:e.dateType,format:e.formatShow,...F(e)},onChange:c=>z(e,c)},null,8,["attrs","onChange"])):h("",!0),e.type==="switch"?(m(),v(x,{key:5,"model-value":r(e),"inline-prompt":"","active-text":e.activeText||"是","inactive-text":e.inactiveText||"否","active-value":e.activeValue,"inactive-value":e.inactiveValue,onChange:c=>k(e,c)},null,8,["model-value","active-text","inactive-text","active-value","inactive-value","onChange"])):h("",!0),e.type==="text"?(m(),T("div",{key:6,class:J(["text-box",e.class||"w-full"])},[i(b,null,{default:j(()=>[f(q(E(e)),1)]),_:2},1024)],2)):h("",!0),e.type==="slot"&&e.slotName?H(t.$slots,e.slotName,K(_({key:7},e))):h("",!0),e.tips?(m(),T("div",Y,[O("span",Z,[ee,f(" "+q(e.tips),1)])])):h("",!0)]),_:2},[e.tooltip?{name:"label",fn:j(()=>[i(C(R),{label:e.label,tips:e.tooltip},null,8,["label","tips"])]),key:"0"}:void 0]),1032,["label","prop"]))),128)}}});export{se as _};
