import{k as I,S as k,h as w,g as x,f as S,e as $,U as C,a as i}from"./index-EDhAcPNC.js";import{d as _,g as L,k as v,i as b,m,c as r,u as l,A as B,l as P,q as A,C as T,aB as U,r as W,o as q,h as z}from"./element-plus-Bs1OMPt8.js";import{_ as D}from"./Table.vue_vue_type_script_setup_true_lang-CRHP5puz.js";const F={name:"SearchHeader"},M=_({...F,props:{loading:Boolean,labelWidth:String,searchInfo:{type:Object,required:!0},list:{type:Array,required:!0}},emits:["search"],setup(h,{emit:c}){const s=h,d=c,u=L(()=>s.list.filter(e=>e.type==="slot").map(e=>e.slotName));function g(e){d("search",e)}return(e,f)=>(b(),v(l(w),{"label-width":s.labelWidth},{right:m(()=>[r(l(k),{loading:s.loading,onSearch:g},null,8,["loading"])]),default:m(()=>[r(l(I),{type:"search",data:s.searchInfo,list:s.list},B({_:2},[P(u.value,o=>({name:o,fn:m(p=>[A(e.$slots,o,T(U(p)))])}))]),1032,["data","list"])]),_:3},8,["label-width"]))}}),N={class:"the-common-table-page"},H=_({__name:"table-page",setup(h){function c(){return{}}const s=[{label:"查询名称",prop:"keyword",type:"input",placeholder:"请输入查询关键字"},{label:"日期范围",prop:"date",type:"date",dateType:"datetimerange",bind:["start","end"],placeholder:"请选择日期",class:"w-[380px]"},{label:"状态",prop:"status",type:"select",options:[{label:"正常",value:0},{label:"禁用",value:1}]}],d=[{title:"ID",prop:"id",width:80},{title:"名称\\n通过斜杠+n换行",prop:"name",minWidth:180,sort:"asc"},{title:"状态",prop:"status",width:100,sort:!0,rawContent(a,t){const n=t.status===1?"green":"gray",y=t.status===1?"正常":"禁用";return`<span class="the-tag ${n}">${y}</span>`}},{title:"日期",prop:"date",width:180,sort:"desc",titleTips:"静态数据，当前刷新日期"},{title:"操作",prop:"action-right",width:140}],u=[{text:"同步数据",icon:"el-icon-refresh",type:"warning",click(){i.warning("同步数据")}},{text:"导出",icon:"el-icon-download",type:"success",click(){i.success("导出")}},{text:"新增",icon:"el-icon-plus",click(){i.info("新增")}}],g=[{text:"编辑",icon:"el-icon-edit",type:"success",click(a){i.success(`编辑: ${a.name}`)}},{text:"删除",icon:"el-icon-delete",type:"danger",click(a){i.error(`删除: ${a.name}`)}}],e=W({loading:!1,data:[],selectList:[],pageInfo:x(),searchFields:s,searchInfo:c(),tableColumns:d}),f=Array.from({length:62}).map((a,t)=>({id:t+1,name:$(2,40),date:S(),status:Math.random()<.5?1:0}));async function o(){console.log("pageInfo >>",e.pageInfo);const a=e.pageInfo.pageSize,t=e.pageInfo.currentPage;e.data=f.slice((t-1)*a,t*a),e.pageInfo.total=f.length}function p(a){a&&(e.searchInfo=c()),e.pageInfo.currentPage=1,o()}return q(function(){p()}),(a,t)=>(b(),z("div",N,[r(l(M),{"search-info":e.searchInfo,list:e.searchFields,loading:e.loading,onSearch:p},null,8,["search-info","list","loading"]),r(l(C),{columns:e.tableColumns,"onUpdate:columns":t[0]||(t[0]=n=>e.tableColumns=n),operations:u,loading:e.loading},null,8,["columns","loading"]),r(l(D),{class:"f1","select-key":"id","sort-multiple":"","select-list":e.selectList,"onUpdate:selectList":t[1]||(t[1]=n=>e.selectList=n),"page-info":e.pageInfo,"onUpdate:pageInfo":t[2]||(t[2]=n=>e.pageInfo=n),columns:e.tableColumns,data:e.data,actions:g,loading:e.loading,onPage:o,onSort:o},null,8,["select-list","page-info","columns","data","loading"])]))}});export{H as default};
