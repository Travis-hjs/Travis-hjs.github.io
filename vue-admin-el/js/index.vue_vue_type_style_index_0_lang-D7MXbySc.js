import{H as at,I as ze,a as it,d as ue,h as X,o as Ke,b,e as i,f as C,k as E,B as be,m as S,F as Y,c as e,g as o,C as q,t as ne,i as k,z as ee,u as V,q as $e,ax as Ee,n as se,N as Ve,r as ie,w as ge,s as Fe,j as _e,T as rt,K as st}from"./element-plus-DnvTX0jb.js";import{b as ut,F as Ye,a as dt}from"./index-CfiAc13R.js";import{g as le,h as Me,k as re,f as Ue,i as je,b as ye,l as De,n as ct,a as pe,u as pt,c as Je,p as ft}from"./index-DeUqncAG.js";import{v as mt,s as vt}from"./dom-vtHEqTVj.js";import{r as yt}from"./common-Bzdw5RYx.js";const Ge="the-curd-state",We=()=>at(Ge),fe="action-right",me="action-edit",ce={input:"输入框",textarea:"文本域","input-between":"输入框-串联",select:"下拉框-单选","select-multiple":"下拉框-多选",checkbox:"多选复选框",radio:"单选选择框",switch:"开关切换",date:"日期选择器",cascader:"级联选择器"};let Ie=0;function Ze(){return Ie++,Ie}function Be(s){if(s.type=="date"){const c=s.shortcutIndex,l="the-date-shortcut-selected",W=document.querySelector(`.${l}`);if(W&&W.classList.remove(l),le(c,"number"))if(c===-1)s.value=s.shortcutDate;else{const p=qe[s.dateType][c].value();s.value=p;const u=`.${s.id} .el-picker-panel__sidebar`,f=document.querySelector(u);f&&ze(()=>f.children[c].classList.add(l))}else s.value=["daterange","datetimerange"].includes(s.dateType)?[]:""}else["object","array"].includes(Me(s.defaultValue))?s.value=re(s.defaultValue):s.value=s.defaultValue}function de(s,c="",l){const W=Ze(),p=Date.now(),u="请输入",f="请选择",v=`field-${s}-${W}-${p}`,j={input:{key:c,id:v,type:"input",value:"",defaultValue:"",placeholder:u,valueType:"string"},textarea:{id:v,value:"",defaultValue:"",type:"textarea",placeholder:u,key:c,valueType:"string"},"input-between":{key:c,id:v,value:["",""],defaultValue:["",""],type:"input-between",placeholder:["请输入范围一","请输入范围二"],separator:"-",valueType:"array"},select:{key:c,id:v,value:"",defaultValue:"",type:"select",placeholder:f,options:[],optionSetting:{label:"",value:""},valueType:"string",joinShow:!1},"select-multiple":{key:c,id:v,value:[],defaultValue:[],type:"select-multiple",placeholder:f,options:[],optionSetting:{label:"",value:""},valueType:"array",joinShow:!1},checkbox:{key:c,id:v,value:[],defaultValue:[],type:"checkbox",placeholder:f,options:[],optionSetting:{label:"",value:""},valueType:"array"},radio:{key:c,id:v,value:"",defaultValue:"",type:"radio",placeholder:f,options:[],optionSetting:{label:"",value:""},valueType:"string"},switch:{key:c,id:v,value:!1,defaultValue:!1,type:"switch",placeholder:"",valueType:"boolean"},date:{key:c,id:v,value:"",type:"date",placeholder:f,dateType:"date",formatShow:"YYYY-MM-DD",format:"Y-M-D",valueType:"string",shortcutIndex:""},cascader:{key:c,id:v,value:[],defaultValue:[],type:"cascader",placeholder:f,options:[],optionSetting:{label:"",value:"",children:""},multiple:!1,checkStrictly:!1,valueType:"array"}}[s];return j.label="",j.required=!1,j}function Oe(s,c){return{label:c,prop:s,width:void 0,minWidth:void 0,tooltip:s!==fe,cellType:"text",sort:!1,fixed:!1,iconTips:"",imageWidth:void 0,imageHeight:void 0,jsCode:"",visible:!0}}function Pe(){return{width:500,labelWidth:120,labelPosition:"left",fields:[]}}function Te(){return{key:`action-${Ze()}-${Date.now()}`,text:"",icon:"",click:"",type:"primary"}}function Xe(s){const c={value:s.value,result:!0};if(s.type==="date"){if(!c.value)return c.result=s.placeholder,c;if(["datetimerange","daterange"].includes(s.dateType)){const u=s.value;return u.length<2?(c.result=s.placeholder,c):(c.value=u.map(f=>Ue(f,s.format)),c)}return c.value=Ue(s.value,s.format),c}const l=[null,void 0,""];if(s.type==="input-between"){const u=s.value;if(l.includes(u[0]))return c.result=s.placeholder[0],c;if(l.includes(u[1]))return c.result=s.placeholder[1],c;c.value=JSON.parse(JSON.stringify(u))}if(["input","textarea","radio","select"].includes(s.type)&&l.includes(s.value))return c.result=s.placeholder,c;if(["checkbox","select-multiple"].includes(s.type)){const u=s.value;if(!u.length)return c.result=s.placeholder,c;c.value=JSON.parse(JSON.stringify(u))}return c}function ke(s){if(s)return s=parseInt(s.toString()),s=Math.abs(s),`${s}px`}const Re=[{label:"选择年份",value:"year",formatShow:"YYYY",format:"Y"},{label:"选择年份-月份",value:"month",formatShow:"YYYY-MM",format:"Y-M"},{label:"选择年份-周",value:"week",formatShow:"YYYY年 第ww周",format:"Y-M-D"},{label:"选择年份-月份-日",value:"date",formatShow:"YYYY-MM-DD",format:"Y-M-D"},{label:"选择年份-月份-日 时:分:秒",value:"datetime",formatShow:"YYYY-MM-DD HH:mm:ss",format:"Y-M-D h:m:s"},{label:"选择日期范围",value:"daterange",formatShow:"YYYY-MM-DD",format:"Y-M-D"},{label:"选择日期-时间范围",value:"datetimerange",formatShow:"YYYY-MM-DD HH:mm:ss",format:"Y-M-D h:m:s"}],Qe=3600*1e3*24;function ve(s=0){const c=new Date;return c.setMonth(new Date().getMonth()-s),c}function we(s=0){const c=new Date,l=Qe*7*s;return c.setTime(c.getTime()-l),c}const Ne=[{text:"今天",value:()=>new Date},{text:"昨天",value(){const s=new Date;return s.setTime(s.getTime()-Qe),s}},{text:"一周前",value:()=>we(1)},{text:"一个月前",value:()=>ve(1)},{text:"三个月前",value:()=>ve(3)},{text:"半年前",value:()=>ve(6)},{text:"一年前",value:()=>ve(12)}],He=Ne.map((s,c)=>{const l=c===0,W=new Date().toLocaleDateString(),p=[new Date(`${W} 00:00:00`),new Date(`${W} 23:59:59`)];return{text:l?"今天内":`${s.text}至今`,value:()=>l?p:[s.value(),new Date]}}),qe={year:[{text:"今年",value:()=>new Date},{text:"去年",value:()=>new Date(new Date().setFullYear(new Date().getFullYear()-1))},{text:"前年",value:()=>new Date(new Date().setFullYear(new Date().getFullYear()-2))}],month:[{text:"当月",value:()=>new Date},{text:"上月",value:()=>ve(1)},{text:"前3个月",value:()=>ve(3)},{text:"前6个月",value:()=>ve(6)},{text:"前12个月",value:()=>ve(12)}],week:[{text:"本周",value:()=>new Date},{text:"上周",value:()=>we(1)},{text:"上2周",value:()=>we(2)},{text:"上3周",value:()=>we(3)},{text:"上4周",value:()=>we(4)}],date:Ne,datetime:Ne,daterange:He,datetimerange:He};function ht(s){const c=window;for(const l in s){const W=`_${l}`;c[W]=s[l]}it(function(){for(const l in s){const W=`_${l}`;c[W]=null}})}function oe(s){return`<b style="color: var(--yellow)"> ${s} </b>`}const gt=["title"],bt={name:"Field"},xe=ue({...bt,props:{fieldData:{type:Object,required:!0},editMode:Boolean,readonly:Boolean,disabled:Boolean},emits:["change"],setup(s,{emit:c}){const l=s,W=c;Be(l.fieldData);function p(D){let m=D||l.fieldData.value;le(m,"array")&&(m=re(m)),W("change",m)}const u=X(()=>l.fieldData),f=X(()=>{const D=l.fieldData.optionSetting||{};return{value:D.value||"value",label:D.label||"label"}}),v=X(()=>{const D=l.fieldData,m=D.optionSetting;return{multiple:D.multiple,checkStrictly:D.checkStrictly,value:m.value||"value",label:m.label||"label",children:m.children||"children"}});function J(D){const m=u.value.placeholder;return{disabled:l.disabled,readonly:l.readonly,clearable:!0,placeholder:le(D,"number")?m[D]:m}}function j(D){const m=l.fieldData;m.valueType==="number"?(m.value=je(D,!0,!0),p(Number(m.value))):(m.value=D,p())}function N(D,m){const R=l.fieldData;R.valueType==="array<number>"?(R.value[m]=je(D,!0,!0),p(R.value.map(U=>Number(U)))):(R.value[m]=D,p())}const P=["-",".","",null,void 0];function Q(){const D=l.fieldData;D.valueType==="number"&&(P.includes(D.value)?D.value="":D.value=Number(D.value))}function I(D){const m=l.fieldData;if(m.valueType==="array<number>"){const R=m.value[D];P.includes(R)?m.value[D]="":m.value[D]=Number(R)}}function _(D){const m=D.type==="select-multiple";return{placeholder:D.placeholder,disabled:l.disabled,multiple:D.type==="select-multiple",clearable:!0,filterable:!0,collapseTags:!0,class:`field-item${m?" is-multiple-select":""}`}}function L(D,m){const R=f.value;return D.joinShow?`${m[R.label]}-${m[R.value]}`:`${m[R.label]}`}let B=[];const a="the-date-shortcut-selected";function F(){const D=document.querySelector(`.${a}`);D&&D.classList.remove(a),p()}function K(D){D.classList.add(a)}return Ke(function(){const D=l.fieldData;if(D.type==="date"){const m=`.${D.id} .el-picker-panel__sidebar`,R=document.querySelector(m);if(!R)return console.warn("找不到日期快捷面板节点！");B=Array.from(R.children),B.forEach(G=>{G.addEventListener("click",()=>K(G))});const U=D.shortcutIndex;le(U,"number")&&U>=0&&K(B[U])}}),(D,m)=>{const R=b("el-input"),U=b("el-text"),G=b("el-select-v2"),O=b("el-option"),d=b("el-select"),n=b("el-checkbox"),M=b("el-checkbox-group"),A=b("el-radio"),y=b("el-radio-group"),h=b("el-switch"),$=b("el-cascader"),r=b("el-date-picker");return i(),C("div",{class:"the-curd-form-field f-vertical short-value",style:$e({width:V(ke)(u.value.valueWidth)})},[u.value.type==="input"?(i(),E(R,be({key:0,"model-value":u.value.value},J(),{class:"the-curd-field",onInput:j,onBlur:Q}),null,16,["model-value"])):S("",!0),u.value.type==="textarea"?(i(),E(R,{key:1,modelValue:u.value.value,"onUpdate:modelValue":m[0]||(m[0]=t=>u.value.value=t),readonly:l.readonly,disabled:l.disabled,autosize:{minRows:2,maxRows:10},placeholder:u.value.placeholder,type:"textarea",class:"the-curd-field",onInput:m[1]||(m[1]=t=>p())},null,8,["modelValue","readonly","disabled","placeholder"])):S("",!0),u.value.type==="input-between"?(i(),C(Y,{key:2},[e(R,be({"model-value":u.value.value[0]},J(0),{class:"f1",onInput:m[2]||(m[2]=t=>N(t,0)),onBlur:m[3]||(m[3]=t=>I(0))}),null,16,["model-value"]),e(U,{style:{padding:"0 6px"}},{default:o(()=>[q(ne(u.value.separator),1)]),_:1}),e(R,be({"model-value":u.value.value[1]},J(1),{class:"f1",onInput:m[4]||(m[4]=t=>N(t,1)),onBlur:m[5]||(m[5]=t=>I(1))}),null,16,["model-value"])],64)):S("",!0),u.value.type==="select"||u.value.type==="select-multiple"?(i(),C(Y,{key:3},[u.value.options.length>50?(i(),E(G,be({key:0,modelValue:u.value.value,"onUpdate:modelValue":m[6]||(m[6]=t=>u.value.value=t),options:u.value.options,props:f.value},_(u.value),{onChange:m[7]||(m[7]=t=>p())}),{default:o(({item:t})=>[k("span",{title:L(u.value,t)},ne(L(u.value,t)),9,gt)]),_:1},16,["modelValue","options","props"])):(i(),E(d,be({key:1,modelValue:u.value.value,"onUpdate:modelValue":m[8]||(m[8]=t=>u.value.value=t)},_(u.value),{onChange:m[9]||(m[9]=t=>p())}),{default:o(()=>[(i(!0),C(Y,null,ee(u.value.options,t=>(i(),E(O,{key:t[f.value.value],value:t[f.value.value],label:L(u.value,t)},null,8,["value","label"]))),128))]),_:1},16,["modelValue"]))],64)):S("",!0),u.value.type==="checkbox"?(i(),C(Y,{key:4},[e(M,{modelValue:u.value.value,"onUpdate:modelValue":m[10]||(m[10]=t=>u.value.value=t),disabled:l.disabled,onChange:m[11]||(m[11]=t=>p())},{default:o(()=>[(i(!0),C(Y,null,ee(u.value.options,t=>(i(),E(n,{key:t[f.value.value],value:t[f.value.value]},{default:o(()=>[q(ne(t[f.value.label]),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue","disabled"]),l.editMode&&!u.value.options.length?(i(),E(U,{key:0,type:"primary"},{default:o(()=>[q(ne(V(ce).checkbox)+"（空数据） ",1)]),_:1})):S("",!0)],64)):S("",!0),u.value.type==="radio"?(i(),C(Y,{key:5},[e(y,{modelValue:u.value.value,"onUpdate:modelValue":m[12]||(m[12]=t=>u.value.value=t),disabled:l.disabled,onChange:m[13]||(m[13]=t=>p())},{default:o(()=>[(i(!0),C(Y,null,ee(u.value.options,t=>(i(),E(A,{key:t[f.value.value],value:t[f.value.value]},{default:o(()=>[q(ne(t[f.value.label]),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue","disabled"]),l.editMode&&!u.value.options.length?(i(),E(U,{key:0,type:"primary"},{default:o(()=>[q(ne(V(ce).radio)+"（空数据） ",1)]),_:1})):S("",!0)],64)):S("",!0),u.value.type==="switch"?(i(),E(h,{key:6,modelValue:u.value.value,"onUpdate:modelValue":m[14]||(m[14]=t=>u.value.value=t),"inline-prompt":"","active-text":"是","inactive-text":"否",onChange:m[15]||(m[15]=t=>p())},null,8,["modelValue"])):S("",!0),u.value.type==="cascader"?(i(),E($,{key:7,modelValue:u.value.value,"onUpdate:modelValue":m[16]||(m[16]=t=>u.value.value=t),options:u.value.options,props:v.value,placeholder:u.value.placeholder,disabled:l.disabled,clearable:"","collapse-tags":"","collapse-tags-tooltip":"",filterable:"",class:"the-curd-field",onChange:m[17]||(m[17]=t=>p())},null,8,["modelValue","options","props","placeholder","disabled"])):S("",!0),u.value.type==="date"?(i(),E(r,{key:8,modelValue:u.value.value,"onUpdate:modelValue":m[18]||(m[18]=t=>u.value.value=t),placeholder:u.value.placeholder,type:u.value.dateType,format:u.value.formatShow,shortcuts:V(qe)[u.value.dateType],disabled:l.disabled,"popper-class":u.value.id.toString(),"range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",class:"the-curd-field",onChange:F},null,8,["modelValue","placeholder","type","format","shortcuts","disabled","popper-class"])):S("",!0)],4)}}}),_t={key:0,class:"el-icon-rank el-icon--left"},kt={style:{"line-height":"1"}},wt={key:0,class:"the-curd-edit-mask f-vertical f-right"},xt=k("i",{class:"el-icon-delete el-icon--left"},null,-1),Vt=k("i",{class:"el-icon-edit el-icon--left"},null,-1),Dt=k("i",{class:"el-icon-plus"},null,-1),$t={name:"Search"},St=ue({...$t,props:{data:{type:Object,required:!0}},emits:["search"],setup(s,{emit:c}){const l=s,W=c,p=We(),u=X(()=>p.editor.type==="search"&&!p.editor.show);function f(I){const _=l.data.list[I].label||l.data.list[I].key;ye({title:"操作提示",content:`是否删除【${_}】？`,cancelText:"取消",confirm(){l.data.list.splice(I,1)}})}function v(I){p.editor.index=I,p.editor.action="edit",p.editor.show=!0}function J(I){return p.editor.index===I&&p.editor.type==="search"&&p.editor.show}function j(){p.editor.index=-1,p.editor.action="add",p.editor.show=!0}const{onDragStart:N,onDragMove:P,onDropEnd:Q}=De({list:()=>l.data.list,key:"id",findLevel:5});return(I,_)=>{const L=b("el-button"),B=b("el-text");return i(),E(V(dt),{class:"the-curd-search","label-right":l.data.labelRight,"label-width":V(ke)(l.data.labelWidth)||"auto"},Ee({content:o(()=>[e(Ve,{name:"the-group",tag:"div",class:"the-filter-content f1"},{default:o(()=>[(i(!0),C(Y,null,ee(l.data.list,(a,F)=>(i(),E(V(Ye),{key:a.id,"data-key":a.id,class:se([{"the-curd-selected":J(F)},a.id]),label:a.label,"label-width":V(ke)(a.labelWidth),required:a.required,draggable:u.value,onDragstart:K=>V(N)(F),onDragover:K=>V(P)(K,F),onDrop:_[0]||(_[0]=K=>V(Q)())},Ee({default:o(()=>[e(xe,{"field-data":a,disabled:V(p).loading},null,8,["field-data","disabled"]),u.value?(i(),C("div",wt,[e(L,{link:"",type:"danger",onClick:K=>f(F)},{default:o(()=>[xt,q(" 删除 ")]),_:2},1032,["onClick"]),e(L,{link:"",type:"success",onClick:K=>v(F)},{default:o(()=>[Vt,q(" 编辑 ")]),_:2},1032,["onClick"])])):S("",!0)]),_:2},[V(p).editor.type==="search"?{name:"label",fn:o(()=>[u.value?(i(),C("i",_t)):S("",!0),k("span",kt,ne(a.label),1)]),key:"0"}:void 0]),1032,["data-key","class","label","label-width","required","draggable","onDragstart","onDragover"]))),128)),u.value?(i(),E(V(Ye),{key:0},{default:o(()=>[l.data.list.length?S("",!0):(i(),E(B,{key:0,type:"info",style:{"margin-right":"12px"}},{default:o(()=>[q(" 请添加筛选条件~ ")]),_:1})),e(L,{type:"primary",circle:"",onClick:_[1]||(_[1]=a=>j())},{default:o(()=>[Dt]),_:1})]),_:1})):S("",!0)]),_:1})]),_:2},[V(p).editor.type?void 0:{name:"right",fn:o(()=>[e(V(ut),{loading:V(p).loading,onSearch:_[2]||(_[2]=a=>W("search",a))},null,8,["loading"])]),key:"0"}]),1032,["label-right","label-width"])}}});function et(s){const c=s.onAction||(()=>{});return e(Y,null,[e(b("el-button"),{onClick:()=>c("exit")},{default:()=>[q("退 出")]}),e(b("el-button"),{type:"success",plain:!0,onClick:()=>c("copy")},{default:()=>[e("i",{class:"el-icon-document-copy el-icon--left"},null),q("复制JSON")]}),e(b("el-button"),{type:"primary",onClick:()=>c("complete")},{default:()=>[q("保 存")]})])}function Se(s){const c=s.onClose||(()=>{}),l=s.onSubmit||(()=>{});return e(Y,null,[e(b("el-button"),{onClick:c},{default:()=>[q("取 消")]}),e(b("el-button"),{type:"primary",loading:s.loading,disabled:s.disabledSubmit,onClick:l},{default:()=>[q("确 认")]})])}function Ct(s){const c={};return s.imageWidth&&(c.width=`${s.imageWidth}px`),s.imageHeight&&(c.height=`${s.imageHeight}px`),c}function tt(s){function c(){ct({urls:s.previewList?s.previewList:[s.src]})}return s.column.cellType==="image"?e(b("el-image"),{class:"the-table-image",style:Ct(s.column),src:s.src,onClick:c,fit:"cover"},null):null}function he(s){return e(Y,null,[s.label,e(b("el-tooltip"),{effect:"dark",content:s.tips,"raw-content":!0,placement:"top-start"},{default:()=>[e(b("el-button"),{type:"info",link:!0,style:"height: 32px;"},{default:()=>[e("i",{class:"el-icon-question"},null)]})]})])}function Tt(){const s=Array.from({length:6}).map((c,l)=>({id:l}));return e("div",{class:"the-thumbnail-search flex"},[e("div",{class:"the-thumbnail-search-content f1"},[s.map(c=>e("div",{key:c.id,class:"the-thumbnail-search-item"},null))]),e("div",{class:"the-thumbnail-search-btn f-vertical"},[e("i",{class:"el-icon-search"},null)])])}function Et(){return e("section",{class:"the-thumbnail-table"},[e("svg",{width:280,height:180,viewBox:`0 0 ${280*1} ${180*1}`,fill:"none",xmlns:"http://www.w3.org/2000/svg","data-v-d2b0a988":"",class:"the-thumbnail-table-svg"},[e("rect",{width:280,height:180,fill:""},null),e("g",{filter:"url(#filter0_d_13550_224439)"},[e("path",{d:"M65 60C65 58.8954 65.8954 58 67 58H213C214.105 58 215 58.8954 215 60V132C215 133.105 214.105 134 213 134H67C65.8954 134 65 133.105 65 132V60Z",fill:"var(--el-fill-color-blank)"},null),e("path",{d:"M67 57.7C65.7297 57.7 64.7 58.7297 64.7 60V132C64.7 133.27 65.7297 134.3 67 134.3H213C214.27 134.3 215.3 133.27 215.3 132V60C215.3 58.7297 214.27 57.7 213 57.7H67Z",stroke:"var(--el-border-color-dark)","stroke-width":.6*1},null)]),[76,92,108,124].map((W,p)=>e("rect",{key:p,x:71*1,y:W*1,width:16*1,height:4*1,rx:2*1,fill:"var(--el-color-primary)"},null)),[107,143,197].map((W,p)=>[76,92,108,124].map((u,f)=>e("rect",{key:`${p}-${f}`,x:W*1,y:u*1,width:p===2?12*1:20*1,height:4*1,rx:2*1,fill:"var(--el-border-color-dark)"},null))),e("path",{d:"M65 60C65 58.8954 65.8954 58 67 58H213C214.105 58 215 58.8954 215 60V70H65V60Z",fill:"var(--el-border-color-light)"},null),[71,107,143,199].map(W=>e("rect",{key:W,x:W*1,y:63*1,width:10*1,height:2*1,rx:1*1,fill:"var(--el-border-color-dark)"},null)),[85.75,101.75,117.75].map((W,p)=>e("line",{key:p,x1:65*1,y1:W*1,x2:215*1,y2:W*1,stroke:"var(--el-border-color-light)","stroke-width":.5*1},null)),e("defs",null,[e("filter",{id:"filter0_d_13550_224439",x:"51.0666",y:"44.0671",width:177.867*1,height:103.866*1,filterUnits:"userSpaceOnUse","color-interpolation-filters":"sRGB"},[e("feFlood",{"flood-opacity":"0",result:"BackgroundImageFix"},null),e("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"},null),e("feOffset",null,null),e("feGaussianBlur",{stdDeviation:6.66667*1},null),e("feComposite",{in2:"hardAlpha",operator:"out"},null),e("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.05 0"},null),e("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_13550_224439"},null),e("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_13550_224439",result:"shape"},null)])])])])}const Mt={class:"w-full f-vertical mgb-10"},Ut=k("div",{class:"f1"},null,-1),Ot=k("i",{class:"el-icon--left el-icon-delete"},null,-1),Nt=k("i",{class:"el-icon--left el-icon-plus"},null,-1),Wt=k("i",{class:"el-icon--left el-icon-download"},null,-1),Bt=k("i",{class:"el-icon--left el-icon-setting"},null,-1),qt={class:"f-vertical f-between mgb-10"},Lt=k("i",{class:"el-icon--left el-icon-refresh-left"},null,-1),At={key:0,class:"el-icon--left el-icon-rank"},Ft={class:"f1"},Yt={name:"TableOperation"},lt=ue({...Yt,props:{config:{type:Object,required:!0},editMode:{type:Boolean},disabled:{type:Boolean}},emits:["action"],setup(s,{emit:c}){const l=s,W=c;function p(B){W("action",B)}const u={on:"el-icon-success",off:"el-icon-remove-outline"},f=X(()=>{const B=l.config;return{add:B.formAdd&&B.formAdd.fields.length>0,edit:B.formEdit&&B.formEdit.fields.length>0,delete:!!B.selectKey}}),v=X(()=>{const B=f.value.delete,a=f.value.add,F=f.value.edit;return[{type:"delete",text:B?"修改删除":"配置删除",icon:B?u.on:u.off,style:B?"primary":"info"},{type:"add",text:a?"修改新增表单":"配置新增表单",icon:a?u.on:u.off,style:a?"primary":"info"},{type:"edit",text:F?"修改编辑表单":"配置编辑表单",icon:F?u.on:u.off,style:F?"primary":"info"}]}),J=[{label:"固定左边",value:"left"},{label:"默认",value:!1},{label:"固定右边",value:"right"}],{onDragStart:j,onDragMove:N,onDropEnd:P}=De({list:()=>l.config.columns,key:"prop"});function Q(B,a){const F=B.prop===fe,K=B.key||B.prop;return{"data-key":K,key:K,draggable:F?void 0:!0,title:F?"操作栏不可排序，只能显示隐藏操作":void 0,onDragstart:F?void 0:()=>j(a),onDragover:F?void 0:D=>N(D,a),onDrop:F?void 0:P}}const I=ie({showFixed:!1});let _=[];function L(){l.config.columns=_}return ge(()=>l.config.columns,function(B){l.editMode||(_=re(B))},{immediate:!0}),(B,a)=>{const F=b("el-button"),K=b("el-checkbox"),D=b("el-radio-button"),m=b("el-radio-group"),R=b("el-switch"),U=b("el-empty"),G=b("el-popover");return i(),C("div",Mt,[l.editMode?(i(!0),C(Y,{key:0},ee(v.value,O=>(i(),E(F,{key:O.type,type:O.style,link:"",onClick:d=>p(O.type)},{default:o(()=>[k("i",{class:se(["el-icon--left",O.icon])},null,2),q(" "+ne(O.text),1)]),_:2},1032,["type","onClick"]))),128)):S("",!0),Fe(B.$slots,"left"),l.editMode?S("",!0):(i(),C(Y,{key:1},[Ut,Fe(B.$slots,"right"),f.value.delete?(i(),E(F,{key:0,type:"danger",link:"",disabled:l.disabled,onClick:a[0]||(a[0]=O=>p("delete"))},{default:o(()=>[Ot,q(" 删除 ")]),_:1},8,["disabled"])):S("",!0),f.value.add?(i(),E(F,{key:1,type:"primary",link:"",disabled:l.disabled,onClick:a[1]||(a[1]=O=>p("add"))},{default:o(()=>[Nt,q(" 新增 ")]),_:1},8,["disabled"])):S("",!0),e(F,{type:"primary",link:"",disabled:l.disabled,onClick:a[2]||(a[2]=O=>p("export"))},{default:o(()=>[Wt,q(" 导出 ")]),_:1},8,["disabled"]),e(G,{placement:"bottom-start",width:I.showFixed?500:300,transition:"el-zoom-in-top",trigger:"click"},{reference:o(()=>[e(F,{type:"primary",link:"",disabled:l.disabled},{default:o(()=>[Bt,q(" 表格列设置 ")]),_:1},8,["disabled"])]),default:o(()=>[k("div",qt,[e(K,{modelValue:I.showFixed,"onUpdate:modelValue":a[3]||(a[3]=O=>I.showFixed=O),label:"配置固定列"},null,8,["modelValue"]),e(F,{type:"primary",link:"",onClick:a[4]||(a[4]=O=>L())},{default:o(()=>[Lt,q(" 重置 ")]),_:1})]),e(Ve,{name:"the-group",tag:"div",class:"the-curd-setting-list the-curd-scrollbar"},{default:o(()=>[(i(!0),C(Y,null,ee(l.config.columns,(O,d)=>(i(),C("div",be({class:"the-curd-option-item f-vertical"},Q(O,d)),[O.prop!==V(fe)?(i(),C("i",At)):S("",!0),k("span",Ft,ne(O.label),1),I.showFixed?(i(),E(m,{key:1,modelValue:O.fixed,"onUpdate:modelValue":n=>O.fixed=n,size:"small",class:"mgr-10"},{default:o(()=>[(i(),C(Y,null,ee(J,n=>e(D,{key:n.value.toString(),value:n.value},{default:o(()=>[q(ne(n.label),1)]),_:2},1032,["value"])),64))]),_:2},1032,["modelValue","onUpdate:modelValue"])):S("",!0),e(R,{modelValue:O.visible,"onUpdate:modelValue":n=>O.visible=n,"inline-prompt":"","active-text":"显示","inactive-text":"隐藏"},null,8,["modelValue","onUpdate:modelValue"])],16))),256)),l.config.columns.length?S("",!0):(i(),E(U,{key:"empty","image-size":120,description:"暂无可以设置的表格列"}))]),_:1})]),_:1},8,["width"])],64))])}}}),jt={key:0,class:"el-icon-rank el-icon--left",style:{"line-height":"32px"}},Jt={class:"f-vertical w-full"},It=k("i",{class:"el-icon-edit"},null,-1),Pt=k("i",{class:"el-icon-delete"},null,-1),Rt=k("i",{class:"el-icon--left el-icon-plus"},null,-1),Ht=k("i",{class:"el-icon--left el-icon-plus"},null,-1),zt={key:"bottom-setting"},Kt=k("i",{class:"el-icon--left el-icon-delete"},null,-1),Gt=k("i",{class:"el-icon--left el-icon-check"},null,-1),Zt={name:"TableForm"},ot=ue({...Zt,props:{config:{type:Object,default:()=>Pe()},type:{type:String},editMode:{type:Boolean},disabled:{type:Boolean}},emits:["change"],setup(s,{expose:c,emit:l}){const W=s,p=l,u=_e(),f=Pe(),v=ie({config:f,form:{},rules:{}}),J=We(),j=X(()=>W.type==="add"?"新增":"编辑"),N=X(()=>J.editor.show);function P(O){a(),J.editor.action=O>=0?"edit":"add",J.editor.form=v.config,J.editor.index=O,J.editor.show=!0}function Q(O){const d=v.config.fields;a(),ye({title:"操作提示",content:`是否删除【${d[O].label}】？`,cancelText:"取消",confirm(){d.splice(O,1)}})}function I(){ye({title:"操作提示",content:`是否移除【${j.value}】表单？移除后将不会出现对应功能按钮。`,cancelText:"取消",confirm(){v.config.fields=[]}})}function _(){p("change")}function L(){const O=W.type==="add"?"编辑":"新增";ye({title:"操作提示",content:`是否将表单数据同步到【${O}】表单？`,cancelText:"不同步",confirmText:"同步",cancel(){p("change",v.config)},confirm(){p("change",v.config,!0)}})}function B(O){var d;(d=u.value)==null||d.validate(n=>{if(n&&O){const M=U.value,A={};G.value.forEach(y=>{A[y.key]=M[y.key]}),O(M,A)}})}function a(){var O;(O=u.value)==null||O.clearValidate()}function F(){v.config.fields.forEach(Be)}function K(O){v.config.fields.forEach(d=>{if(Object.prototype.hasOwnProperty.call(O,d.key)){const n=O[d.key];if(!n)return;switch(d.type){case"date":le(n,"array")?d.value=n.map(M=>new Date(M)):d.value=new Date(n);break;default:d.value=n;break}}})}const{onDragStart:D,onDragMove:m,onDropEnd:R}=De({list:()=>v.config.fields,key:"id",findLevel:10});ge(()=>W.config,function(O){O&&(v.config=re(O))},{immediate:!0}),ge(()=>v.config.fields,function(O){const d={},n={},M=["input","input-between","textarea"];O&&O.forEach(A=>{d[A.key]=A.value,A.required&&(n[A.key]=[{required:!0,validator(y,h,$){const r=[void 0,null,""];if(A.type==="input-between"&&!A.value[0]&&!A.value[1]){$(new Error("请输入两个范围字段"));return}if(A.valueType==="array"&&!A.value.length){$(new Error(A.placeholder||"请选择"));return}if(A.valueType!=="boolean"&&r.includes(A.value)){const t=M.includes(A.type)?"请输入内容":"请选择";$(new Error(A.placeholder||t));return}$()},trigger:M.includes(A.type)?"blur":"change"}])}),v.form=d,v.rules=n,setTimeout(a)},{immediate:!0});const U=X(()=>{const O={};return v.config.fields.forEach(d=>{O[d.key]=Xe(d).value}),O}),G=X(()=>v.config.fields.filter(O=>{const d=O.show;if(!d)return!0;if(le(d,"function"))return d(U.value);if(d.includes("return"))try{return new Function("formData",d)(U.value)}catch(n){console.warn("解析表单展示逻辑代码错误 >>",n)}return!0}));return c({clear:a,validate:B,reset:F,setFormData:K}),(O,d)=>{const n=b("el-button"),M=b("el-form-item"),A=b("el-empty"),y=b("el-form");return i(),E(y,{ref_key:"formRef",ref:u,model:v.form,rules:v.rules,labelWidth:V(ke)(v.config.labelWidth),labelPosition:v.config.labelPosition,disabled:W.disabled,style:$e(W.editMode?{width:V(ke)(v.config.width)}:null),class:se([{"is-edit-form":W.editMode}])},{default:o(()=>[W.editMode?(i(),C(Y,{key:0},[e(Ve,{name:"the-group",tag:"div"},{default:o(()=>[(i(!0),C(Y,null,ee(v.config.fields,(h,$)=>(i(),E(M,{class:se([{"the-curd-selected":V(J).editor.index===$&&N.value}]),prop:h.key,key:h.id,"data-key":h.id,draggable:v.config.fields.length>1&&!V(J).editor.show?!0:null,onDragstart:r=>V(D)($),onDragover:r=>V(m)(r,$),onDrop:V(R)},{label:o(()=>[v.config.fields.length>1&&!V(J).editor.show?(i(),C("i",jt)):S("",!0),k("span",null,ne(h.label),1)]),default:o(()=>[k("div",Jt,[e(xe,{class:"mgr-10",fieldData:h,editMode:""},null,8,["fieldData"]),e(n,{link:"",type:"success",disabled:N.value,onClick:r=>P($)},{default:o(()=>[It]),_:2},1032,["disabled","onClick"]),e(n,{link:"",type:"danger",disabled:N.value,onClick:r=>Q($)},{default:o(()=>[Pt]),_:2},1032,["disabled","onClick"])])]),_:2},1032,["class","prop","data-key","draggable","onDragstart","onDragover","onDrop"]))),128))]),_:1}),v.config.fields.length?S("",!0):(i(),E(A,{key:0,description:`当前没有表单项，当没有表单项时【${j.value}】功能按钮不会出现~`},{default:o(()=>[N.value?S("",!0):(i(),E(n,{key:0,type:"primary",onClick:d[0]||(d[0]=h=>P(-1))},{default:o(()=>[Rt,q(" 添加表单项 ")]),_:1}))]),_:1},8,["description"])),N.value?S("",!0):(i(),C(Y,{key:1},[v.config.fields.length?(i(),E(M,{key:"bottom-add"},{default:o(()=>[e(n,{type:"primary",onClick:d[1]||(d[1]=h=>P(-1))},{default:o(()=>[Ht,q(" 继续添加 ")]),_:1})]),_:1})):S("",!0),k("div",zt,[e(n,{link:"",onClick:d[2]||(d[2]=h=>_())},{default:o(()=>[q(" 退出编辑 ")]),_:1}),e(n,{type:"danger",link:"",disabled:!v.config.fields.length,onClick:d[3]||(d[3]=h=>I())},{default:o(()=>[Kt,q(" 清空表单 ")]),_:1},8,["disabled"]),e(n,{type:"success",link:"",onClick:d[4]||(d[4]=h=>L())},{default:o(()=>[Gt,q(" 保存表单 ")]),_:1})])],64))],64)):S("",!0),!W.editMode&&v.config&&v.config.fields?(i(!0),C(Y,{key:1},ee(G.value,h=>(i(),E(M,{label:h.label,prop:h.key,key:h.id},{default:o(()=>[e(xe,{fieldData:h},null,8,["fieldData"])]),_:2},1032,["label","prop"]))),128)):S("",!0)]),_:1},8,["model","rules","labelWidth","labelPosition","disabled","style","class"])}}}),Xt={key:1,class:"f-vertical w-full"},Qt=k("i",{class:"el-icon--right el-icon-question the-tips-icon"},null,-1),el={key:1,class:"f1 f-right"},tl={name:"TableHeader"},nt=ue({...tl,props:{column:{type:Object,required:!0}},emits:["sort"],setup(s,{emit:c}){const l=s,W=c,p=X(()=>!l.column.sort&&!l.column.iconTips),u={true:{index:0,icon:"el-icon-sort"},asc:{index:1,icon:"el-icon-sort-up"},desc:{index:2,icon:"el-icon-sort-down"}},f=[!0,"asc","desc"];function v(){const J=l.column.sort.toString();let j=u[J].index;j++,j>=f.length&&(j=0);const N=f[j];W("sort",l.column.prop,N)}return(J,j)=>{const N=b("el-tooltip"),P=b("el-button");return p.value?(i(),C(Y,{key:0},[q(ne(l.column.label),1)],64)):(i(),C("div",Xt,[k("span",null,ne(l.column.label),1),l.column.iconTips?(i(),E(N,{key:0,effect:"dark",content:l.column.iconTips,placement:"top"},{default:o(()=>[Qt]),_:1},8,["content"])):S("",!0),l.column.sort?(i(),C("div",el,[e(P,{link:"",onClick:v},{default:o(()=>[k("i",{class:se(["el-icon--right",u[l.column.sort.toString()].icon])},null,2)]),_:1})])):S("",!0)]))}}}),ll={name:"TableColumnConfig"},ol=ue({...ll,props:{show:{type:Boolean,required:!0},type:{type:String,required:!0},keys:{type:Array,required:!0},form:Object},emits:["update:show","submit"],setup(s,{emit:c}){const l=s,W=c,p=ie({show:!1,form:Oe("","")}),u=X(()=>({add:"新增",edit:"编辑",copy:"复制"})[l.type]+"表格列"),f=_e(),v={label:{required:!0,message:"请输入表格列标题",trigger:"blur"},prop:{required:!0,validator(I,_,L){_?l.keys.includes(p.form.prop)?L(new Error("已经存在相同的值！")):L():L(new Error("输入字段不能为空！"))},trigger:"blur"},jsCode:{required:!0,validator(I,_,L){_?_.includes("return")?L():L(new Error('代码片段必须带有返回字段 "return"')):L(new Error("代码片段不能为空！"))},trigger:"blur"}},J=[{label:"默认普通文本",value:"text"},{label:"图片预览组件",value:"image"},{label:"自定义 js 代码",value:"js"}],j=[{label:"不可排序",value:!1},{label:"可排序",value:!0},{label:"默认升序",value:"asc"},{label:"默认降序",value:"desc"}],N=`
<p>函数代码片段：</p>
<p>第一个参数${oe("cellValue")}是表格值;</p>
<p>第二个参数${oe("row")}是完整对象;</p>
<p>例如：${oe("return cellValue + row.id;")};</p>
<p>也可以是HTML：${oe("return `html 标签`")};</p>
`;function P(){W("update:show",!1)}function Q(){var I;(I=f.value)==null||I.validate(_=>{if(!_)return;const L=re(p.form);["width","minWidth","imageWidth","imageHeight"].forEach(a=>{L[a]&&(L[a]=Number(L[a]))}),L.cellType==="image"&&(L.slot=L.prop),(L.sort||L.iconTips)&&(L.slotHead=`header-${L.prop}`),W("submit",L),P()})}return ge(()=>l.show,function(I){p.show=I,I&&(l.type==="add"?p.form=Oe("",""):(p.form=re(l.form),l.type==="copy"&&(p.form.prop="")),setTimeout(()=>{var _;return(_=f.value)==null?void 0:_.clearValidate()}))},{immediate:!0}),(I,_)=>{const L=b("el-input"),B=b("el-form-item"),a=b("el-input-number"),F=b("el-option"),K=b("el-select"),D=b("el-switch"),m=b("el-form"),R=b("base-dialog");return i(),E(R,{modelValue:p.show,"onUpdate:modelValue":_[11]||(_[11]=U=>p.show=U),title:u.value,width:"580px",onClose:P},{footer:o(()=>[e(V(Se),{onClose:P,onSubmit:Q})]),default:o(()=>[e(m,{ref_key:"formRef",ref:f,model:p.form,rules:v,"label-position":"right","label-width":"130px"},{default:o(()=>[e(B,{label:"表格列标题",prop:"label"},{default:o(()=>[e(L,{modelValue:p.form.label,"onUpdate:modelValue":_[0]||(_[0]=U=>p.form.label=U),clearable:"",placeholder:v.label.message},null,8,["modelValue","placeholder"])]),_:1}),e(B,{label:"表格列键值",prop:"prop"},{default:o(()=>[e(L,{modelValue:p.form.prop,"onUpdate:modelValue":_[1]||(_[1]=U=>p.form.prop=U),clearable:"",placeholder:"请输入表格列键值"},null,8,["modelValue"])]),_:1}),e(B,{label:"表格列宽度",prop:"width"},{default:o(()=>[e(a,{modelValue:p.form.width,"onUpdate:modelValue":_[2]||(_[2]=U=>p.form.width=U),class:"w-full","controls-position":"right",placeholder:"请输入表格列宽度，例如：120（默认自适应）"},null,8,["modelValue"])]),_:1}),e(B,{label:"表格列最小宽度",prop:"minWidth"},{default:o(()=>[e(a,{modelValue:p.form.minWidth,"onUpdate:modelValue":_[3]||(_[3]=U=>p.form.minWidth=U),class:"w-full","controls-position":"right",placeholder:"请输入表格列最小宽度，例如：120（默认自适应）"},null,8,["modelValue"])]),_:1}),e(B,{label:"表格列展示类型",prop:"cellType"},{default:o(()=>[e(K,{modelValue:p.form.cellType,"onUpdate:modelValue":_[4]||(_[4]=U=>p.form.cellType=U)},{default:o(()=>[(i(),C(Y,null,ee(J,U=>e(F,{key:U.value,value:U.value,label:U.label},null,8,["value","label"])),64))]),_:1},8,["modelValue"])]),_:1}),p.form.cellType==="image"?(i(),C(Y,{key:0},[e(B,{label:"图片宽度(像素)",prop:"imageWidth"},{default:o(()=>[e(a,{modelValue:p.form.imageWidth,"onUpdate:modelValue":_[5]||(_[5]=U=>p.form.imageWidth=U),class:"w-full","controls-position":"right",placeholder:"请输入数字（默认80px）"},null,8,["modelValue"])]),_:1}),e(B,{label:"图片高度(像素)",prop:"imageHeight"},{default:o(()=>[e(a,{modelValue:p.form.imageHeight,"onUpdate:modelValue":_[6]||(_[6]=U=>p.form.imageHeight=U),class:"w-full","controls-position":"right",placeholder:"请输入数字（默认80px）"},null,8,["modelValue"])]),_:1})],64)):S("",!0),p.form.cellType==="js"?(i(),E(B,{key:1,prop:"jsCode"},{label:o(()=>[e(V(he),{label:"js代码",tips:N})]),default:o(()=>[e(L,{modelValue:p.form.jsCode,"onUpdate:modelValue":_[7]||(_[7]=U=>p.form.jsCode=U),type:"textarea",placeholder:"请输入代码片段"},null,8,["modelValue"])]),_:1})):S("",!0),e(B,{label:"表格列排序操作",prop:"sort"},{default:o(()=>[e(K,{modelValue:p.form.sort,"onUpdate:modelValue":_[8]||(_[8]=U=>p.form.sort=U)},{default:o(()=>[(i(),C(Y,null,ee(j,U=>e(F,{key:U.value.toString(),value:U.value,label:U.label},null,8,["value","label"])),64))]),_:1},8,["modelValue"])]),_:1}),e(B,{label:"内容溢出截断",prop:"tooltip"},{default:o(()=>[e(D,{modelValue:p.form.tooltip,"onUpdate:modelValue":_[9]||(_[9]=U=>p.form.tooltip=U),"inline-prompt":"","active-text":"是","inactive-text":"否"},null,8,["modelValue"])]),_:1}),e(B,{label:"表头图标提示文字",prop:"iconTips"},{default:o(()=>[e(L,{modelValue:p.form.iconTips,"onUpdate:modelValue":_[10]||(_[10]=U=>p.form.iconTips=U),clearable:"",placeholder:"请输入表头图标提示文字"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"])}}}),nl=k("p",{class:"mgb-10"},"表格数据中的字段，例如表格数：",-1),al=k("p",{class:"mgb-10"},"则键值可以为 id",-1),il=k("p",null,[k("i",{class:"el-icon-info el-icon--left"}),q(" 不填则没有删除功能 ")],-1),rl={name:"TableDeleteConfig"},sl=ue({...rl,props:{show:{type:Boolean,default:!1},selectKey:{type:String,default:""}},emits:["update:show","submit"],setup(s,{emit:c}){const l=s,W=c,p='[{ id: 1, name: "名称", status: 2 }]',u=ie({show:!1,keyword:""});function f(){W("update:show",!1)}function v(){f(),W("submit",u.keyword)}return ge(()=>l.show,function(J){u.show=J,J&&(u.keyword=l.selectKey||"")},{immediate:!0}),(J,j)=>{const N=b("el-input"),P=b("el-form-item"),Q=b("el-form"),I=b("base-dialog");return i(),E(I,{modelValue:u.show,"onUpdate:modelValue":j[1]||(j[1]=_=>u.show=_),title:"配置表格删除功能",width:"400px",onClose:f},{footer:o(()=>[e(V(Se),{onClose:f,onSubmit:v})]),default:o(()=>[e(Q,{labelPosition:"right",labelWidth:"120px"},{default:o(()=>[e(P,{label:"数据键值"},{default:o(()=>[e(N,{class:"mgb-10",modelValue:u.keyword,"onUpdate:modelValue":j[0]||(j[0]=_=>u.keyword=_),placeholder:"请输入数据键值",clearable:""},null,8,["modelValue"]),k("div",{class:"the-tag blue"},[nl,k("p",{class:"mgb-10"},ne(p)),al,il])]),_:1})]),_:1})]),_:1},8,["modelValue"])}}}),ul={class:"flex"},dl={class:"f1"},cl={class:"f-vertical w-full"},pl={class:"f-right w-full"},fl=k("i",{class:"el-icon--left el-icon-finished"},null,-1),ml=k("i",{class:"el-icon--left el-icon-plus"},null,-1),vl=["data-key","draggable","onDragstart","onDragover"],yl={key:0,class:"el-icon--left el-icon-rank"},hl=k("div",{class:"f1"},null,-1),gl=k("i",{class:"el-icon-delete"},null,-1),bl=k("i",{class:"el-icon-edit"},null,-1),_l={key:1,class:"w-full f-right"},kl=k("i",{class:"el-icon--left el-icon-plus"},null,-1),wl={name:"TableActionConfig"},xl=ue({...wl,props:{show:{type:Boolean,default:!1},list:{type:Array,required:!0},columnWidth:{type:Number},actionMax:{type:Number}},emits:["update:show","submit"],setup(s,{emit:c}){const l=s,W=c,p=_e(),u=_e(),f=ie({show:!1,list:[],index:-1,hasEdit:!1,formEdit:!1}),v=ie({btn:Te(),column:{width:160,max:3}}),J={width:{required:!0,message:"请输入表格列宽度，例如：160",trigger:"blur"},max:{required:!1,message:"请输入数量，超出用“更多”下拉展示",trigger:"blur"}},j={text:{required:!0,message:"请输入按钮文字",trigger:"blur"},click:{required:!0,message:"请输入按钮操作代码",trigger:"blur"},icon:{required:!1,message:"请输入图标 class",trigger:"blur"},type:{required:!1,message:"请选择按钮类型",trigger:"change"}};function N(){W("update:show",!1)}function P(){u.value.validate(d=>{if(!d)return;N();const{width:n,max:M}=v.column;W("submit",re(f.list),n,M)})}function Q(d){p.value.validate(n=>{if(!n)return;const M=re(v.btn);d==="add"?f.list.push(M):f.list[f.index]=v.btn,I()})}function I(){f.index=-1,v.btn=Te(),f.formEdit=!1,setTimeout(()=>{var d;return(d=p.value)==null?void 0:d.clearValidate()})}function _(d){const n=f.list[d];v.btn=JSON.parse(JSON.stringify(n)),f.index=d,f.formEdit=!0}function L(d){f.list.splice(d,1)}ge(()=>l.show,function(d){f.show=d,d&&(f.list=re(l.list),f.hasEdit=f.list.some(n=>n.key===me),f.index=-1,v.btn=Te(),v.column={width:l.columnWidth,max:l.actionMax},setTimeout(()=>{var n,M;(n=p.value)==null||n.clearValidate(),(M=u.value)==null||M.clearValidate()}))},{immediate:!0});const B=[{label:"默认（蓝色）",value:"primary"},{label:"成功（绿色）",value:"success"},{label:"警告（橙色）",value:"warning"},{label:"危险（红色）",value:"danger"},{label:"文本（灰色）",value:"info"}],a="https://element.eleme.cn/#/zh-CN/component/icon",{onDragStart:F,onDragMove:K,onDropEnd:D}=De({list:()=>f.list,key:"key"});function m(d){if(d.key!=me&&f.list.length>1&&f.index===-1)return!0}function R(d){const n=d.text;if(le(n,"string")){if(!n.includes("return"))return n;let M="文字配置有误";try{M=new Function("row",n)({})}catch(A){console.warn("解析按钮文字代码错误 >>",A)}return M}return le(n,"function")?n({}):"未设置按钮"}const U=`
<p>可以输入代码片段，</p>
<p>以${oe("return")}关键字为函数标记，</p>
<p>函数第一个参数${oe("row")}是表格对象值</p>
<p>例如：${oe('return row.status === 1 ? "下架" : "上架";')}</p>
`,G=`
<p>函数代码片段，点击的时候运行</p>
<p>函数第一个参数${oe("row")}是表格对象值</p>
<p>第二个参数${oe("index")}是当前索引</p>
<p>例如：${oe("console.log(row, index);")}</p>
`,O=`
<p>可以输入代码片段，</p>
<p>以${oe("return")}关键字为函数标记，</p>
<p>函数第一个参数${oe("row")}是表格对象值</p>
<p>例如：${oe("return row.status === 1;")}返回布尔值进行判断</p>
`;return(d,n)=>{const M=b("el-text"),A=b("el-divider"),y=b("el-input-number"),h=b("el-form-item"),$=b("el-form"),r=b("el-input"),t=b("el-option"),T=b("el-select"),g=b("el-button"),Z=b("el-popconfirm"),H=b("el-empty"),z=b("base-dialog");return i(),E(z,{modelValue:f.show,"onUpdate:modelValue":n[13]||(n[13]=w=>f.show=w),title:"配置操作列按钮功能",width:"880px",onClose:N},{footer:o(()=>[e(V(Se),{disabledSubmit:f.formEdit,onClose:N,onSubmit:P},null,8,["disabledSubmit"])]),default:o(()=>[k("div",ul,[k("section",dl,[e(A,{"content-position":"left","border-style":"dashed"},{default:o(()=>[e(M,{type:"info"},{default:o(()=>[q("操作列配置")]),_:1})]),_:1}),e($,{ref_key:"formColumn",ref:u,model:v.column,rules:J,labelPosition:"right",labelWidth:"128px"},{default:o(()=>[e(h,{label:"操作列宽度",prop:"width"},{default:o(()=>[e(y,{modelValue:v.column.width,"onUpdate:modelValue":n[0]||(n[0]=w=>v.column.width=w),class:"w-full","controls-position":"right",placeholder:J.width.message},null,8,["modelValue","placeholder"])]),_:1}),e(h,{label:"操作按钮限制",prop:"max"},{default:o(()=>[e(y,{modelValue:v.column.max,"onUpdate:modelValue":n[1]||(n[1]=w=>v.column.max=w),class:"w-full","controls-position":"right",min:2,placeholder:J.max.message},null,8,["modelValue","placeholder"])]),_:1})]),_:1},8,["model"]),e(A,{"content-position":"left","border-style":"dashed"},{default:o(()=>[e(M,{type:"info"},{default:o(()=>[q("操作按钮配置")]),_:1})]),_:1}),e($,{ref_key:"formBtn",ref:p,model:v.btn,rules:j,labelPosition:"right",labelWidth:"128px",class:se({"the-filter-mask":!f.formEdit}),"data-tips":"待新增或编辑操作"},{default:o(()=>[e(h,{prop:"text"},{label:o(()=>[e(V(he),{label:"按钮文字",tips:U})]),default:o(()=>[e(r,{modelValue:v.btn.text,"onUpdate:modelValue":n[2]||(n[2]=w=>v.btn.text=w),type:"textarea",placeholder:j.text.message},null,8,["modelValue","placeholder"])]),_:1}),e(h,{prop:"click"},{label:o(()=>[e(V(he),{label:"按钮功能代码",tips:G})]),default:o(()=>[e(r,{modelValue:v.btn.click,"onUpdate:modelValue":n[3]||(n[3]=w=>v.btn.click=w),type:"textarea",placeholder:"请输入代码片段"},null,8,["modelValue"])]),_:1}),e(h,{prop:"show"},{label:o(()=>[e(V(he),{label:"按钮显示条件",tips:O})]),default:o(()=>[e(r,{modelValue:v.btn.show,"onUpdate:modelValue":n[4]||(n[4]=w=>v.btn.show=w),type:"textarea",placeholder:"请输入条件代码，为空则默认显示"},null,8,["modelValue"])]),_:1}),e(h,{prop:"disabled"},{label:o(()=>[e(V(he),{label:"按钮禁用条件",tips:O})]),default:o(()=>[e(r,{modelValue:v.btn.disabled,"onUpdate:modelValue":n[5]||(n[5]=w=>v.btn.disabled=w),type:"textarea",placeholder:"请输入条件代码，为空则默认不禁用"},null,8,["modelValue"])]),_:1}),e(h,{label:"按钮图标",prop:"icon"},{default:o(()=>[k("div",cl,[e(r,{modelValue:v.btn.icon,"onUpdate:modelValue":n[6]||(n[6]=w=>v.btn.icon=w),placeholder:j.icon.message,clearable:""},null,8,["modelValue","placeholder"]),e(M,{type:"primary",style:{width:"110px","text-align":"right"}},{default:o(()=>[k("a",{href:a,target:"_blank"},"去官网复制")]),_:1})])]),_:1}),e(h,{label:"按钮类型",prop:"type"},{default:o(()=>[e(T,{modelValue:v.btn.type,"onUpdate:modelValue":n[7]||(n[7]=w=>v.btn.type=w),placeholder:j.type.message},{default:o(()=>[(i(),C(Y,null,ee(B,w=>e(t,{key:w.value,value:w.value,label:w.label},null,8,["value","label"])),64))]),_:1},8,["modelValue","placeholder"])]),_:1}),e(h,null,{default:o(()=>[k("div",pl,[e(g,{onClick:n[8]||(n[8]=w=>I())},{default:o(()=>[q("取 消")]),_:1}),f.index>-1?(i(),E(g,{key:0,type:"primary",plain:"",onClick:n[9]||(n[9]=w=>Q("edit"))},{default:o(()=>[fl,q(" 确认修改 ")]),_:1})):(i(),E(g,{key:1,type:"primary",plain:"",onClick:n[10]||(n[10]=w=>Q("add"))},{default:o(()=>[ml,q(" 确认新增 ")]),_:1}))])]),_:1})]),_:1},8,["model","class"])]),e(Ve,{name:"the-group",tag:"div",class:"the-curd-option-list f1"},{default:o(()=>[(i(!0),C(Y,null,ee(f.list,(w,ae)=>(i(),C("div",{class:se(["the-curd-option-item f-vertical",{"the-curd-selected":ae===f.index}]),key:w.key,"data-key":w.key!==V(me)?w.key:null,draggable:m(w),onDragstart:te=>V(F)(ae),onDragover:te=>V(K)(te,ae),onDrop:n[11]||(n[11]=(...te)=>V(D)&&V(D)(...te))},[f.index===-1&&w.key!==V(me)?(i(),C("i",yl)):S("",!0),e(g,{type:w.type,link:""},{default:o(()=>[w.icon?(i(),C("i",{key:0,class:se(["el-icon--left",w.icon])},null,2)):S("",!0),q(" "+ne(R(w)),1)]),_:2},1032,["type"]),hl,w.key===V(me)?(i(),E(M,{key:1,type:"info",size:"small"},{default:o(()=>[q("编辑按钮不可删除、拖拽等操作，且处于首位")]),_:1})):(i(),C(Y,{key:2},[e(Z,{width:"186px",title:"是否删除该按钮功能？",onConfirm:te=>L(ae)},{reference:o(()=>[e(g,{link:"",type:"danger",disabled:f.index>-1},{default:o(()=>[gl]),_:1},8,["disabled"])]),_:2},1032,["onConfirm"]),e(g,{link:"",type:"success",onClick:te=>_(ae)},{default:o(()=>[bl]),_:2},1032,["onClick"])],64))],42,vl))),128)),f.list.length?S("",!0):(i(),E(H,{key:"empty","image-size":120,description:"请添加操作列功能按钮"})),f.formEdit?S("",!0):(i(),C("div",_l,[f.formEdit?S("",!0):(i(),E(g,{key:0,type:"primary",plain:"",onClick:n[12]||(n[12]=w=>f.formEdit=!0)},{default:o(()=>[kl,q(" 新增功能按钮 ")]),_:1}))]))]),_:1})])]),_:1},8,["modelValue"])}}}),Vl={class:"the-curd-table-model the-curd-scrollbar"},Dl=["data-key","draggable","onDragstart","onDragover"],$l=["data-head"],Sl=k("i",{class:"el-icon-rank el-icon--left"},null,-1),Cl={class:"fake-table-cell operation f-vertical"},Tl=k("i",{class:"el-icon-arrow-down el-icon--right"},null,-1),El={class:"fake-table-cell f-vertical"},Ml={key:1,class:"the-tag blue"},Ul=k("div",{class:"fake-table-head fvc"},"操作",-1),Ol={class:"fake-table-cell operation fvc"},Nl=k("i",{class:"el-icon-setting"},null,-1),Wl=k("i",{class:"el-icon-delete"},null,-1),Bl={class:"fake-table-cell"},ql={class:"f-vertical",key:"right-setting"},Ll=k("i",{class:"el-icon-plus el-icon--left"},null,-1),Al={key:0},Fl=k("i",{class:"el-icon-plus el-icon--left"},null,-1),Yl={key:1},jl={key:0,class:"the-tag blue mgl-10"},Jl=k("i",{class:"el-icon--left el-icon-info"},null,-1),Il={name:"TableModel"},Pl=ue({...Il,props:{config:{type:Object,required:!0}},emits:["action"],setup(s,{emit:c}){const l=s,W=c,p="https://fuss10.elemecdn.com/e/5d/4a731a90594a4af544c0c25941171jpeg.jpeg",u=[{key:"edit",label:"编辑列",icon:"el-icon-edit",click(y){J("edit",y)}},{key:"copy",label:"复制列",icon:"el-icon-document-copy",click(y){J("copy",y)}},{key:"delete",label:"删除列",icon:"el-icon-delete",click(y){N(y)}}],f=ie({show:!1,type:"add",index:-1,form:void 0,keys:[]}),v=X(()=>{const y=l.config.columns,h=[],$=[];for(let r=0;r<y.length;r++){const t=y[r];t.prop===fe?$.push(t):h.push(t)}return{drag:h,action:$}});function J(y,h){f.keys=l.config.columns.map(r=>r.prop),{add(){f.form=void 0},edit(){const r=l.config.columns[h];f.keys=f.keys.filter(t=>t!==r.prop),f.index=h,f.form=r},copy(){const r=l.config.columns[h];f.form=r}}[y](),f.type=y,f.show=!0}function j(y){const h=l.config;if(["add","copy"].includes(f.type)){const $=re(v.value.drag);$.push(y),h.columns=$.concat(v.value.action)}else h.columns[f.index]=y}function N(y){const h=v.value.drag[y];ye({title:"操作提示",content:`是否删除【${h.label}】列？`,cancelText:"取消",confirm(){const $=l.config.columns.findIndex(r=>r.prop===h.prop);l.config.columns.splice($,1)}})}const{onDragStart:P,onDragMove:Q,onDropEnd:I}=De({list:()=>l.config.columns,key:"prop",findLevel:5});function _(y){const h={};return y&&y.width&&(h.width=`${y.width}px`),y&&y.minWidth&&(h.minWidth=`${y.minWidth}px`),h}const L=X(()=>{const y=l.config.columns;if(y.length>0&&y[y.length-1].prop===fe)return y[y.length-1]});function B(){const y=Oe(fe,"操作");y.minWidth=120,y.width=160,l.config.columns.push(y)}function a(){const y=l.config.columns;ye({title:"操作提示",content:"是否删除操作列？删除之后需要重新配置。",cancelText:"取消",confirm(){y.splice(y.length-1,1),l.config.actions=[],l.config.formEdit&&(l.config.formEdit=void 0)}})}const F=ie({show:!1,keyword:""});function K(){const y=l.config.selectKey;F.keyword=y?y.toString():"",F.show=!0}function D(y){l.config.selectKey=y}const m=ie({show:!1,columnWidth:0,actionMax:0});function R(){m.show=!0,m.columnWidth=L.value.width,m.actionMax=l.config.actionMax}function U(y,h){l.config.actions=y;const $=l.config.columns.find(r=>r.prop===fe);$.width=h}const G=ie({show:!1,form:null,type:"add"});function O(y){G.type=y,y==="add"&&l.config.formAdd&&(G.form=l.config.formAdd),y==="edit"&&l.config.formEdit&&(G.form=l.config.formEdit),G.show=!0}function d(y,h){const $=l.config,r=$.actions;function t(){const T=r.length>0&&r[0].key===me;y&&y.fields.length>0?(L.value||B(),T||r.unshift({key:me,text:"编辑",type:"success",icon:"el-icon-edit"})):T&&r.splice(0,1)}y&&(G.type==="add"?($.formAdd=y,h&&($.formEdit=re(y),t())):($.formEdit=y,h&&($.formAdd=re(y)),t())),G.show=!1,G.form=null}function n(y){switch(y){case"delete":K();break;case"add":O("add");break;case"edit":O("edit");break}}const M=X(()=>v.value.drag.some(y=>!y.width&&!y.minWidth));function A(y){if(y==="complete"&&M.value){const h=Array.from(document.querySelectorAll(".fake-table-head")),$={};h.forEach(r=>{const t=r.dataset.head||"";t&&($[t]=Math.round(r.clientWidth))}),l.config.columns.forEach(r=>{Object.prototype.hasOwnProperty.call($,r.prop)&&(r.minWidth=$[r.prop])})}W("action",y)}return(y,h)=>{const $=b("el-empty"),r=b("el-button"),t=b("el-dropdown-item"),T=b("el-dropdown-menu"),g=b("el-dropdown"),Z=b("el-tooltip"),H=b("base-table-actions"),z=b("el-text");return i(),C(Y,null,[G.show?S("",!0):(i(),E(lt,{key:0,editMode:!0,config:l.config,onAction:n},null,8,["config"])),k("div",Vl,[G.show?(i(),E(ot,{key:0,config:G.form,type:G.type,editMode:!0,onChange:d},null,8,["config","type"])):(i(),E(Ve,{key:1,name:"the-group",tag:"div",class:"fake-table"},{default:o(()=>[l.config.columns.length?S("",!0):(i(),E($,{key:"empty",style:{padding:"10px 40px"},"image-size":120,description:"请添加表格列"})),(i(!0),C(Y,null,ee(v.value.drag,(w,ae)=>(i(),C("div",{key:w.prop,"data-key":w.prop,class:"fake-table-item",draggable:v.value.drag.length>1,style:$e(_(w)),onDragstart:te=>V(P)(ae),onDragover:te=>V(Q)(te,ae),onDrop:h[0]||(h[0]=te=>V(I)())},[k("div",{class:"fake-table-head f-vertical","data-head":w.prop},[Sl,e(nt,{column:w},null,8,["column"])],8,$l),k("div",Cl,[e(g,{trigger:"click"},{dropdown:o(()=>[e(T,null,{default:o(()=>[(i(),C(Y,null,ee(u,te=>e(t,{key:te.key,onClick:Ce=>te.click(ae)},{default:o(()=>[k("i",{class:se(["el-icon--left",te.icon])},null,2),q(" "+ne(te.label),1)]),_:2},1032,["onClick"])),64))]),_:2},1024)]),default:o(()=>[e(r,{link:"",type:"primary"},{default:o(()=>[q(" 配置列 "),Tl]),_:1})]),_:2},1024)]),k("div",El,[w.cellType==="text"?(i(),C(Y,{key:0},[q("文本内容")],64)):w.cellType==="js"?(i(),C("span",Ml,"自定义代码")):S("",!0),e(V(tt),{column:w,src:p},null,8,["column"])])],44,Dl))),128)),L.value?(i(),C("div",{style:$e(_(L.value)),key:V(fe),class:"fake-table-item"},[Ul,k("div",Ol,[e(Z,{effect:"dark",content:"配置【操作按钮】和【操作列】的宽度",placement:"top"},{default:o(()=>[e(r,{circle:"",plain:"",type:"primary",size:"small",onClick:h[1]||(h[1]=w=>R())},{default:o(()=>[Nl]),_:1})]),_:1}),e(r,{circle:"",plain:"",type:"danger",size:"small",onClick:h[2]||(h[2]=w=>a())},{default:o(()=>[Wl]),_:1})]),k("div",Bl,[l.config.actions.length?(i(),E(H,{key:0,row:{},index:1,actions:l.config.actions},null,8,["actions"])):(i(),E(z,{key:1,type:"info"},{default:o(()=>[q("待添加操作~")]),_:1}))])],4)):S("",!0),k("div",ql,[k("div",null,[k("p",null,[e(r,{type:"primary",text:"",onClick:h[3]||(h[3]=w=>J("add"))},{default:o(()=>[Ll,q(" 添加内容列 ")]),_:1})]),L.value?S("",!0):(i(),C("p",Al,[e(r,{type:"primary",text:"",onClick:h[4]||(h[4]=w=>B())},{default:o(()=>[Fl,q(" 添加操作列 ")]),_:1})]))])])]),_:1}))]),G.show?S("",!0):(i(),C("div",Yl,[e(V(et),{type:G.type,onAction:A},null,8,["type"]),M.value?(i(),C("span",jl,[Jl,q(" 当前表格列配置中存在没配置【宽度/最小宽度】，保存时将自动设置最小宽度，提高表格美观性。 ")])):S("",!0)])),e(ol,{show:f.show,"onUpdate:show":h[5]||(h[5]=w=>f.show=w),type:f.type,keys:f.keys,form:f.form,onSubmit:j},null,8,["show","type","keys","form"]),e(sl,{show:F.show,"onUpdate:show":h[6]||(h[6]=w=>F.show=w),"select-key":F.keyword,onSubmit:D},null,8,["show","select-key"]),e(xl,{show:m.show,"onUpdate:show":h[7]||(h[7]=w=>m.show=w),columnWidth:m.columnWidth,actionMax:m.actionMax,list:l.config.actions,onSubmit:U},null,8,["show","columnWidth","actionMax","list"])],64)}}}),Rl={class:"the-curd-example"},Hl={name:"Example"},zl=ue({...Hl,props:{selected:{type:String},type:{type:String}},emits:["choose"],setup(s,{emit:c}){const l=s,W=c,p=[{...de("input"),placeholder:ce.input},{...de("select"),placeholder:ce.select},{...de("select-multiple"),placeholder:ce["select-multiple"]},{...de("cascader"),placeholder:ce.cascader},{...de("date"),placeholder:ce.date},{...de("checkbox"),options:[{label:"多选-A",value:1},{label:"多选-B",value:2}],defaultValue:[1]},{...de("radio"),options:[{label:"单选-A",value:"radio-1"},{label:"单选-B",value:"radio-2"}],defaultValue:"radio-1"},{...de("switch"),defaultValue:!0},{...de("textarea"),placeholder:ce.textarea},{...de("input-between"),placeholder:["范围区间操作","范围区间操作"]}],u=["radio","checkbox","textarea","switch"],f=X(()=>l.type==="search"?p.filter(v=>!u.includes(v.type)):p);return(v,J)=>(i(),C("div",Rl,[(i(!0),C(Y,null,ee(f.value,j=>(i(),E(xe,{key:j.type,"field-data":j,class:se(["the-curd-example-item fvc",{"the-curd-selected":l.selected===j.type}]),readonly:"",onClick:N=>W("choose",j.type)},null,8,["field-data","class","onClick"]))),128))]))}}),Kl={key:0,class:"the-curd-editor-content"},Gl=k("h2",{class:"the-title mgb-20"},"基础设置",-1),Zl={class:"f-vertical f-between mgb-20"},Xl=k("h2",{class:"the-title"},"第1步：点击选取组件",-1),Ql={class:"f-vertical mgb-20"},eo={class:"the-title"},to=k("div",{class:"f1"},null,-1),lo={key:0,class:"the-curd-target-box"},oo=k("i",{class:"el-icon-question the-tips-icon mgl-10"},null,-1),no=k("a",{href:"https://www.json.cn/",target:"_blank"}," JSON编辑工具 ",-1),ao=k("span",{class:"the-tag blue mgl-10"},"例如【英雄联盟-12】",-1),io={class:"f-right"},ro=k("i",{class:"el-icon--left el-icon-plus"},null,-1),so=k("i",{class:"el-icon--left el-icon-edit"},null,-1),uo={name:"Editor"},co=ue({...uo,props:{show:{type:Boolean,default:!1},config:{type:Object,required:!0}},emits:["update:show"],setup(s,{emit:c}){const l=s,W=c;function p(){W("update:show",!1)}const u=["checkbox","radio","switch"],f=["select","select-multiple","radio","checkbox","cascader"],v=["input","textarea","select","radio"],J=["input-between","select-multiple","checkbox","cascader"],j=["input","select","radio"],N=["daterange","datetimerange"],P=j.concat(J),Q=`<p>参考 src/utils/index.ts 中的${oe("formatDate")}函数</p>`,I=`
<p>动态表单项的条件显示逻辑函数；</p>
<p>返回${oe("false")}则不展示对应项；</p>
<p>函数有一个参数：${oe("formData")}为当前表单的数据值；</p>
<p>以${oe("return")}为函数代码片段标记；</p>
<p>例如：${oe("return formData.type !== 2")}</p>
`,_=We(),L=X(()=>_.editor.action==="add"),B=X(()=>{let r=[];return a.formData&&a.formData.type==="date"&&(r=qe[a.formData.dateType].map((T,g)=>({label:T.text,value:g}))),r.unshift({label:"将预览组件中的值设为默认",value:-1}),r}),a=ie({step:0,formData:void 0});function F(r){a.step=r}const K={label:{required:!0,message:"请输入功能标题",trigger:"blur"},key:{required:!0,trigger:"blur",validator(r,t,T){t?h.includes(t)?T(new Error("当前键值已经被占用！")):T():T(new Error("绑定的键值不能为空"))}},format:{required:!0,message:"格式化规则不能为空",trigger:"blur"},separator:{required:!0,message:"请输入串联符号",trigger:"blur"},defaultValue:{required:!0,trigger:"blur",validator(r,t,T){const g=G();g===!0?T():T(new Error(g)),T()}},options:{required:!0,trigger:"blur",validator(r,t,T){const g=O();g===!0?T():T(new Error(g))}}},D=_e(),m=ie({options:"",defaultValue:""});function R(r){r.type!=="date"&&(m.defaultValue=JSON.stringify({value:r.defaultValue})),f.includes(r.type)&&(m.options=JSON.stringify(r.options))}function U(r){var g;const t=_.editor,T=de(r,"",t.type==="search");a.formData=T,R(T),(g=D.value)==null||g.clearValidate(),F(1)}function G(){const r='输入的格式必须为 { "value": "input value" }',t=m.defaultValue;if(!t)return r;const T=a.formData.type,g=a.formData.valueType,Z=ce[T];try{const H=JSON.parse(t);if(!le(H,"object"))return r;if(T==="switch"&&!le(H.value,"boolean"))return`${Z}的绑定值应该为 boolean 类型`;if(J.includes(T)){if(!le(H.value,"array"))return`${Z}的绑定值应该为 array 类型`;if(g==="array<number>"&&H.value.some(z=>z!==""&&!le(z,"number")))return"数组中只能出现数字"}if(v.includes(T)&&!["string","number"].includes(Me(H.value)))return`${Z}的绑定值应该为 string/number 类型`;if(T==="date"){const z=a.formData;if(N.includes(z.dateType)){if(!le(H.value,"array"))return"范围日期绑定值应该为 array 类型"}else if(!le(H.value,"string"))return"日期类型绑定值应该为 string 类型"}if(j.includes(T)&&g==="number"&&H.value!==""&&!le(H.value,"number"))return`${Z}的绑定值应该为 number 类型`}catch(H){return console.warn("checkDefaultValue >>",H),r}return!0}function O(){const r=m.options;if(!r)return"选项数据不能为空！";try{const t=JSON.parse(r);if(!le(t,"array"))return"选项数据格式不正确，需要为数组类型！";const T=a.formData,g=T.optionSetting.value||"value",Z=[void 0,null];for(let H=0;H<t.length;H++){const z=t[H];if(!le(z,"object"))return"数组项必须为对象！";if(Z.includes(z[g]))return`数组项的值不能为${Z.join("/")}`;if(["array<number>","number"].includes(T.valueType)&&!le(z[g],"number")&&z[g]!=="")return"数组项的值必须为 number 类型"}return!0}catch(t){return console.warn("checkOptions >>",t),"不合法的JSON,注意使用双引号,结尾不能为逗号等"}}function d(){O()===!0&&(a.formData.options=JSON.parse(m.options))}function n(){if(G()===!0){const t=a.formData,T=JSON.parse(m.defaultValue).value;t.type!=="date"&&(t.defaultValue=T)}}function M(r){const t=Re.find(g=>g.value===r),T=a.formData;T.shortcutIndex="",N.includes(t.value)?(T.value=[],T.valueType="array"):(T.value="",T.valueType="string"),T.formatShow=t.formatShow,T.format=t.format}function A(r){return/^[+-]?(\d|([1-9]\d+))(\.\d+)?$/.test(r)}function y(){var r;(r=D.value)==null||r.validate(t=>{if(mt("#the-editor-form",t),!t)return;n(),f.includes(a.formData.type)&&d();const T=_.editor,g=JSON.parse(JSON.stringify(a.formData));if(f.includes(g.type)&&d(),g.valueType||(g.valueType=Me(g.defaultValue)),f.includes(g.type)&&["number","array<number>"].includes(g.valueType)){let H=g.optionSetting.value;H||(H="value",g.optionSetting.value=H);for(let z=0;z<g.options.length;z++){const w=g.options[z],ae=w[H];if([null,void 0].includes(ae))return pe.error("数据值字段与选项数据不匹配，请检查！");if(A(ae.toString()))w[H]=Number(ae);else{const te=w[g.optionSetting.label];return pe.error(`选项数据中【${te}】的值应该为数字！`)}}}g.type==="date"&&(g.shortcutIndex===-1&&(g.shortcutDate=g.value),g.value=g.valueType==="array"?[]:""),{search(H){H?l.config.search.list.push(g):l.config.search.list[T.index]=g},table(H){if(H){const z=JSON.parse(JSON.stringify(T.form.fields));z.push(g),T.form.fields=z}else{const z=JSON.parse(JSON.stringify(T.form.fields));z[T.index]=g,T.form.fields=z}}}[T.type](L.value),p()})}let h=[];function $(r){const t=_.editor;h=[],{search(){h=l.config.search.list.map(g=>g.key)},table(){h=t.form.fields.map(g=>g.key)}}[t.type](),r&&(h=h.filter(g=>g!==r))}return ge(()=>l.show,function(r){if(!r){a.formData=void 0;return}const t=_.editor;if(t.action==="add")a.step=0,a.formData=void 0,$();else{const T=t.index;({search(){a.formData=JSON.parse(JSON.stringify(l.config.search.list[T]))},table(){var Z;a.formData=JSON.parse(JSON.stringify((Z=t.form)==null?void 0:Z.fields[T]))}})[t.type](),R(a.formData),$(a.formData.key),a.step=1}}),(r,t)=>{const T=b("el-input-number"),g=b("el-form-item"),Z=b("el-switch"),H=b("el-form"),z=b("el-button"),w=b("el-input"),ae=b("el-text"),te=b("el-tooltip"),Ce=b("el-option"),Le=b("el-select");return i(),C("section",{class:se(["the-curd-editor the-curd-scrollbar",{"is-show":l.show}])},[e(rt,{name:"the-curd-editor-move"},{default:o(()=>{var Ae;return[l.show?(i(),C("div",Kl,[Gl,e(H,{"label-position":"right","label-width":"120px"},{default:o(()=>[V(_).editor.type==="search"?(i(),C(Y,{key:0},[e(g,{label:"整体标题宽度"},{default:o(()=>[e(T,{modelValue:l.config.search.labelWidth,"onUpdate:modelValue":t[0]||(t[0]=x=>l.config.search.labelWidth=x),class:"w-full","controls-position":"right",placeholder:"例如：120px"},null,8,["modelValue"])]),_:1}),e(g,{label:"标题靠右对齐"},{default:o(()=>[e(Z,{modelValue:l.config.search.labelRight,"onUpdate:modelValue":t[1]||(t[1]=x=>l.config.search.labelRight=x),"inline-prompt":"","active-text":"是","inactive-text":"否"},null,8,["modelValue"])]),_:1})],64)):S("",!0),V(_).editor.type==="table"&&V(_).editor.form?(i(),C(Y,{key:1},[e(g,{label:"表单宽度"},{default:o(()=>[e(T,{modelValue:V(_).editor.form.width,"onUpdate:modelValue":t[2]||(t[2]=x=>V(_).editor.form.width=x),class:"w-full","controls-position":"right",placeholder:"请输入宽度(px)",clearable:""},null,8,["modelValue"])]),_:1}),e(g,{label:"文字宽度"},{default:o(()=>[e(T,{modelValue:V(_).editor.form.labelWidth,"onUpdate:modelValue":t[3]||(t[3]=x=>V(_).editor.form.labelWidth=x),class:"w-full","controls-position":"right",placeholder:"请输入标题宽度(px)",clearable:""},null,8,["modelValue"])]),_:1}),e(g,{label:"文字靠右排版"},{default:o(()=>[e(Z,{modelValue:V(_).editor.form.labelPosition,"onUpdate:modelValue":t[4]||(t[4]=x=>V(_).editor.form.labelPosition=x),"inline-prompt":"","active-value":"right","inactive-value":"left","active-text":"是","inactive-text":"否"},null,8,["modelValue"])]),_:1})],64)):S("",!0)]),_:1}),a.step===0?(i(),C(Y,{key:0},[k("div",Zl,[Xl,e(z,{link:"",type:"primary",onClick:t[5]||(t[5]=x=>p())},{default:o(()=>[q("退出编辑")]),_:1})]),e(zl,{selected:(Ae=a.formData)==null?void 0:Ae.type,type:V(_).editor.type,onChoose:U},null,8,["selected","type"])],64)):S("",!0),a.step===1?(i(),C(Y,{key:1},[k("div",Ql,[k("h2",eo,"第2步：配置"+ne(V(ce)[a.formData.type]),1),to,e(z,{link:"",type:"success",onClick:t[6]||(t[6]=x=>F(0))},{default:o(()=>[q("上一步")]),_:1}),e(z,{link:"",type:"primary",onClick:t[7]||(t[7]=x=>p())},{default:o(()=>[q("退出编辑")]),_:1})]),a.formData?(i(),C("div",lo,[e(xe,{"field-data":a.formData,"edit-mode":""},null,8,["field-data"])])):S("",!0),a.formData?(i(),E(H,{key:1,id:"the-editor-form",ref_key:"formRef",ref:D,model:a.formData,rules:K,"label-position":"right","label-width":"128px"},{default:o(()=>[e(g,{label:"组件标题",prop:"label"},{default:o(()=>[e(w,{modelValue:a.formData.label,"onUpdate:modelValue":t[8]||(t[8]=x=>a.formData.label=x),clearable:"",placeholder:K.label.message},null,8,["modelValue","placeholder"])]),_:1}),e(g,{label:"绑定的键值",prop:"key"},{default:o(()=>[e(w,{modelValue:a.formData.key,"onUpdate:modelValue":t[9]||(t[9]=x=>a.formData.key=x),clearable:"",placeholder:"请输入绑定的键值"},null,8,["modelValue"])]),_:1}),e(g,{label:"标题宽度",prop:"labelWidth"},{default:o(()=>[e(T,{modelValue:a.formData.labelWidth,"onUpdate:modelValue":t[10]||(t[10]=x=>a.formData.labelWidth=x),class:"w-full","controls-position":"right",placeholder:"请输入宽度，例如：120"},null,8,["modelValue"])]),_:1}),u.includes(a.formData.type)?S("",!0):(i(),E(g,{key:0,label:"组件宽度",prop:"valueWidth"},{default:o(()=>[e(T,{modelValue:a.formData.valueWidth,"onUpdate:modelValue":t[11]||(t[11]=x=>a.formData.valueWidth=x),class:"w-full","controls-position":"right",placeholder:"请输入宽度，例如：140"},null,8,["modelValue"])]),_:1})),e(g,{label:"提示/规则文字",prop:"placeholder"},{default:o(()=>[a.formData.type==="input-between"?(i(),C(Y,{key:0},[e(w,{modelValue:a.formData.placeholder[0],"onUpdate:modelValue":t[12]||(t[12]=x=>a.formData.placeholder[0]=x),class:"f1",clearable:"",placeholder:"请输入提示-1"},null,8,["modelValue"]),e(ae,{style:{padding:"0 6px"}},{default:o(()=>[q("-")]),_:1}),e(w,{modelValue:a.formData.placeholder[1],"onUpdate:modelValue":t[13]||(t[13]=x=>a.formData.placeholder[1]=x),class:"f1",clearable:"",placeholder:"请输入提示-2"},null,8,["modelValue"])],64)):(i(),E(w,{key:1,modelValue:a.formData.placeholder,"onUpdate:modelValue":t[14]||(t[14]=x=>a.formData.placeholder=x),clearable:"",placeholder:"请输入规则提示/输入框提示文字"},null,8,["modelValue"]))]),_:1}),e(g,{label:"是否必填",prop:"required"},{default:o(()=>[e(Z,{modelValue:a.formData.required,"onUpdate:modelValue":t[15]||(t[15]=x=>a.formData.required=x),"inline-prompt":"","active-text":"是","inactive-text":"否"},null,8,["modelValue"])]),_:1}),V(P).includes(a.formData.type)?(i(),E(g,{label:"绑定值为数字类型",key:"is-number"},{default:o(()=>[J.includes(a.formData.type)?(i(),E(Z,{key:0,modelValue:a.formData.valueType,"onUpdate:modelValue":t[16]||(t[16]=x=>a.formData.valueType=x),"inline-prompt":"","active-text":"是","inactive-text":"否","active-value":"array<number>","inactive-value":"array"},null,8,["modelValue"])):(i(),E(Z,{key:1,modelValue:a.formData.valueType,"onUpdate:modelValue":t[17]||(t[17]=x=>a.formData.valueType=x),"inline-prompt":"","active-text":"是","inactive-text":"否","active-value":"number","inactive-value":"string"},null,8,["modelValue"])),f.includes(a.formData.type)?(i(),E(te,{key:2,effect:"dark",content:"设为数字类型之后，将会在保存时校验选项数据",placement:"top"},{default:o(()=>[oo]),_:1})):S("",!0)]),_:1})):S("",!0),a.formData.type!=="date"?(i(),E(g,{key:2,label:"组件默认值",prop:"defaultValue"},{default:o(()=>[e(w,{modelValue:m.defaultValue,"onUpdate:modelValue":t[18]||(t[18]=x=>m.defaultValue=x),type:"textarea",clearable:"",placeholder:"请输入JSON，值为 value",onBlur:t[19]||(t[19]=x=>n())},null,8,["modelValue"])]),_:1})):S("",!0),a.formData.type==="input-between"?(i(),E(g,{key:3,label:"串联符号",prop:"separator"},{default:o(()=>[e(w,{modelValue:a.formData.separator,"onUpdate:modelValue":t[20]||(t[20]=x=>a.formData.separator=x),clearable:"",placeholder:K.separator.message},null,8,["modelValue","placeholder"])]),_:1})):S("",!0),f.includes(a.formData.type)?(i(),C(Y,{key:4},[e(g,{label:"选项数据",prop:"options"},{default:o(()=>[e(w,{modelValue:m.options,"onUpdate:modelValue":t[21]||(t[21]=x=>m.options=x),type:"textarea",autosize:{minRows:2,maxRows:10},placeholder:"请输入数组JSON",style:{"margin-bottom":"4px"},onBlur:t[22]||(t[22]=x=>d())},null,8,["modelValue"]),e(z,{link:"",type:"primary"},{default:o(()=>[no]),_:1})]),_:1}),e(g,{label:"数据展示字段",prop:"optionSetting.label"},{default:o(()=>[e(w,{modelValue:a.formData.optionSetting.label,"onUpdate:modelValue":t[23]||(t[23]=x=>a.formData.optionSetting.label=x),clearable:"",placeholder:"不填则使用 label"},null,8,["modelValue"])]),_:1}),e(g,{label:"数据值字段",prop:"optionSetting.value"},{default:o(()=>[e(w,{modelValue:a.formData.optionSetting.value,"onUpdate:modelValue":t[24]||(t[24]=x=>a.formData.optionSetting.value=x),clearable:"",placeholder:"不填则使用 value"},null,8,["modelValue"])]),_:1}),a.formData.type==="cascader"?(i(),C(Y,{key:0},[e(g,{label:"下级字段",prop:"optionSetting.children"},{default:o(()=>[e(w,{modelValue:a.formData.optionSetting.children,"onUpdate:modelValue":t[25]||(t[25]=x=>a.formData.optionSetting.children=x),clearable:"",placeholder:"不填则使用 children"},null,8,["modelValue"])]),_:1}),e(g,{label:"是否多选",prop:"multiple"},{default:o(()=>[e(Z,{modelValue:a.formData.multiple,"onUpdate:modelValue":t[26]||(t[26]=x=>a.formData.multiple=x),"inline-prompt":"","active-text":"是","inactive-text":"否"},null,8,["modelValue"])]),_:1}),e(g,{label:"允许只选中某一项",prop:"checkStrictly"},{default:o(()=>[e(Z,{modelValue:a.formData.checkStrictly,"onUpdate:modelValue":t[27]||(t[27]=x=>a.formData.checkStrictly=x),"inline-prompt":"","active-text":"是","inactive-text":"否"},null,8,["modelValue"])]),_:1})],64)):S("",!0),["select","select-multiple"].includes(a.formData.type)?(i(),E(g,{key:1,label:"串联显示名称",prop:"joinShow"},{default:o(()=>[e(Z,{modelValue:a.formData.joinShow,"onUpdate:modelValue":t[28]||(t[28]=x=>a.formData.joinShow=x),"inline-prompt":"","active-text":"是","inactive-text":"否"},null,8,["modelValue"]),ao]),_:1})):S("",!0)],64)):S("",!0),a.formData.type==="date"?(i(),C(Y,{key:5},[e(g,{label:"日期类型",prop:"dateType"},{default:o(()=>[e(Le,{modelValue:a.formData.dateType,"onUpdate:modelValue":t[29]||(t[29]=x=>a.formData.dateType=x),class:"w-full",onChange:M},{default:o(()=>[(i(!0),C(Y,null,ee(V(Re),x=>(i(),E(Ce,{key:x.value,label:x.label,value:x.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(g,{label:"日期默认值",prop:"shortcutIndex"},{default:o(()=>[e(Le,{modelValue:a.formData.shortcutIndex,"onUpdate:modelValue":t[30]||(t[30]=x=>a.formData.shortcutIndex=x),class:"w-full",placeholder:"请选择",clearable:""},{default:o(()=>[(i(!0),C(Y,null,ee(B.value,x=>(i(),E(Ce,{key:x.value,label:x.label,value:x.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(g,{prop:"format"},{label:o(()=>[e(V(he),{label:"格式化规则",tips:Q})]),default:o(()=>[e(w,{modelValue:a.formData.format,"onUpdate:modelValue":t[31]||(t[31]=x=>a.formData.format=x),clearable:"",placeholder:K.format.message},null,8,["modelValue","placeholder"])]),_:1})],64)):S("",!0),V(_).editor.type==="table"?(i(),E(g,{key:6,prop:"show"},{label:o(()=>[e(V(he),{label:"表单显示逻辑",tips:I})]),default:o(()=>[e(w,{modelValue:a.formData.show,"onUpdate:modelValue":t[32]||(t[32]=x=>a.formData.show=x),type:"textarea",placeholder:"请输入条件代码，为空则默认展示"},null,8,["modelValue"])]),_:1})):S("",!0),k("div",io,[e(z,{onClick:t[33]||(t[33]=x=>p())},{default:o(()=>[q("关闭")]),_:1}),L.value?(i(),E(z,{key:0,type:"primary",onClick:t[34]||(t[34]=x=>y())},{default:o(()=>[ro,q(" 新增 ")]),_:1})):(i(),E(z,{key:1,type:"success",onClick:t[35]||(t[35]=x=>y())},{default:o(()=>[so,q(" 确认 ")]),_:1}))])]),_:1},8,["model"])):S("",!0)],64)):S("",!0)])):S("",!0)]}),_:1})],2)}}}),po={class:"the-curd-main-page"},fo={key:0,class:"the-tag blue"},mo=k("i",{class:"el-icon-arrow-left"},null,-1),vo=k("p",{class:"mgb-10"},"配置筛选相关功能",-1),yo=k("p",null,"配置表格相关功能",-1),ho={name:"Curd"},xo=ue({...ho,props:{data:{type:Object,required:!0},action:{type:Object,required:!0}},setup(s){const c=s,l=ie({loading:!1,editor:{show:!1,type:void 0,form:void 0,action:"add",index:-1},showEntrance:!1}),W=X(()=>{const d=l.editor.type;return d==="search"||!d&&c.data.search.list.length>0});st(Ge,l);let p;function u(d){l.editor.type=d,l.editor.show=!1,l.editor.index=-1,l.showEntrance=!1,p={[d]:re(c.data[d])}}function f(d){const n=l.editor.type;d&&p&&(c.data[n]=p[n]),l.editor.index=-1,l.editor.show=!1,l.editor.type=void 0,l.editor.form=void 0,p=void 0}function v(){f()}function J(){Je(JSON.stringify(c.data),()=>pe.success("复制成功！"))}function j(d){d&&c.data.search.list.forEach(Be),N.pageInfo.currentPage=1,N.selectList=[],U()}const N=ie({selectList:[],data:[],pageInfo:pt(),formShow:!1,formType:"add",formLoading:!1}),P=X(()=>c.data.table),Q=X(()=>P.value.columns.filter(n=>n.visible).map(n=>{const M={...n};return M.cellType==="js"&&M.jsCode&&(M.rawContent=function(A,y){let h="";try{h=new Function("cellValue","row",M.jsCode)(A,y)}catch($){console.warn("解析 rawContent 代码错误 >>",$),h="-"}return h}),M})),I=X(()=>P.value.actions.map(n=>{const M={...n};return M.key===me&&(M.click=K),M})),_=X(()=>{const d=[],n=[];return Q.value.forEach(M=>{M.slotHead&&d.push(M.slotHead),M.slot&&n.push(M.slot)}),{head:d,cell:n}});function L(d){return P.value.columns.find(M=>M.prop===d)||{}}const B=_e(),a=X(()=>{const d=P.value,n={title:"编辑表单",config:d.formEdit||{}};return N.formType==="add"&&(n.title="新增表单",n.config=d.formAdd||{}),n});let F=null;function K(d){d?(N.formType="edit",F=d):N.formType="add",N.formShow=!0,setTimeout(()=>{var n;return(n=B.value)==null?void 0:n.clear()}),ze(()=>{var n;return F&&((n=B.value)==null?void 0:n.setFormData(F))})}function D(){var d;N.formShow=!1,(d=B.value)==null||d.reset(),F=null}function m(){var d;(d=B.value)==null||d.validate(async(n,M)=>{if(N.formType==="add"&&c.action.onAdd){N.formLoading=!0;const A=await c.action.onAdd(n,M);if(N.formLoading=!1,A.code!==1)return;D(),U()}if(N.formType==="edit"&&c.action.onEdit){N.formLoading=!0;const A=await c.action.onEdit(n,M);if(N.formLoading=!1,A.code!==1)return;D(),U()}})}function R(d){const n=c.data.search.list,M={};for(let $=0;$<n.length;$++){const r=n[$],t=Xe(r);if(r.required&&le(t.result,"string"))return vt(document.querySelector(`.${r.id}`)),pe.error(t.result),d&&d.key==="page"&&(N.pageInfo=d.before),null;t.result===!0&&(M[r.key]=t.value)}const A=P.value.columns,y=[],h=[];return d&&d.key==="sort"?A.forEach($=>{$.sort&&($.prop===d.prop?$.sort=d.action:$.sort=!0),$.sort==="asc"&&y.push($.prop),$.sort==="desc"&&h.push($.prop)}):A.forEach($=>{$.sort==="asc"&&y.push($.prop),$.sort==="desc"&&h.push($.prop)}),y.length&&(M.asc=y.toString()),h.length&&(M.desc=h.toString()),M}async function U(d){const n=R(d);if(!n)return;const M=JSON.parse(JSON.stringify(N.pageInfo));l.loading=!0;const A=await c.action.getTableData(n,M);l.loading=!1,A.code===1&&(N.pageInfo.total=A.data.total,N.data=A.data.list||[])}function G(d){const n=N.selectList;switch(d){case"add":K();break;case"delete":if(!n.length)return pe.error("请选择要删除的列表再进行操作~");ye({title:"操作提示",content:`是否删除选中的 ${n.length} 条数据？`,cancelText:"取消",async confirm(){c.action.onDelete?(l.loading=!0,(await c.action.onDelete(JSON.parse(JSON.stringify(N.selectList)))).code===1?(pe.success("删除成功！"),N.selectList=[],U()):l.loading=!1):pe.info("请设置 action.onDelete 删除逻辑")}});break;case"export":c.action.onExport?c.action.onExport():pe.info("请设置 action.onExport 导出逻辑");break}}function O(d){({exit:()=>f(!0),copy:J,complete:v})[d]()}return ht({formatDate:Ue,copyText:Je,messageBox:ye,message:pe,jsonToPath:ft,request:yt,getData:U,state:l}),Ke(function(){c.action.created&&P.value.columns.length&&c.action.created(U)}),(d,n)=>{const M=b("base-table"),A=b("base-pagination"),y=b("el-button"),h=b("el-empty"),$=b("base-dialog");return i(),C("div",po,[k("section",{class:se([l.editor.show?"f1":"w-full"])},[W.value?(i(),E(St,{key:0,data:c.data.search,onSearch:j},null,8,["data"])):S("",!0),l.editor.type==="table"?(i(),E(Pl,{key:1,config:P.value,onAction:O},null,8,["config"])):l.editor.type==="search"?(i(),E(V(et),{key:2,onAction:O})):(i(),C(Y,{key:3},[P.value.columns.length>0?(i(),C(Y,{key:0},[e(lt,{config:P.value,disabled:l.loading,onAction:G},{left:o(()=>[P.value.selectKey?(i(),C("span",fo," 已选择 "+ne(N.selectList.length)+" 条数据 ",1)):S("",!0)]),_:1},8,["config","disabled"]),e(M,{"select-list":N.selectList,"onUpdate:selectList":n[1]||(n[1]=r=>N.selectList=r),data:N.data,columns:Q.value,actions:I.value,actionMax:P.value.actionMax,loading:l.loading,"select-key":P.value.selectKey},Ee({_:2},[ee(_.value.head,r=>({name:r,fn:o(({$index:t})=>[e(nt,{column:Q.value[P.value.selectKey?t-1:t],onSort:n[0]||(n[0]=(T,g)=>U({key:"sort",prop:T,action:g}))},null,8,["column"])])})),ee(_.value.cell,r=>({name:r,fn:o(({row:t})=>[e(V(tt),{column:L(r),src:t[r],previewList:_.value.cell.map(T=>t[T])},null,8,["column","src","previewList"])])}))]),1032,["select-list","data","columns","actions","actionMax","loading","select-key"]),e(A,{disabled:l.loading,pageInfo:N.pageInfo,onChange:n[2]||(n[2]=r=>U({key:"page",...r}))},null,8,["disabled","pageInfo"])],64)):(i(),E(h,{key:1,description:"当前页面没有表格配置数据，请配置后再操作~"},{default:o(()=>[e(y,{type:"primary",onClick:n[3]||(n[3]=r=>u("table"))},{default:o(()=>[q("去配置")]),_:1})]),_:1}))],64))],2),e(co,{show:l.editor.show,"onUpdate:show":n[4]||(n[4]=r=>l.editor.show=r),config:c.data},null,8,["show","config"]),e($,{modelValue:N.formShow,"onUpdate:modelValue":n[7]||(n[7]=r=>N.formShow=r),title:a.value.title,width:V(ke)(a.value.config.width),onClose:n[8]||(n[8]=r=>D())},{footer:o(()=>[e(V(Se),{loading:N.formLoading,onClose:n[5]||(n[5]=r=>D()),onSubmit:n[6]||(n[6]=r=>m())},null,8,["loading"])]),default:o(()=>[e(ot,{ref_key:"formRef",ref:B,config:a.value.config,type:N.formType,disabled:N.formLoading},null,8,["config","type","disabled"])]),_:1},8,["modelValue","title","width"]),!l.showEntrance&&!l.editor.type?(i(),E(y,{key:0,class:"the-curd-entrance",type:"primary",size:"small",onClick:n[9]||(n[9]=r=>l.showEntrance=!0)},{default:o(()=>[mo]),_:1})):S("",!0),e($,{modelValue:l.showEntrance,"onUpdate:modelValue":n[13]||(n[13]=r=>l.showEntrance=r),title:"请选择配置操作",width:"600px"},{footer:o(()=>[e(y,{onClick:n[12]||(n[12]=r=>l.showEntrance=!1)},{default:o(()=>[q("关 闭")]),_:1})]),default:o(()=>[k("div",{class:"the-curd-entrance-item",onClick:n[10]||(n[10]=r=>u("search"))},[vo,e(V(Tt))]),k("div",{class:"the-curd-entrance-item",onClick:n[11]||(n[11]=r=>u("table"))},[yo,e(V(Et))])]),_:1},8,["modelValue"])])}}});export{xo as _,Oe as a,me as b,fe as c,de as g};
