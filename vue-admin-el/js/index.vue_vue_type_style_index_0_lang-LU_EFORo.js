import{F as z}from"./index-Drdl1D8t.js";import{f as T,k as V}from"./index-BbG1w_TF.js";import{h as f,c as m,b as h,F as B,s as F,A as _,az as $,d as S,e as y,y as L,l as v,S as U,u as C,a2 as M,aA as Y,f as j,m as b,j as G,D as H,B as N,t as q,z as J,g as O}from"./element-plus-Bi-D7rwj.js";function K(a){return typeof a=="function"||Object.prototype.toString.call(a)==="[object Object]"&&!$(a)}function Q(a){return m(B,null,[a.label,m(h("el-tooltip"),{effect:"dark",content:a.tips,"raw-content":!0,placement:"top-start"},{default:()=>[m(h("el-button"),{type:"info",link:!0,style:"height: 32px;"},{default:()=>[m("i",{class:"el-icon-question"},null)]})]})])}const R=f({props:{attrs:{type:Object,required:!0}},emits:["change"],setup(a,{emit:w}){const p=F({get(){const l=a.attrs.modelValue;return V(l,"array")?l.map(i=>new Date(i)):l&&new Date(l)},set(l){const i=l;["daterange","datetimerange"].includes(a.attrs.type)&&i&&new Date(i[0]).getTime()===new Date(i[1]).getTime()&&(i[1]=new Date(T(i[1],"Y-M-D 23:59:59"))),w("change",i)}});return()=>m(h("el-date-picker"),_({"range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},a.attrs,{modelValue:p.value,"onUpdate:modelValue":l=>p.value=l}),null)}}),W=f({props:{attrs:{type:Object,required:!0},field:{type:Object,required:!0}},emits:["change"],setup(a,{emit:w}){const p=F({get(){return a.attrs.modelValue},set(r){w("change",r)}}),l=F(()=>{const r=a.field.optionSetting||{};return{value:r.value||"value",label:r.label||"label"}});function i(r){const n=l.value;return`${r[n.label]||r[n.value]}`}return()=>{let r;return a.field.options.length>36?m(h("el-select-v2"),_(a.attrs,{options:a.field.options,props:l.value,modelValue:p.value,"onUpdate:modelValue":n=>p.value=n}),{default:({item:n})=>m("span",{title:i(n)},[i(n)])}):m(h("el-select"),_(a.attrs,{modelValue:p.value,"onUpdate:modelValue":n=>p.value=n}),K(r=a.field.options.map(n=>m(h("el-option"),{key:n[l.value.value],label:i(n),value:n[l.value.value]},null)))?r:{default:()=>[r]})}}}),X={key:8,class:"tips-box"},Z={class:"the-tag blue"},ee=O("i",{class:"el-icon--left el-icon-info"},null,-1),te={name:"TheFields"},se=f({...te,props:{type:{type:String,default:"form"},data:{type:Object,required:!0},list:{type:Array,required:!0}},emits:["change"],setup(a,{emit:w}){const p=a,l=w,i=F(()=>p.list.filter(t=>V(t.show,"boolean")?t.show:V(t.show,"function")?t.show():!0));function r(t,o){const s=t.prop,u=p.data;if(s.includes(".")){const x=[null,void 0],g=s.split(".");let e=u;for(const d of g){if(x.includes(e[d]))return;e=e[d]}return e}return u[t.prop]}function n(t,o,s){const u=s||t.prop,x=p.data;if(u.includes(".")){const g=u.split(".");let e=x;for(let d=0;d<g.length-1;d++){const c=g[d];e[c]||(e[c]={}),e=e[c]}e[g[g.length-1]]=o}else x[u]=o}function k(t,o){const s=t.prop,u=o;t.type!=="date"&&n(t,u),t.onChange&&t.onChange(u),l("change",s,u)}function I(t){return t.class||(p.type==="form"?"w-full":"short-value")}function D(t){const o=V(t.disabled,"function")?t.disabled():t.disabled;return{placeholder:t.placeholder,disabled:o,class:I(t),clearable:t.type==="textarea"?void 0:!t.noClear,modelValue:r(t)}}function P(t){const o=t.type==="select-multiple",s=V(t.disabled,"function")?t.disabled():t.disabled,u=t.type==="select-multiple"?t.showAll:!1;return{placeholder:t.placeholder,disabled:s,multiple:o,clearable:!t.noClear,filterable:!0,collapseTags:!u,class:I(t),modelValue:r(t)}}function A(t){const o=["",null,void 0],s=p.data[t.prop];return(o.includes(s)?t.placeholder:s)||"-"}function E(t,o){const s=t.bind;n(t,o),["daterange","datetimerange"].includes(t.dateType)?o?(n(t,T(o[0],t.format),s[0]),n(t,T(o[1],t.format),s[1])):(n(t,void 0,s[0]),n(t,void 0,s[1])):n(t,o?T(o,t.format):void 0,s[0]),k(t,o)}return(t,o)=>{const s=h("el-input"),u=h("el-input-number"),x=h("el-switch"),g=h("el-text");return y(!0),S(B,null,L(i.value,(e,d)=>(y(),v(U(p.type==="form"?C(M):C(z)),{key:e.key||`${e.prop}-${d}`,label:e.label,prop:e.prop,class:"the-fields-item"},Y({default:j(()=>[e.type==="input"?(y(),v(s,_({key:0},D(e),{onInput:c=>k(e,c)}),null,16,["onInput"])):b("",!0),e.type==="textarea"?(y(),v(s,_({key:1},D(e),{rows:e.rows,"show-word-limit":"",type:"textarea",onInput:c=>k(e,c)}),null,16,["rows","onInput"])):b("",!0),e.type==="number"?(y(),v(u,_({key:2},D(e),{min:e.min,max:e.max,"controls-position":"right",onInput:c=>k(e,c)}),null,16,["min","max","onInput"])):b("",!0),e.type==="select"||e.type==="select-multiple"?(y(),v(C(W),{key:3,attrs:P(e),field:e,onChange:c=>k(e,c)},null,8,["attrs","field","onChange"])):b("",!0),e.type==="date"?(y(),v(C(R),{key:4,attrs:{type:e.dateType,format:e.formatShow,...D(e)},onChange:c=>E(e,c)},null,8,["attrs","onChange"])):b("",!0),e.type==="switch"?(y(),v(x,{key:5,"model-value":r(e),"inline-prompt":"","active-text":e.activeText||"是","inactive-text":e.inactiveText||"否","active-value":e.activeValue,"inactive-value":e.inactiveValue,onChange:c=>k(e,c)},null,8,["model-value","active-text","inactive-text","active-value","inactive-value","onChange"])):b("",!0),e.type==="text"?(y(),S("div",{key:6,class:H(["text-box",e.class||"w-full"])},[m(g,null,{default:j(()=>[N(q(A(e)),1)]),_:2},1024)],2)):b("",!0),e.type==="slot"&&e.slotName?G(t.$slots,e.slotName,J(_({key:7},e))):b("",!0),e.tips?(y(),S("div",X,[O("span",Z,[ee,N(" "+q(e.tips),1)])])):b("",!0)]),_:2},[e.tooltip?{name:"label",fn:j(()=>[m(C(Q),{label:e.label,tips:e.tooltip},null,8,["label","tips"])]),key:"0"}:void 0]),1032,["label","prop"]))),128)}}});export{se as _};
