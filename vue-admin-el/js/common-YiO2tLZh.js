import{s as w,M as l,N as m,a as T,j as h,k as s,r as k}from"./index-CQ1s9NXW.js";function j(e){const t=new XMLHttpRequest,o=e.method,a=e.timeout||0;let r=e.url,d="",i="";const g=l(e.data);if(o==="GET"){if(g==="object")for(const c in e.data)i+="&"+c+"="+e.data[c];else console.warn("ajax 传参处理 GET 传参有误，需要的请求参数应为 object 类型");i&&(i="?"+i.slice(1),r+=i)}else d=["object","array"].includes(g)?JSON.stringify(e.data):e.data;if(t.onreadystatechange=function(){t.readyState===4&&(t.status===200||t.status===304?e.success&&e.success(t.response,t):e.fail&&e.fail(t))},e.onProgress&&t.upload.addEventListener("progress",e.onProgress),t.responseType=e.responseType,t.open(o,r,!0),e.method!=="GET")switch(g){case"object":case"array":t.setRequestHeader("Content-Type","application/json");break;case"string":t.setRequestHeader("Content-Type","application/x-www-form-urlencoded");break}if(e.headers)for(const c in e.headers){const u=e.headers[c];u&&t.setRequestHeader(c,u)}a>0&&(t.timeout=a,t.ontimeout=function(){t.abort(),e.onTimeout&&e.onTimeout(t)}),t.send(d)}function p(e,t){const o={code:e.statusCode,msg:"网络出错了",data:null};switch(e.statusCode){case m.requestTimeout:o.msg="网络超时了";break;case 200:t==="blob"?(o.code=1,o.data=e.data,o.msg="ok"):(l(e.data)!=="object"&&(e.data={}),o.code=l(e.data.code)==="number"?e.data.code:1,o.data=e.data,o.msg=e.data.message||"ok");break;case 400:o.msg="接口传参不正确";break;case 401:o.msg="登录已过期";break;case 404:o.msg="接口不存在";break}return e.statusCode>=500&&(o.msg="服务器闹脾气了"),o}function R(e,t,o,a={}){const{headers:r={},responseType:d="json",timeout:i,onProgress:g,domain:c}=a;return new Promise(function(u){j({url:(c||m.apiUrl)+t,method:e,headers:{authorization:w.user.info.token,...r},responseType:d,data:o||{},timeout:i||m.requestTimeout,success(n,b){const f=p({statusCode:b.status,data:n},d);u(f)},fail(n){const b=l(n.response)==="string"?h(n.response):n.response,f=p({statusCode:n.status,data:b});f.code!==1&&T.error(f.msg),u(f)},onTimeout(){console.warn("XMLHttpRequest 请求超时 !!!");const n=p({statusCode:m.requestTimeout,data:{}});T.warning(n.msg),u(n)},onProgress:g})})}function P(e){let t="";return window.URL?t=window.URL.createObjectURL(e):window.webkitURL&&(t=window.webkitURL.createObjectURL(e)),t}function q(e){const t=e.get("file");return new Promise(function(o){setTimeout(function(){o({code:1,data:{url:P(t)},msg:"上传成功"})},500)})}function C(e){return R("GET","/free/day",{appid:"56761788",appsecret:"ti3hP8y9",city:encodeURIComponent(e)},{headers:{authorization:""}})}async function U(e){return new Promise(function(t){const o={id:Math.random().toString(36).substr(10),type:"",name:"",avatar:"",token:Math.random().toString(36).substr(2),account:e.account,password:e.password};setTimeout(()=>{switch(e.account){case"admin":o.type=0,o.name="超级管理员",o.avatar="https://p3-passport.byteacctimg.com/img/user-avatar/6332ece850859ade07f7e6a1394f7c34~300x300.image",w.user.update(o),t({code:1,msg:"ok",data:o});break;case"normal":o.type=1,o.name="普通成员",w.user.update(o),t({code:1,msg:"ok",data:o});break;default:t({code:-1,msg:"账户不存在",data:null});break}},600)})}const y=Array.from({length:32}).map((e,t)=>{const o=t+1,a=s(1,2)===1?"/skin/big_0d45ca44-f198-492b-a1ac-7bb23476ace5.jpg":"/skinloading/107000.jpg";return{id:o,gameName:k(2,30),gameType:s(1,2),gamePrice:s(19,1999),date:new Date().toLocaleString(),banner:`https://game.gtimg.cn/images/lol/act/img${a}`,report:s(1,2),num:s(1e4,99999)}});function S(e){const t=e.currentPage,o=e.pageSize,a={code:1,data:{total:y.length,list:[],pageSize:o,currentPage:t},msg:"static data"};return new Promise(function(r){setTimeout(()=>{a.data.list=y.slice((t-1)*o,t*o),r(a)},s(100,3e3))})}function x(e){const t={code:1,data:e,msg:"模拟表单保存"};return new Promise(function(o){setTimeout(()=>{o(t)},s(100,3e3))})}function H(e){const t={code:1,data:e===1?2:1,msg:"模拟修改状态"};return new Promise(function(o){setTimeout(()=>{o(t)},s(100,3e3))})}export{S as a,H as b,C as g,U as l,R as r,x as s,q as u};
