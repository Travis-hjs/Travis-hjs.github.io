import{H as ze,a as at,I as it,d as ue,h as X,o as Ke,b,e as i,f as T,k as E,B as be,p as C,F as Y,c as e,g as o,C as L,t as ne,i as k,z as ee,u as D,m as $e,ax as Ee,n as se,N as Ve,r as ie,w as ge,q as Fe,j as _e,T as rt,K as st}from"./element-plus-CetPY_yD.js";import{S as ut,F as Ye,a as dt}from"./index-BnVa5gG5.js";import{h as le,k as Me,l as re,f as Ue,i as je,b as ye,u as De,n as ct,a as pe,g as pt,c as Je,p as ft}from"./index-BFotbu0e.js";import{v as mt,s as vt}from"./dom-vtHEqTVj.js";import{r as yt}from"./common-BnokhgWM.js";const Ge="the-curd-state",We=()=>it(Ge),fe="action-right",me="action-edit",ce={input:"输入框",textarea:"文本域","input-between":"输入框-串联",select:"下拉框-单选","select-multiple":"下拉框-多选",checkbox:"多选复选框",radio:"单选选择框",switch:"开关切换",date:"日期选择器",cascader:"级联选择器"};let Ie=0;function Ze(){return Ie++,Ie}function Be(r){if(r.type=="date"){const u=r.shortcutIndex,l="the-date-shortcut-selected",W=document.querySelector(`.${l}`);if(W&&W.classList.remove(l),le(u,"number"))if(u===-1)r.value=r.shortcutDate;else{const d=qe[r.dateType][u].value();r.value=d;const s=`.${r.id} .el-picker-panel__sidebar`,p=document.querySelector(s);p&&ze(()=>p.children[u].classList.add(l))}else r.value=["daterange","datetimerange"].includes(r.dateType)?[]:""}else["object","array"].includes(Me(r.defaultValue))?r.value=re(r.defaultValue):r.value=r.defaultValue}function de(r,u="",l){const W=Ze(),d=Date.now(),s="请输入",p="请选择",y=`field-${r}-${W}-${d}`,j={input:{key:u,id:y,type:"input",value:"",defaultValue:"",placeholder:s,valueType:"string"},textarea:{id:y,value:"",defaultValue:"",type:"textarea",placeholder:s,key:u,valueType:"string"},"input-between":{key:u,id:y,value:["",""],defaultValue:["",""],type:"input-between",placeholder:["请输入范围一","请输入范围二"],separator:"-",valueType:"array"},select:{key:u,id:y,value:"",defaultValue:"",type:"select",placeholder:p,options:[],optionSetting:{label:"",value:""},valueType:"string",joinShow:!1},"select-multiple":{key:u,id:y,value:[],defaultValue:[],type:"select-multiple",placeholder:p,options:[],optionSetting:{label:"",value:""},valueType:"array",joinShow:!1},checkbox:{key:u,id:y,value:[],defaultValue:[],type:"checkbox",placeholder:p,options:[],optionSetting:{label:"",value:""},valueType:"array"},radio:{key:u,id:y,value:"",defaultValue:"",type:"radio",placeholder:p,options:[],optionSetting:{label:"",value:""},valueType:"string"},switch:{key:u,id:y,value:!1,defaultValue:!1,type:"switch",placeholder:"",valueType:"boolean"},date:{key:u,id:y,value:"",type:"date",placeholder:p,dateType:"date",formatShow:"YYYY-MM-DD",format:"Y-M-D",valueType:"string",shortcutIndex:""},cascader:{key:u,id:y,value:[],defaultValue:[],type:"cascader",placeholder:p,options:[],optionSetting:{label:"",value:"",children:""},multiple:!1,checkStrictly:!1,valueType:"array"}}[r];return j.label="",j.required=!1,j}function Oe(r,u){return{title:u,prop:r,width:void 0,minWidth:void 0,tooltip:r!==fe,cellType:"text",sort:!1,fixed:!1,iconTips:"",imageWidth:void 0,imageHeight:void 0,jsCode:"",visible:!0}}function Pe(){return{width:500,labelWidth:120,labelPosition:"left",fields:[]}}function Te(){return{key:`action-${Ze()}-${Date.now()}`,text:"",icon:"",click:"",type:"primary"}}function Xe(r){const u={value:r.value,result:!0};if(r.type==="date"){if(!u.value)return u.result=r.placeholder,u;if(["datetimerange","daterange"].includes(r.dateType)){const s=r.value;return s.length<2?(u.result=r.placeholder,u):(u.value=s.map(p=>Ue(p,r.format)),u)}return u.value=Ue(r.value,r.format),u}const l=[null,void 0,""];if(r.type==="input-between"){const s=r.value;if(l.includes(s[0]))return u.result=r.placeholder[0],u;if(l.includes(s[1]))return u.result=r.placeholder[1],u;u.value=JSON.parse(JSON.stringify(s))}if(["input","textarea","radio","select"].includes(r.type)&&l.includes(r.value))return u.result=r.placeholder,u;if(["checkbox","select-multiple"].includes(r.type)){const s=r.value;if(!s.length)return u.result=r.placeholder,u;u.value=JSON.parse(JSON.stringify(s))}return u}function ke(r){if(r)return r=parseInt(r.toString()),r=Math.abs(r),`${r}px`}const Re=[{label:"选择年份",value:"year",formatShow:"YYYY",format:"Y"},{label:"选择年份-月份",value:"month",formatShow:"YYYY-MM",format:"Y-M"},{label:"选择年份-周",value:"week",formatShow:"YYYY年 第ww周",format:"Y-M-D"},{label:"选择年份-月份-日",value:"date",formatShow:"YYYY-MM-DD",format:"Y-M-D"},{label:"选择年份-月份-日 时:分:秒",value:"datetime",formatShow:"YYYY-MM-DD HH:mm:ss",format:"Y-M-D h:m:s"},{label:"选择日期范围",value:"daterange",formatShow:"YYYY-MM-DD",format:"Y-M-D"},{label:"选择日期-时间范围",value:"datetimerange",formatShow:"YYYY-MM-DD HH:mm:ss",format:"Y-M-D h:m:s"}],Qe=3600*1e3*24;function ve(r=0){const u=new Date;return u.setMonth(new Date().getMonth()-r),u}function we(r=0){const u=new Date,l=Qe*7*r;return u.setTime(u.getTime()-l),u}const Ne=[{text:"今天",value:()=>new Date},{text:"昨天",value(){const r=new Date;return r.setTime(r.getTime()-Qe),r}},{text:"一周前",value:()=>we(1)},{text:"一个月前",value:()=>ve(1)},{text:"三个月前",value:()=>ve(3)},{text:"半年前",value:()=>ve(6)},{text:"一年前",value:()=>ve(12)}],He=Ne.map((r,u)=>{const l=u===0,W=new Date().toLocaleDateString(),d=[new Date(`${W} 00:00:00`),new Date(`${W} 23:59:59`)];return{text:l?"今天内":`${r.text}至今`,value:()=>l?d:[r.value(),new Date]}}),qe={year:[{text:"今年",value:()=>new Date},{text:"去年",value:()=>new Date(new Date().setFullYear(new Date().getFullYear()-1))},{text:"前年",value:()=>new Date(new Date().setFullYear(new Date().getFullYear()-2))}],month:[{text:"当月",value:()=>new Date},{text:"上月",value:()=>ve(1)},{text:"前3个月",value:()=>ve(3)},{text:"前6个月",value:()=>ve(6)},{text:"前12个月",value:()=>ve(12)}],week:[{text:"本周",value:()=>new Date},{text:"上周",value:()=>we(1)},{text:"上2周",value:()=>we(2)},{text:"上3周",value:()=>we(3)},{text:"上4周",value:()=>we(4)}],date:Ne,datetime:Ne,daterange:He,datetimerange:He};function ht(r){const u=window;for(const l in r){const W=`_${l}`;u[W]=r[l]}at(function(){for(const l in r){const W=`_${l}`;u[W]=null}})}function oe(r){return`<b style="color: var(--yellow)"> ${r} </b>`}const gt=["title"],bt={name:"Field"},xe=ue({...bt,props:{fieldData:{type:Object,required:!0},editMode:Boolean,readonly:Boolean,disabled:Boolean},emits:["change"],setup(r,{emit:u}){const l=r,W=u;Be(l.fieldData);function d(S){let f=S||l.fieldData.value;le(f,"array")&&(f=re(f)),W("change",f)}const s=X(()=>l.fieldData),p=X(()=>{const S=l.fieldData.optionSetting||{};return{value:S.value||"value",label:S.label||"label"}}),y=X(()=>{const S=l.fieldData,f=S.optionSetting;return{multiple:S.multiple,checkStrictly:S.checkStrictly,value:f.value||"value",label:f.label||"label",children:f.children||"children"}});function J(S){const f=s.value.placeholder;return{disabled:l.disabled,readonly:l.readonly,clearable:!0,placeholder:le(S,"number")?f[S]:f}}function j(S){const f=l.fieldData;f.valueType==="number"?(f.value=je(S,!0,!0),d(Number(f.value))):(f.value=S,d())}function N(S,f){const R=l.fieldData;R.valueType==="array<number>"?(R.value[f]=je(S,!0,!0),d(R.value.map(M=>Number(M)))):(R.value[f]=S,d())}const P=["-",".","",null,void 0];function Q(){const S=l.fieldData;S.valueType==="number"&&(P.includes(S.value)?S.value="":S.value=Number(S.value))}function I(S){const f=l.fieldData;if(f.valueType==="array<number>"){const R=f.value[S];P.includes(R)?f.value[S]="":f.value[S]=Number(R)}}function _(S){const f=S.type==="select-multiple";return{placeholder:S.placeholder,disabled:l.disabled,multiple:S.type==="select-multiple",clearable:!0,filterable:!0,collapseTags:!0,class:`field-item${f?" is-multiple-select":""}`}}function A(S,f){const R=p.value;return S.joinShow?`${f[R.label]}-${f[R.value]}`:`${f[R.label]}`}let B=[];const n="the-date-shortcut-selected";function F(){const S=document.querySelector(`.${n}`);S&&S.classList.remove(n),d()}function K(S){S.classList.add(n)}return Ke(function(){const S=l.fieldData;if(S.type==="date"){const f=`.${S.id} .el-picker-panel__sidebar`,R=document.querySelector(f);if(!R)return console.warn("找不到日期快捷面板节点！");B=Array.from(R.children),B.forEach(G=>{G.addEventListener("click",()=>K(G))});const M=S.shortcutIndex;le(M,"number")&&M>=0&&K(B[M])}}),(S,f)=>{const R=b("el-input"),M=b("el-text"),G=b("el-select-v2"),U=b("el-option"),$=b("el-select"),a=b("el-checkbox"),m=b("el-checkbox-group"),O=b("el-radio"),v=b("el-radio-group"),g=b("el-switch"),q=b("el-cascader"),c=b("el-date-picker");return i(),T("div",{class:"the-curd-form-field f-vertical short-value",style:$e({width:D(ke)(s.value.valueWidth)})},[s.value.type==="input"?(i(),E(R,be({key:0,"model-value":s.value.value},J(),{class:"the-curd-field",onInput:j,onBlur:Q}),null,16,["model-value"])):C("",!0),s.value.type==="textarea"?(i(),E(R,{key:1,modelValue:s.value.value,"onUpdate:modelValue":f[0]||(f[0]=t=>s.value.value=t),readonly:l.readonly,disabled:l.disabled,autosize:{minRows:2,maxRows:10},placeholder:s.value.placeholder,type:"textarea",class:"the-curd-field",onInput:f[1]||(f[1]=t=>d())},null,8,["modelValue","readonly","disabled","placeholder"])):C("",!0),s.value.type==="input-between"?(i(),T(Y,{key:2},[e(R,be({"model-value":s.value.value[0]},J(0),{class:"f1",onInput:f[2]||(f[2]=t=>N(t,0)),onBlur:f[3]||(f[3]=t=>I(0))}),null,16,["model-value"]),e(M,{style:{padding:"0 6px"}},{default:o(()=>[L(ne(s.value.separator),1)]),_:1}),e(R,be({"model-value":s.value.value[1]},J(1),{class:"f1",onInput:f[4]||(f[4]=t=>N(t,1)),onBlur:f[5]||(f[5]=t=>I(1))}),null,16,["model-value"])],64)):C("",!0),s.value.type==="select"||s.value.type==="select-multiple"?(i(),T(Y,{key:3},[s.value.options.length>50?(i(),E(G,be({key:0,modelValue:s.value.value,"onUpdate:modelValue":f[6]||(f[6]=t=>s.value.value=t),options:s.value.options,props:p.value},_(s.value),{onChange:f[7]||(f[7]=t=>d())}),{default:o(({item:t})=>[k("span",{title:A(s.value,t)},ne(A(s.value,t)),9,gt)]),_:1},16,["modelValue","options","props"])):(i(),E($,be({key:1,modelValue:s.value.value,"onUpdate:modelValue":f[8]||(f[8]=t=>s.value.value=t)},_(s.value),{onChange:f[9]||(f[9]=t=>d())}),{default:o(()=>[(i(!0),T(Y,null,ee(s.value.options,t=>(i(),E(U,{key:t[p.value.value],value:t[p.value.value],label:A(s.value,t)},null,8,["value","label"]))),128))]),_:1},16,["modelValue"]))],64)):C("",!0),s.value.type==="checkbox"?(i(),T(Y,{key:4},[e(m,{modelValue:s.value.value,"onUpdate:modelValue":f[10]||(f[10]=t=>s.value.value=t),disabled:l.disabled,onChange:f[11]||(f[11]=t=>d())},{default:o(()=>[(i(!0),T(Y,null,ee(s.value.options,t=>(i(),E(a,{key:t[p.value.value],value:t[p.value.value]},{default:o(()=>[L(ne(t[p.value.label]),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue","disabled"]),l.editMode&&!s.value.options.length?(i(),E(M,{key:0,type:"primary"},{default:o(()=>[L(ne(D(ce).checkbox)+"（空数据） ",1)]),_:1})):C("",!0)],64)):C("",!0),s.value.type==="radio"?(i(),T(Y,{key:5},[e(v,{modelValue:s.value.value,"onUpdate:modelValue":f[12]||(f[12]=t=>s.value.value=t),disabled:l.disabled,onChange:f[13]||(f[13]=t=>d())},{default:o(()=>[(i(!0),T(Y,null,ee(s.value.options,t=>(i(),E(O,{key:t[p.value.value],value:t[p.value.value]},{default:o(()=>[L(ne(t[p.value.label]),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue","disabled"]),l.editMode&&!s.value.options.length?(i(),E(M,{key:0,type:"primary"},{default:o(()=>[L(ne(D(ce).radio)+"（空数据） ",1)]),_:1})):C("",!0)],64)):C("",!0),s.value.type==="switch"?(i(),E(g,{key:6,modelValue:s.value.value,"onUpdate:modelValue":f[14]||(f[14]=t=>s.value.value=t),"inline-prompt":"","active-text":"是","inactive-text":"否",onChange:f[15]||(f[15]=t=>d())},null,8,["modelValue"])):C("",!0),s.value.type==="cascader"?(i(),E(q,{key:7,modelValue:s.value.value,"onUpdate:modelValue":f[16]||(f[16]=t=>s.value.value=t),options:s.value.options,props:y.value,placeholder:s.value.placeholder,disabled:l.disabled,clearable:"","collapse-tags":"","collapse-tags-tooltip":"",filterable:"",class:"the-curd-field",onChange:f[17]||(f[17]=t=>d())},null,8,["modelValue","options","props","placeholder","disabled"])):C("",!0),s.value.type==="date"?(i(),E(c,{key:8,modelValue:s.value.value,"onUpdate:modelValue":f[18]||(f[18]=t=>s.value.value=t),placeholder:s.value.placeholder,type:s.value.dateType,format:s.value.formatShow,shortcuts:D(qe)[s.value.dateType],disabled:l.disabled,"popper-class":s.value.id.toString(),"range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",class:"the-curd-field",onChange:F},null,8,["modelValue","placeholder","type","format","shortcuts","disabled","popper-class"])):C("",!0)],4)}}}),_t={key:0,class:"el-icon-rank el-icon--left"},kt={style:{"line-height":"1"}},wt={key:0,class:"the-curd-edit-mask f-vertical f-right"},xt=k("i",{class:"el-icon-delete el-icon--left"},null,-1),Vt=k("i",{class:"el-icon-edit el-icon--left"},null,-1),Dt=k("i",{class:"el-icon-plus"},null,-1),$t={name:"Search"},St=ue({...$t,props:{data:{type:Object,required:!0}},emits:["search"],setup(r,{emit:u}){const l=r,W=u,d=We(),s=X(()=>d.editor.type==="search"&&!d.editor.show);function p(I){const _=l.data.list[I].label||l.data.list[I].key;ye({title:"操作提示",content:`是否删除【${_}】？`,cancelText:"取消",confirm(){l.data.list.splice(I,1)}})}function y(I){d.editor.index=I,d.editor.action="edit",d.editor.show=!0}function J(I){return d.editor.index===I&&d.editor.type==="search"&&d.editor.show}function j(){d.editor.index=-1,d.editor.action="add",d.editor.show=!0}const{onDragStart:N,onDragMove:P,onDropEnd:Q}=De({list:()=>l.data.list,key:"id",findLevel:5});return(I,_)=>{const A=b("el-button"),B=b("el-text");return i(),E(D(dt),{class:"the-curd-search","label-right":l.data.labelRight,"label-width":D(ke)(l.data.labelWidth)||"auto"},Ee({content:o(()=>[e(Ve,{name:"the-group",tag:"div",class:"the-filter-content f1"},{default:o(()=>[(i(!0),T(Y,null,ee(l.data.list,(n,F)=>(i(),E(D(Ye),{key:n.id,"data-key":n.id,class:se([{"the-curd-selected":J(F)},n.id]),label:n.label,"label-width":D(ke)(n.labelWidth),required:n.required,draggable:s.value,onDragstart:K=>D(N)(F),onDragover:K=>D(P)(K,F),onDrop:_[0]||(_[0]=K=>D(Q)())},Ee({default:o(()=>[e(xe,{"field-data":n,disabled:D(d).loading},null,8,["field-data","disabled"]),s.value?(i(),T("div",wt,[e(A,{link:"",type:"danger",onClick:K=>p(F)},{default:o(()=>[xt,L(" 删除 ")]),_:2},1032,["onClick"]),e(A,{link:"",type:"success",onClick:K=>y(F)},{default:o(()=>[Vt,L(" 编辑 ")]),_:2},1032,["onClick"])])):C("",!0)]),_:2},[D(d).editor.type==="search"?{name:"label",fn:o(()=>[s.value?(i(),T("i",_t)):C("",!0),k("span",kt,ne(n.label),1)]),key:"0"}:void 0]),1032,["data-key","class","label","label-width","required","draggable","onDragstart","onDragover"]))),128)),s.value?(i(),E(D(Ye),{key:0},{default:o(()=>[l.data.list.length?C("",!0):(i(),E(B,{key:0,type:"info",style:{"margin-right":"12px"}},{default:o(()=>[L(" 请添加筛选条件~ ")]),_:1})),e(A,{type:"primary",circle:"",onClick:_[1]||(_[1]=n=>j())},{default:o(()=>[Dt]),_:1})]),_:1})):C("",!0)]),_:1})]),_:2},[D(d).editor.type?void 0:{name:"right",fn:o(()=>[e(D(ut),{loading:D(d).loading,onSearch:_[2]||(_[2]=n=>W("search",n))},null,8,["loading"])]),key:"0"}]),1032,["label-right","label-width"])}}});function et(r){const u=r.onAction||(()=>{});return e(Y,null,[e(b("el-button"),{onClick:()=>u("exit")},{default:()=>[L("退 出")]}),e(b("el-button"),{type:"success",plain:!0,onClick:()=>u("copy")},{default:()=>[e("i",{class:"el-icon-document-copy el-icon--left"},null),L("复制JSON")]}),e(b("el-button"),{type:"primary",onClick:()=>u("complete")},{default:()=>[L("保 存")]})])}function Se(r){const u=r.onClose||(()=>{}),l=r.onSubmit||(()=>{});return e(Y,null,[e(b("el-button"),{onClick:u},{default:()=>[L("取 消")]}),e(b("el-button"),{type:"primary",loading:r.loading,disabled:r.disabledSubmit,onClick:l},{default:()=>[L("确 认")]})])}function Ct(r){const u={};return r.imageWidth&&(u.width=`${r.imageWidth}px`),r.imageHeight&&(u.height=`${r.imageHeight}px`),u}function tt(r){function u(){ct({urls:r.previewList?r.previewList:[r.src]})}return r.column.cellType==="image"?e(b("el-image"),{class:"the-table-image",style:Ct(r.column),src:r.src,onClick:u,fit:"cover"},null):null}function he(r){return e(Y,null,[r.label,e(b("el-tooltip"),{effect:"dark",content:r.tips,"raw-content":!0,placement:"top-start"},{default:()=>[e(b("el-button"),{type:"info",link:!0,style:"height: 32px;"},{default:()=>[e("i",{class:"el-icon-question"},null)]})]})])}function Tt(){const r=Array.from({length:6}).map((u,l)=>({id:l}));return e("div",{class:"the-thumbnail-search flex"},[e("div",{class:"the-thumbnail-search-content f1"},[r.map(u=>e("div",{key:u.id,class:"the-thumbnail-search-item"},null))]),e("div",{class:"the-thumbnail-search-btn f-vertical"},[e("i",{class:"el-icon-search"},null)])])}function Et(){return e("section",{class:"the-thumbnail-table"},[e("svg",{width:280,height:180,viewBox:`0 0 ${280*1} ${180*1}`,fill:"none",xmlns:"http://www.w3.org/2000/svg","data-v-d2b0a988":"",class:"the-thumbnail-table-svg"},[e("rect",{width:280,height:180,fill:""},null),e("g",{filter:"url(#filter0_d_13550_224439)"},[e("path",{d:"M65 60C65 58.8954 65.8954 58 67 58H213C214.105 58 215 58.8954 215 60V132C215 133.105 214.105 134 213 134H67C65.8954 134 65 133.105 65 132V60Z",fill:"var(--el-fill-color-blank)"},null),e("path",{d:"M67 57.7C65.7297 57.7 64.7 58.7297 64.7 60V132C64.7 133.27 65.7297 134.3 67 134.3H213C214.27 134.3 215.3 133.27 215.3 132V60C215.3 58.7297 214.27 57.7 213 57.7H67Z",stroke:"var(--el-border-color-dark)","stroke-width":.6*1},null)]),[76,92,108,124].map((W,d)=>e("rect",{key:d,x:71*1,y:W*1,width:16*1,height:4*1,rx:2*1,fill:"var(--el-color-primary)"},null)),[107,143,197].map((W,d)=>[76,92,108,124].map((s,p)=>e("rect",{key:`${d}-${p}`,x:W*1,y:s*1,width:d===2?12*1:20*1,height:4*1,rx:2*1,fill:"var(--el-border-color-dark)"},null))),e("path",{d:"M65 60C65 58.8954 65.8954 58 67 58H213C214.105 58 215 58.8954 215 60V70H65V60Z",fill:"var(--el-border-color-light)"},null),[71,107,143,199].map(W=>e("rect",{key:W,x:W*1,y:63*1,width:10*1,height:2*1,rx:1*1,fill:"var(--el-border-color-dark)"},null)),[85.75,101.75,117.75].map((W,d)=>e("line",{key:d,x1:65*1,y1:W*1,x2:215*1,y2:W*1,stroke:"var(--el-border-color-light)","stroke-width":.5*1},null)),e("defs",null,[e("filter",{id:"filter0_d_13550_224439",x:"51.0666",y:"44.0671",width:177.867*1,height:103.866*1,filterUnits:"userSpaceOnUse","color-interpolation-filters":"sRGB"},[e("feFlood",{"flood-opacity":"0",result:"BackgroundImageFix"},null),e("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"},null),e("feOffset",null,null),e("feGaussianBlur",{stdDeviation:6.66667*1},null),e("feComposite",{in2:"hardAlpha",operator:"out"},null),e("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.05 0"},null),e("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_13550_224439"},null),e("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_13550_224439",result:"shape"},null)])])])])}const Mt={class:"w-full f-vertical mgb-10"},Ut=k("div",{class:"f1"},null,-1),Ot=k("i",{class:"el-icon--left el-icon-delete"},null,-1),Nt=k("i",{class:"el-icon--left el-icon-plus"},null,-1),Wt=k("i",{class:"el-icon--left el-icon-download"},null,-1),Bt=k("i",{class:"el-icon--left el-icon-setting"},null,-1),qt={class:"f-vertical f-between mgb-10"},Lt=k("i",{class:"el-icon--left el-icon-refresh-left"},null,-1),At={key:0,class:"el-icon--left el-icon-rank"},Ft={class:"f1"},Yt={name:"TableOperation"},lt=ue({...Yt,props:{config:{type:Object,required:!0},editMode:{type:Boolean},disabled:{type:Boolean}},emits:["action"],setup(r,{emit:u}){const l=r,W=u;function d(B){W("action",B)}const s={on:"el-icon-success",off:"el-icon-remove-outline"},p=X(()=>{const B=l.config;return{add:B.formAdd&&B.formAdd.fields.length>0,edit:B.formEdit&&B.formEdit.fields.length>0,delete:!!B.selectKey}}),y=X(()=>{const B=p.value.delete,n=p.value.add,F=p.value.edit;return[{type:"delete",text:B?"修改删除":"配置删除",icon:B?s.on:s.off,style:B?"primary":"info"},{type:"add",text:n?"修改新增表单":"配置新增表单",icon:n?s.on:s.off,style:n?"primary":"info"},{type:"edit",text:F?"修改编辑表单":"配置编辑表单",icon:F?s.on:s.off,style:F?"primary":"info"}]}),J=[{label:"固定左边",value:"left"},{label:"默认",value:!1},{label:"固定右边",value:"right"}],{onDragStart:j,onDragMove:N,onDropEnd:P}=De({list:()=>l.config.columns,key:"prop"});function Q(B,n){const F=B.prop===fe,K=B.prop;return{"data-key":K,key:K,draggable:F?void 0:!0,title:F?"操作栏不可排序，只能显示隐藏操作":void 0,onDragstart:F?void 0:()=>j(n),onDragover:F?void 0:S=>N(S,n),onDrop:F?void 0:P}}const I=ie({showFixed:!1});let _=[];function A(){l.config.columns=_}return ge(()=>l.config.columns,function(B){l.editMode||(_=re(B))},{immediate:!0}),(B,n)=>{const F=b("el-button"),K=b("el-checkbox"),S=b("el-radio-button"),f=b("el-radio-group"),R=b("el-switch"),M=b("el-empty"),G=b("el-popover");return i(),T("div",Mt,[l.editMode?(i(!0),T(Y,{key:0},ee(y.value,U=>(i(),E(F,{key:U.type,type:U.style,link:"",onClick:$=>d(U.type)},{default:o(()=>[k("i",{class:se(["el-icon--left",U.icon])},null,2),L(" "+ne(U.text),1)]),_:2},1032,["type","onClick"]))),128)):C("",!0),Fe(B.$slots,"left"),l.editMode?C("",!0):(i(),T(Y,{key:1},[Ut,Fe(B.$slots,"right"),p.value.delete?(i(),E(F,{key:0,type:"danger",link:"",disabled:l.disabled,onClick:n[0]||(n[0]=U=>d("delete"))},{default:o(()=>[Ot,L(" 删除 ")]),_:1},8,["disabled"])):C("",!0),p.value.add?(i(),E(F,{key:1,type:"primary",link:"",disabled:l.disabled,onClick:n[1]||(n[1]=U=>d("add"))},{default:o(()=>[Nt,L(" 新增 ")]),_:1},8,["disabled"])):C("",!0),e(F,{type:"primary",link:"",disabled:l.disabled,onClick:n[2]||(n[2]=U=>d("export"))},{default:o(()=>[Wt,L(" 导出 ")]),_:1},8,["disabled"]),e(G,{placement:"bottom-start",width:I.showFixed?500:300,transition:"el-zoom-in-top",trigger:"click"},{reference:o(()=>[e(F,{type:"primary",link:"",disabled:l.disabled},{default:o(()=>[Bt,L(" 表格列设置 ")]),_:1},8,["disabled"])]),default:o(()=>[k("div",qt,[e(K,{modelValue:I.showFixed,"onUpdate:modelValue":n[3]||(n[3]=U=>I.showFixed=U),label:"配置固定列"},null,8,["modelValue"]),e(F,{type:"primary",link:"",onClick:n[4]||(n[4]=U=>A())},{default:o(()=>[Lt,L(" 重置 ")]),_:1})]),e(Ve,{name:"the-group",tag:"div",class:"the-curd-setting-list the-curd-scrollbar"},{default:o(()=>[(i(!0),T(Y,null,ee(l.config.columns,(U,$)=>(i(),T("div",be({class:"the-curd-option-item f-vertical"},Q(U,$)),[U.prop!==D(fe)?(i(),T("i",At)):C("",!0),k("span",Ft,ne(U.title),1),I.showFixed?(i(),E(f,{key:1,modelValue:U.fixed,"onUpdate:modelValue":a=>U.fixed=a,size:"small",class:"mgr-10"},{default:o(()=>[(i(),T(Y,null,ee(J,a=>e(S,{key:a.value.toString(),value:a.value},{default:o(()=>[L(ne(a.label),1)]),_:2},1032,["value"])),64))]),_:2},1032,["modelValue","onUpdate:modelValue"])):C("",!0),e(R,{modelValue:U.visible,"onUpdate:modelValue":a=>U.visible=a,"inline-prompt":"","active-text":"显示","inactive-text":"隐藏"},null,8,["modelValue","onUpdate:modelValue"])],16))),256)),l.config.columns.length?C("",!0):(i(),E(M,{key:"empty","image-size":120,description:"暂无可以设置的表格列"}))]),_:1})]),_:1},8,["width"])],64))])}}}),jt={key:0,class:"el-icon-rank el-icon--left",style:{"line-height":"32px"}},Jt={class:"f-vertical w-full"},It=k("i",{class:"el-icon-edit"},null,-1),Pt=k("i",{class:"el-icon-delete"},null,-1),Rt=k("i",{class:"el-icon--left el-icon-plus"},null,-1),Ht=k("i",{class:"el-icon--left el-icon-plus"},null,-1),zt={key:"bottom-setting"},Kt=k("i",{class:"el-icon--left el-icon-delete"},null,-1),Gt=k("i",{class:"el-icon--left el-icon-check"},null,-1),Zt={name:"TableForm"},ot=ue({...Zt,props:{config:{type:Object,default:()=>Pe()},type:{type:String},editMode:{type:Boolean},disabled:{type:Boolean}},emits:["change"],setup(r,{expose:u,emit:l}){const W=r,d=l,s=_e(),p=Pe(),y=ie({config:p,form:{},rules:{}}),J=We(),j=X(()=>W.type==="add"?"新增":"编辑"),N=X(()=>J.editor.show);function P(U){n(),J.editor.action=U>=0?"edit":"add",J.editor.form=y.config,J.editor.index=U,J.editor.show=!0}function Q(U){const $=y.config.fields;n(),ye({title:"操作提示",content:`是否删除【${$[U].label}】？`,cancelText:"取消",confirm(){$.splice(U,1)}})}function I(){ye({title:"操作提示",content:`是否移除【${j.value}】表单？移除后将不会出现对应功能按钮。`,cancelText:"取消",confirm(){y.config.fields=[]}})}function _(){d("change")}function A(){const U=W.type==="add"?"编辑":"新增";ye({title:"操作提示",content:`是否将表单数据同步到【${U}】表单？`,cancelText:"不同步",confirmText:"同步",cancel(){d("change",y.config)},confirm(){d("change",y.config,!0)}})}function B(U){var $;($=s.value)==null||$.validate(a=>{if(a&&U){const m=M.value,O={};G.value.forEach(v=>{O[v.key]=m[v.key]}),U(m,O)}})}function n(){var U;(U=s.value)==null||U.clearValidate()}function F(){y.config.fields.forEach(Be)}function K(U){y.config.fields.forEach($=>{if(Object.prototype.hasOwnProperty.call(U,$.key)){const a=U[$.key];if(!a)return;switch($.type){case"date":le(a,"array")?$.value=a.map(m=>new Date(m)):$.value=new Date(a);break;default:$.value=a;break}}})}const{onDragStart:S,onDragMove:f,onDropEnd:R}=De({list:()=>y.config.fields,key:"id",findLevel:10});ge(()=>W.config,function(U){U&&(y.config=re(U))},{immediate:!0}),ge(()=>y.config.fields,function(U){const $={},a={},m=["input","input-between","textarea"];U&&U.forEach(O=>{$[O.key]=O.value,O.required&&(a[O.key]=[{required:!0,validator(v,g,q){const c=[void 0,null,""];if(O.type==="input-between"&&!O.value[0]&&!O.value[1]){q(new Error("请输入两个范围字段"));return}if(O.valueType==="array"&&!O.value.length){q(new Error(O.placeholder||"请选择"));return}if(O.valueType!=="boolean"&&c.includes(O.value)){const t=m.includes(O.type)?"请输入内容":"请选择";q(new Error(O.placeholder||t));return}q()},trigger:m.includes(O.type)?"blur":"change"}])}),y.form=$,y.rules=a,setTimeout(n)},{immediate:!0});const M=X(()=>{const U={};return y.config.fields.forEach($=>{U[$.key]=Xe($).value}),U}),G=X(()=>y.config.fields.filter(U=>{const $=U.show;if(!$)return!0;if(le($,"function"))return $(M.value);if($.includes("return"))try{return new Function("formData",$)(M.value)}catch(a){console.warn("解析表单展示逻辑代码错误 >>",a)}return!0}));return u({clear:n,validate:B,reset:F,setFormData:K}),(U,$)=>{const a=b("el-button"),m=b("el-form-item"),O=b("el-empty"),v=b("el-form");return i(),E(v,{ref_key:"formRef",ref:s,model:y.form,rules:y.rules,labelWidth:D(ke)(y.config.labelWidth),labelPosition:y.config.labelPosition,disabled:W.disabled,style:$e(W.editMode?{width:D(ke)(y.config.width)}:null),class:se([{"is-edit-form":W.editMode}])},{default:o(()=>[W.editMode?(i(),T(Y,{key:0},[e(Ve,{name:"the-group",tag:"div"},{default:o(()=>[(i(!0),T(Y,null,ee(y.config.fields,(g,q)=>(i(),E(m,{class:se([{"the-curd-selected":D(J).editor.index===q&&N.value}]),prop:g.key,key:g.id,"data-key":g.id,draggable:y.config.fields.length>1&&!D(J).editor.show?!0:null,onDragstart:c=>D(S)(q),onDragover:c=>D(f)(c,q),onDrop:D(R)},{label:o(()=>[y.config.fields.length>1&&!D(J).editor.show?(i(),T("i",jt)):C("",!0),k("span",null,ne(g.label),1)]),default:o(()=>[k("div",Jt,[e(xe,{class:"mgr-10",fieldData:g,editMode:""},null,8,["fieldData"]),e(a,{link:"",type:"success",disabled:N.value,onClick:c=>P(q)},{default:o(()=>[It]),_:2},1032,["disabled","onClick"]),e(a,{link:"",type:"danger",disabled:N.value,onClick:c=>Q(q)},{default:o(()=>[Pt]),_:2},1032,["disabled","onClick"])])]),_:2},1032,["class","prop","data-key","draggable","onDragstart","onDragover","onDrop"]))),128))]),_:1}),y.config.fields.length?C("",!0):(i(),E(O,{key:0,description:`当前没有表单项，当没有表单项时【${j.value}】功能按钮不会出现~`},{default:o(()=>[N.value?C("",!0):(i(),E(a,{key:0,type:"primary",onClick:$[0]||($[0]=g=>P(-1))},{default:o(()=>[Rt,L(" 添加表单项 ")]),_:1}))]),_:1},8,["description"])),N.value?C("",!0):(i(),T(Y,{key:1},[y.config.fields.length?(i(),E(m,{key:"bottom-add"},{default:o(()=>[e(a,{type:"primary",onClick:$[1]||($[1]=g=>P(-1))},{default:o(()=>[Ht,L(" 继续添加 ")]),_:1})]),_:1})):C("",!0),k("div",zt,[e(a,{link:"",onClick:$[2]||($[2]=g=>_())},{default:o(()=>[L(" 退出编辑 ")]),_:1}),e(a,{type:"danger",link:"",disabled:!y.config.fields.length,onClick:$[3]||($[3]=g=>I())},{default:o(()=>[Kt,L(" 清空表单 ")]),_:1},8,["disabled"]),e(a,{type:"success",link:"",onClick:$[4]||($[4]=g=>A())},{default:o(()=>[Gt,L(" 保存表单 ")]),_:1})])],64))],64)):C("",!0),!W.editMode&&y.config&&y.config.fields?(i(!0),T(Y,{key:1},ee(G.value,g=>(i(),E(m,{label:g.label,prop:g.key,key:g.id},{default:o(()=>[e(xe,{fieldData:g},null,8,["fieldData"])]),_:2},1032,["label","prop"]))),128)):C("",!0)]),_:1},8,["model","rules","labelWidth","labelPosition","disabled","style","class"])}}}),Xt={key:1,class:"f-vertical w-full"},Qt=k("i",{class:"el-icon--right el-icon-question the-tips-icon"},null,-1),el={key:1,class:"f1 f-right"},tl={name:"TableHeader"},nt=ue({...tl,props:{column:{type:Object,required:!0}},emits:["sort"],setup(r,{emit:u}){const l=r,W=u,d=X(()=>!l.column.sort&&!l.column.iconTips),s={true:{index:0,icon:"el-icon-sort"},asc:{index:1,icon:"el-icon-sort-up"},desc:{index:2,icon:"el-icon-sort-down"}},p=[!0,"asc","desc"];function y(){const J=l.column.sort.toString();let j=s[J].index;j++,j>=p.length&&(j=0);const N=p[j];W("sort",l.column.prop,N)}return(J,j)=>{const N=b("el-tooltip"),P=b("el-button");return d.value?(i(),T(Y,{key:0},[L(ne(l.column.title),1)],64)):(i(),T("div",Xt,[k("span",null,ne(l.column.title),1),l.column.iconTips?(i(),E(N,{key:0,effect:"dark",content:l.column.iconTips,placement:"top"},{default:o(()=>[Qt]),_:1},8,["content"])):C("",!0),l.column.sort?(i(),T("div",el,[e(P,{link:"",onClick:y},{default:o(()=>[k("i",{class:se(["el-icon--right",s[l.column.sort.toString()].icon])},null,2)]),_:1})])):C("",!0)]))}}}),ll={name:"TableColumnConfig"},ol=ue({...ll,props:{show:{type:Boolean,required:!0},type:{type:String,required:!0},keys:{type:Array,required:!0},form:Object},emits:["update:show","submit"],setup(r,{emit:u}){const l=r,W=u,d=ie({show:!1,form:Oe("","")}),s=X(()=>({add:"新增",edit:"编辑",copy:"复制"})[l.type]+"表格列"),p=_e(),y={title:{required:!0,message:"请输入表格列标题",trigger:"blur"},prop:{required:!0,validator(I,_,A){_?l.keys.includes(d.form.prop)?A(new Error("已经存在相同的值！")):A():A(new Error("输入字段不能为空！"))},trigger:"blur"},jsCode:{required:!0,validator(I,_,A){_?_.includes("return")?A():A(new Error('代码片段必须带有返回字段 "return"')):A(new Error("代码片段不能为空！"))},trigger:"blur"}},J=[{label:"默认普通文本",value:"text"},{label:"图片预览组件",value:"image"},{label:"自定义 js 代码",value:"js"}],j=[{label:"不可排序",value:!1},{label:"可排序",value:!0},{label:"默认升序",value:"asc"},{label:"默认降序",value:"desc"}],N=`
<p>函数代码片段：</p>
<p>第一个参数${oe("cellValue")}是表格值;</p>
<p>第二个参数${oe("row")}是完整对象;</p>
<p>例如：${oe("return cellValue + row.id;")};</p>
<p>也可以是HTML：${oe("return `html 标签`")};</p>
`;function P(){W("update:show",!1)}function Q(){var I;(I=p.value)==null||I.validate(_=>{if(!_)return;const A=re(d.form);["width","minWidth","imageWidth","imageHeight"].forEach(n=>{A[n]&&(A[n]=Number(A[n]))}),A.cellType==="image"&&(A.slot=A.prop),(A.sort||A.iconTips)&&(A.slotHead=`header-${A.prop}`),W("submit",A),P()})}return ge(()=>l.show,function(I){d.show=I,I&&(l.type==="add"?d.form=Oe("",""):(d.form=re(l.form),l.type==="copy"&&(d.form.prop="")),setTimeout(()=>{var _;return(_=p.value)==null?void 0:_.clearValidate()}))},{immediate:!0}),(I,_)=>{const A=b("el-input"),B=b("el-form-item"),n=b("el-input-number"),F=b("el-option"),K=b("el-select"),S=b("el-switch"),f=b("el-form"),R=b("base-dialog");return i(),E(R,{modelValue:d.show,"onUpdate:modelValue":_[11]||(_[11]=M=>d.show=M),title:s.value,width:"580px",onClose:P},{footer:o(()=>[e(D(Se),{onClose:P,onSubmit:Q})]),default:o(()=>[e(f,{ref_key:"formRef",ref:p,model:d.form,rules:y,"label-position":"right","label-width":"130px"},{default:o(()=>[e(B,{label:"表格列标题",prop:"label"},{default:o(()=>[e(A,{modelValue:d.form.title,"onUpdate:modelValue":_[0]||(_[0]=M=>d.form.title=M),clearable:"",placeholder:y.title.message},null,8,["modelValue","placeholder"])]),_:1}),e(B,{label:"表格列键值",prop:"prop"},{default:o(()=>[e(A,{modelValue:d.form.prop,"onUpdate:modelValue":_[1]||(_[1]=M=>d.form.prop=M),clearable:"",placeholder:"请输入表格列键值"},null,8,["modelValue"])]),_:1}),e(B,{label:"表格列宽度",prop:"width"},{default:o(()=>[e(n,{modelValue:d.form.width,"onUpdate:modelValue":_[2]||(_[2]=M=>d.form.width=M),class:"w-full","controls-position":"right",placeholder:"请输入表格列宽度，例如：120（默认自适应）"},null,8,["modelValue"])]),_:1}),e(B,{label:"表格列最小宽度",prop:"minWidth"},{default:o(()=>[e(n,{modelValue:d.form.minWidth,"onUpdate:modelValue":_[3]||(_[3]=M=>d.form.minWidth=M),class:"w-full","controls-position":"right",placeholder:"请输入表格列最小宽度，例如：120（默认自适应）"},null,8,["modelValue"])]),_:1}),e(B,{label:"表格列展示类型",prop:"cellType"},{default:o(()=>[e(K,{modelValue:d.form.cellType,"onUpdate:modelValue":_[4]||(_[4]=M=>d.form.cellType=M)},{default:o(()=>[(i(),T(Y,null,ee(J,M=>e(F,{key:M.value,value:M.value,label:M.label},null,8,["value","label"])),64))]),_:1},8,["modelValue"])]),_:1}),d.form.cellType==="image"?(i(),T(Y,{key:0},[e(B,{label:"图片宽度(像素)",prop:"imageWidth"},{default:o(()=>[e(n,{modelValue:d.form.imageWidth,"onUpdate:modelValue":_[5]||(_[5]=M=>d.form.imageWidth=M),class:"w-full","controls-position":"right",placeholder:"请输入数字（默认80px）"},null,8,["modelValue"])]),_:1}),e(B,{label:"图片高度(像素)",prop:"imageHeight"},{default:o(()=>[e(n,{modelValue:d.form.imageHeight,"onUpdate:modelValue":_[6]||(_[6]=M=>d.form.imageHeight=M),class:"w-full","controls-position":"right",placeholder:"请输入数字（默认80px）"},null,8,["modelValue"])]),_:1})],64)):C("",!0),d.form.cellType==="js"?(i(),E(B,{key:1,prop:"jsCode"},{label:o(()=>[e(D(he),{label:"js代码",tips:N})]),default:o(()=>[e(A,{modelValue:d.form.jsCode,"onUpdate:modelValue":_[7]||(_[7]=M=>d.form.jsCode=M),type:"textarea",placeholder:"请输入代码片段"},null,8,["modelValue"])]),_:1})):C("",!0),e(B,{label:"表格列排序操作",prop:"sort"},{default:o(()=>[e(K,{modelValue:d.form.sort,"onUpdate:modelValue":_[8]||(_[8]=M=>d.form.sort=M)},{default:o(()=>[(i(),T(Y,null,ee(j,M=>e(F,{key:M.value.toString(),value:M.value,label:M.label},null,8,["value","label"])),64))]),_:1},8,["modelValue"])]),_:1}),e(B,{label:"内容溢出截断",prop:"tooltip"},{default:o(()=>[e(S,{modelValue:d.form.tooltip,"onUpdate:modelValue":_[9]||(_[9]=M=>d.form.tooltip=M),"inline-prompt":"","active-text":"是","inactive-text":"否"},null,8,["modelValue"])]),_:1}),e(B,{label:"表头图标提示文字",prop:"iconTips"},{default:o(()=>[e(A,{modelValue:d.form.iconTips,"onUpdate:modelValue":_[10]||(_[10]=M=>d.form.iconTips=M),clearable:"",placeholder:"请输入表头图标提示文字"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"])}}}),nl=k("p",{class:"mgb-10"},"表格数据中的字段，例如表格数：",-1),al=k("p",{class:"mgb-10"},"则键值可以为 id",-1),il=k("p",null,[k("i",{class:"el-icon-info el-icon--left"}),L(" 不填则没有删除功能 ")],-1),rl={name:"TableDeleteConfig"},sl=ue({...rl,props:{show:{type:Boolean,default:!1},selectKey:{type:String,default:""}},emits:["update:show","submit"],setup(r,{emit:u}){const l=r,W=u,d='[{ id: 1, name: "名称", status: 2 }]',s=ie({show:!1,keyword:""});function p(){W("update:show",!1)}function y(){p(),W("submit",s.keyword)}return ge(()=>l.show,function(J){s.show=J,J&&(s.keyword=l.selectKey||"")},{immediate:!0}),(J,j)=>{const N=b("el-input"),P=b("el-form-item"),Q=b("el-form"),I=b("base-dialog");return i(),E(I,{modelValue:s.show,"onUpdate:modelValue":j[1]||(j[1]=_=>s.show=_),title:"配置表格删除功能",width:"400px",onClose:p},{footer:o(()=>[e(D(Se),{onClose:p,onSubmit:y})]),default:o(()=>[e(Q,{labelPosition:"right",labelWidth:"120px"},{default:o(()=>[e(P,{label:"数据键值"},{default:o(()=>[e(N,{class:"mgb-10",modelValue:s.keyword,"onUpdate:modelValue":j[0]||(j[0]=_=>s.keyword=_),placeholder:"请输入数据键值",clearable:""},null,8,["modelValue"]),k("div",{class:"the-tag blue"},[nl,k("p",{class:"mgb-10"},ne(d)),al,il])]),_:1})]),_:1})]),_:1},8,["modelValue"])}}}),ul={class:"flex"},dl={class:"f1"},cl={class:"f-vertical w-full"},pl={class:"f-right w-full"},fl=k("i",{class:"el-icon--left el-icon-finished"},null,-1),ml=k("i",{class:"el-icon--left el-icon-plus"},null,-1),vl=["data-key","draggable","onDragstart","onDragover"],yl={key:0,class:"el-icon--left el-icon-rank"},hl=k("div",{class:"f1"},null,-1),gl=k("i",{class:"el-icon-delete"},null,-1),bl=k("i",{class:"el-icon-edit"},null,-1),_l={key:1,class:"w-full f-right"},kl=k("i",{class:"el-icon--left el-icon-plus"},null,-1),wl={name:"TableActionConfig"},xl=ue({...wl,props:{show:{type:Boolean,default:!1},list:{type:Array,required:!0},columnWidth:{type:Number},actionMax:{type:Number}},emits:["update:show","submit"],setup(r,{emit:u}){const l=r,W=u,d=_e(),s=_e(),p=ie({show:!1,list:[],index:-1,hasEdit:!1,formEdit:!1}),y=ie({btn:Te(),column:{width:160,max:3}}),J={width:{required:!0,message:"请输入表格列宽度，例如：160",trigger:"blur"},max:{required:!1,message:"请输入数量，超出用“更多”下拉展示",trigger:"blur"}},j={text:{required:!0,message:"请输入按钮文字",trigger:"blur"},click:{required:!0,message:"请输入按钮操作代码",trigger:"blur"},icon:{required:!1,message:"请输入图标 class",trigger:"blur"},type:{required:!1,message:"请选择按钮类型",trigger:"change"}};function N(){W("update:show",!1)}function P(){s.value.validate($=>{if(!$)return;N();const{width:a,max:m}=y.column;W("submit",re(p.list),a,m)})}function Q($){d.value.validate(a=>{if(!a)return;const m=re(y.btn);$==="add"?p.list.push(m):p.list[p.index]=y.btn,I()})}function I(){p.index=-1,y.btn=Te(),p.formEdit=!1,setTimeout(()=>{var $;return($=d.value)==null?void 0:$.clearValidate()})}function _($){const a=p.list[$];y.btn=JSON.parse(JSON.stringify(a)),p.index=$,p.formEdit=!0}function A($){p.list.splice($,1)}ge(()=>l.show,function($){p.show=$,$&&(p.list=re(l.list),p.hasEdit=p.list.some(a=>a.key===me),p.index=-1,y.btn=Te(),y.column={width:l.columnWidth,max:l.actionMax},setTimeout(()=>{var a,m;(a=d.value)==null||a.clearValidate(),(m=s.value)==null||m.clearValidate()}))},{immediate:!0});const B=[{label:"默认（蓝色）",value:"primary"},{label:"成功（绿色）",value:"success"},{label:"警告（橙色）",value:"warning"},{label:"危险（红色）",value:"danger"},{label:"文本（灰色）",value:"info"}],n="https://element.eleme.cn/#/zh-CN/component/icon",{onDragStart:F,onDragMove:K,onDropEnd:S}=De({list:()=>p.list,key:"key"});function f($){if($.key!=me&&p.list.length>1&&p.index===-1)return!0}function R($){const a=$.text;if(le(a,"string")){if(!a.includes("return"))return a;let m="文字配置有误";try{m=new Function("row",a)({})}catch(O){console.warn("解析按钮文字代码错误 >>",O)}return m}return le(a,"function")?a({}):"未设置按钮"}const M=`
<p>可以输入代码片段，</p>
<p>以${oe("return")}关键字为函数标记，</p>
<p>函数第一个参数${oe("row")}是表格对象值</p>
<p>例如：${oe('return row.status === 1 ? "下架" : "上架";')}</p>
`,G=`
<p>函数代码片段，点击的时候运行</p>
<p>函数第一个参数${oe("row")}是表格对象值</p>
<p>第二个参数${oe("index")}是当前索引</p>
<p>例如：${oe("console.log(row, index);")}</p>
`,U=`
<p>可以输入代码片段，</p>
<p>以${oe("return")}关键字为函数标记，</p>
<p>函数第一个参数${oe("row")}是表格对象值</p>
<p>例如：${oe("return row.status === 1;")}返回布尔值进行判断</p>
`;return($,a)=>{const m=b("el-text"),O=b("el-divider"),v=b("el-input-number"),g=b("el-form-item"),q=b("el-form"),c=b("el-input"),t=b("el-option"),x=b("el-select"),h=b("el-button"),Z=b("el-popconfirm"),H=b("el-empty"),z=b("base-dialog");return i(),E(z,{modelValue:p.show,"onUpdate:modelValue":a[13]||(a[13]=w=>p.show=w),title:"配置操作列按钮功能",width:"880px",onClose:N},{footer:o(()=>[e(D(Se),{disabledSubmit:p.formEdit,onClose:N,onSubmit:P},null,8,["disabledSubmit"])]),default:o(()=>[k("div",ul,[k("section",dl,[e(O,{"content-position":"left","border-style":"dashed"},{default:o(()=>[e(m,{type:"info"},{default:o(()=>[L("操作列配置")]),_:1})]),_:1}),e(q,{ref_key:"formColumn",ref:s,model:y.column,rules:J,labelPosition:"right",labelWidth:"128px"},{default:o(()=>[e(g,{label:"操作列宽度",prop:"width"},{default:o(()=>[e(v,{modelValue:y.column.width,"onUpdate:modelValue":a[0]||(a[0]=w=>y.column.width=w),class:"w-full","controls-position":"right",placeholder:J.width.message},null,8,["modelValue","placeholder"])]),_:1}),e(g,{label:"操作按钮限制",prop:"max"},{default:o(()=>[e(v,{modelValue:y.column.max,"onUpdate:modelValue":a[1]||(a[1]=w=>y.column.max=w),class:"w-full","controls-position":"right",min:2,placeholder:J.max.message},null,8,["modelValue","placeholder"])]),_:1})]),_:1},8,["model"]),e(O,{"content-position":"left","border-style":"dashed"},{default:o(()=>[e(m,{type:"info"},{default:o(()=>[L("操作按钮配置")]),_:1})]),_:1}),e(q,{ref_key:"formBtn",ref:d,model:y.btn,rules:j,labelPosition:"right",labelWidth:"128px",class:se({"the-filter-mask":!p.formEdit}),"data-tips":"待新增或编辑操作"},{default:o(()=>[e(g,{prop:"text"},{label:o(()=>[e(D(he),{label:"按钮文字",tips:M})]),default:o(()=>[e(c,{modelValue:y.btn.text,"onUpdate:modelValue":a[2]||(a[2]=w=>y.btn.text=w),type:"textarea",placeholder:j.text.message},null,8,["modelValue","placeholder"])]),_:1}),e(g,{prop:"click"},{label:o(()=>[e(D(he),{label:"按钮功能代码",tips:G})]),default:o(()=>[e(c,{modelValue:y.btn.click,"onUpdate:modelValue":a[3]||(a[3]=w=>y.btn.click=w),type:"textarea",placeholder:"请输入代码片段"},null,8,["modelValue"])]),_:1}),e(g,{prop:"show"},{label:o(()=>[e(D(he),{label:"按钮显示条件",tips:U})]),default:o(()=>[e(c,{modelValue:y.btn.show,"onUpdate:modelValue":a[4]||(a[4]=w=>y.btn.show=w),type:"textarea",placeholder:"请输入条件代码，为空则默认显示"},null,8,["modelValue"])]),_:1}),e(g,{prop:"disabled"},{label:o(()=>[e(D(he),{label:"按钮禁用条件",tips:U})]),default:o(()=>[e(c,{modelValue:y.btn.disabled,"onUpdate:modelValue":a[5]||(a[5]=w=>y.btn.disabled=w),type:"textarea",placeholder:"请输入条件代码，为空则默认不禁用"},null,8,["modelValue"])]),_:1}),e(g,{label:"按钮图标",prop:"icon"},{default:o(()=>[k("div",cl,[e(c,{modelValue:y.btn.icon,"onUpdate:modelValue":a[6]||(a[6]=w=>y.btn.icon=w),placeholder:j.icon.message,clearable:""},null,8,["modelValue","placeholder"]),e(m,{type:"primary",style:{width:"110px","text-align":"right"}},{default:o(()=>[k("a",{href:n,target:"_blank"},"去官网复制")]),_:1})])]),_:1}),e(g,{label:"按钮类型",prop:"type"},{default:o(()=>[e(x,{modelValue:y.btn.type,"onUpdate:modelValue":a[7]||(a[7]=w=>y.btn.type=w),placeholder:j.type.message},{default:o(()=>[(i(),T(Y,null,ee(B,w=>e(t,{key:w.value,value:w.value,label:w.label},null,8,["value","label"])),64))]),_:1},8,["modelValue","placeholder"])]),_:1}),e(g,null,{default:o(()=>[k("div",pl,[e(h,{onClick:a[8]||(a[8]=w=>I())},{default:o(()=>[L("取 消")]),_:1}),p.index>-1?(i(),E(h,{key:0,type:"primary",plain:"",onClick:a[9]||(a[9]=w=>Q("edit"))},{default:o(()=>[fl,L(" 确认修改 ")]),_:1})):(i(),E(h,{key:1,type:"primary",plain:"",onClick:a[10]||(a[10]=w=>Q("add"))},{default:o(()=>[ml,L(" 确认新增 ")]),_:1}))])]),_:1})]),_:1},8,["model","class"])]),e(Ve,{name:"the-group",tag:"div",class:"the-curd-option-list f1"},{default:o(()=>[(i(!0),T(Y,null,ee(p.list,(w,ae)=>(i(),T("div",{class:se(["the-curd-option-item f-vertical",{"the-curd-selected":ae===p.index}]),key:w.key,"data-key":w.key!==D(me)?w.key:null,draggable:f(w),onDragstart:te=>D(F)(ae),onDragover:te=>D(K)(te,ae),onDrop:a[11]||(a[11]=(...te)=>D(S)&&D(S)(...te))},[p.index===-1&&w.key!==D(me)?(i(),T("i",yl)):C("",!0),e(h,{type:w.type,link:""},{default:o(()=>[w.icon?(i(),T("i",{key:0,class:se(["el-icon--left",w.icon])},null,2)):C("",!0),L(" "+ne(R(w)),1)]),_:2},1032,["type"]),hl,w.key===D(me)?(i(),E(m,{key:1,type:"info",size:"small"},{default:o(()=>[L("编辑按钮不可删除、拖拽等操作，且处于首位")]),_:1})):(i(),T(Y,{key:2},[e(Z,{width:"186px",title:"是否删除该按钮功能？",onConfirm:te=>A(ae)},{reference:o(()=>[e(h,{link:"",type:"danger",disabled:p.index>-1},{default:o(()=>[gl]),_:1},8,["disabled"])]),_:2},1032,["onConfirm"]),e(h,{link:"",type:"success",onClick:te=>_(ae)},{default:o(()=>[bl]),_:2},1032,["onClick"])],64))],42,vl))),128)),p.list.length?C("",!0):(i(),E(H,{key:"empty","image-size":120,description:"请添加操作列功能按钮"})),p.formEdit?C("",!0):(i(),T("div",_l,[p.formEdit?C("",!0):(i(),E(h,{key:0,type:"primary",plain:"",onClick:a[12]||(a[12]=w=>p.formEdit=!0)},{default:o(()=>[kl,L(" 新增功能按钮 ")]),_:1}))]))]),_:1})])]),_:1},8,["modelValue"])}}}),Vl={class:"the-curd-table-model the-curd-scrollbar"},Dl=["data-key","draggable","onDragstart","onDragover"],$l=["data-head"],Sl=k("i",{class:"el-icon-rank el-icon--left"},null,-1),Cl={class:"fake-table-cell operation f-vertical"},Tl=k("i",{class:"el-icon-arrow-down el-icon--right"},null,-1),El={class:"fake-table-cell f-vertical"},Ml={key:1,class:"the-tag blue"},Ul=k("div",{class:"fake-table-head fvc"},"操作",-1),Ol={class:"fake-table-cell operation fvc"},Nl=k("i",{class:"el-icon-setting"},null,-1),Wl=k("i",{class:"el-icon-delete"},null,-1),Bl={class:"fake-table-cell"},ql={class:"f-vertical",key:"right-setting"},Ll=k("i",{class:"el-icon-plus el-icon--left"},null,-1),Al={key:0},Fl=k("i",{class:"el-icon-plus el-icon--left"},null,-1),Yl={key:1},jl={key:0,class:"the-tag blue mgl-10"},Jl=k("i",{class:"el-icon--left el-icon-info"},null,-1),Il={name:"TableModel"},Pl=ue({...Il,props:{config:{type:Object,required:!0}},emits:["action"],setup(r,{emit:u}){const l=r,W=u,d="https://fuss10.elemecdn.com/e/5d/4a731a90594a4af544c0c25941171jpeg.jpeg",s=[{key:"edit",label:"编辑列",icon:"el-icon-edit",click(v){J("edit",v)}},{key:"copy",label:"复制列",icon:"el-icon-document-copy",click(v){J("copy",v)}},{key:"delete",label:"删除列",icon:"el-icon-delete",click(v){N(v)}}],p=ie({show:!1,type:"add",index:-1,form:void 0,keys:[]}),y=X(()=>{const v=l.config.columns,g=[],q=[];for(let c=0;c<v.length;c++){const t=v[c];t.prop===fe?q.push(t):g.push(t)}return{drag:g,action:q}});function J(v,g){p.keys=l.config.columns.map(c=>c.prop),{add(){p.form=void 0},edit(){const c=l.config.columns[g];p.keys=p.keys.filter(t=>t!==c.prop),p.index=g,p.form=c},copy(){const c=l.config.columns[g];p.form=c}}[v](),p.type=v,p.show=!0}function j(v){const g=l.config;if(["add","copy"].includes(p.type)){const q=re(y.value.drag);q.push(v),g.columns=q.concat(y.value.action)}else g.columns[p.index]=v}function N(v){const g=y.value.drag[v];ye({title:"操作提示",content:`是否删除【${g.title}】列？`,cancelText:"取消",confirm(){const q=l.config.columns.findIndex(c=>c.prop===g.prop);l.config.columns.splice(q,1)}})}const{onDragStart:P,onDragMove:Q,onDropEnd:I}=De({list:()=>l.config.columns,key:"prop",findLevel:5});function _(v){const g={};return v&&v.width&&(g.width=`${v.width}px`),v&&v.minWidth&&(g.minWidth=`${v.minWidth}px`),g}const A=X(function(){const v=l.config.columns;if(v.length>0&&v[v.length-1].prop===fe)return v[v.length-1]});function B(){const v=Oe(fe,"操作");v.minWidth=120,v.width=160,l.config.columns.push(v)}function n(){const v=l.config.columns;ye({title:"操作提示",content:"是否删除操作列？删除之后需要重新配置。",cancelText:"取消",confirm(){v.splice(v.length-1,1),l.config.actions=[],l.config.formEdit&&(l.config.formEdit=void 0)}})}const F=ie({show:!1,keyword:""});function K(){const v=l.config.selectKey;F.keyword=v?v.toString():"",F.show=!0}function S(v){l.config.selectKey=v}const f=ie({show:!1,columnWidth:0,actionMax:0});function R(){f.show=!0,f.columnWidth=A.value.width,f.actionMax=l.config.actionMax}function M(v,g){l.config.actions=v;const q=l.config.columns.find(c=>c.prop===fe);q.width=g}const G=ie({show:!1,form:null,type:"add"});function U(v){G.type=v,v==="add"&&l.config.formAdd&&(G.form=l.config.formAdd),v==="edit"&&l.config.formEdit&&(G.form=l.config.formEdit),G.show=!0}function $(v,g){const q=l.config,c=q.actions;function t(){const x=c.length>0&&c[0].key===me;v&&v.fields.length>0?(A.value||B(),x||c.unshift({key:me,text:"编辑",type:"success",icon:"el-icon-edit"})):x&&c.splice(0,1)}v&&(G.type==="add"?(q.formAdd=v,g&&(q.formEdit=re(v),t())):(q.formEdit=v,g&&(q.formAdd=re(v)),t())),G.show=!1,G.form=null}function a(v){switch(v){case"delete":K();break;case"add":U("add");break;case"edit":U("edit");break}}const m=X(()=>y.value.drag.some(v=>!v.width&&!v.minWidth));function O(v){if(v==="complete"&&m.value){const g=Array.from(document.querySelectorAll(".fake-table-head")),q={};g.forEach(c=>{const t=c.dataset.head||"";t&&(q[t]=Math.round(c.clientWidth))}),l.config.columns.forEach(c=>{Object.prototype.hasOwnProperty.call(q,c.prop)&&(c.minWidth=q[c.prop])})}W("action",v)}return(v,g)=>{const q=b("el-empty"),c=b("el-button"),t=b("el-dropdown-item"),x=b("el-dropdown-menu"),h=b("el-dropdown"),Z=b("el-tooltip"),H=b("base-table-actions"),z=b("el-text");return i(),T(Y,null,[G.show?C("",!0):(i(),E(lt,{key:0,editMode:!0,config:l.config,onAction:a},null,8,["config"])),k("div",Vl,[G.show?(i(),E(ot,{key:0,config:G.form,type:G.type,editMode:!0,onChange:$},null,8,["config","type"])):(i(),E(Ve,{key:1,name:"the-group",tag:"div",class:"fake-table"},{default:o(()=>[l.config.columns.length?C("",!0):(i(),E(q,{key:"empty",style:{padding:"10px 40px"},"image-size":120,description:"请添加表格列"})),(i(!0),T(Y,null,ee(y.value.drag,(w,ae)=>(i(),T("div",{key:w.prop,"data-key":w.prop,class:"fake-table-item",draggable:y.value.drag.length>1,style:$e(_(w)),onDragstart:te=>D(P)(ae),onDragover:te=>D(Q)(te,ae),onDrop:g[0]||(g[0]=te=>D(I)())},[k("div",{class:"fake-table-head f-vertical","data-head":w.prop},[Sl,e(nt,{column:w},null,8,["column"])],8,$l),k("div",Cl,[e(h,{trigger:"click"},{dropdown:o(()=>[e(x,null,{default:o(()=>[(i(),T(Y,null,ee(s,te=>e(t,{key:te.key,onClick:Ce=>te.click(ae)},{default:o(()=>[k("i",{class:se(["el-icon--left",te.icon])},null,2),L(" "+ne(te.label),1)]),_:2},1032,["onClick"])),64))]),_:2},1024)]),default:o(()=>[e(c,{link:"",type:"primary"},{default:o(()=>[L(" 配置列 "),Tl]),_:1})]),_:2},1024)]),k("div",El,[w.cellType==="text"?(i(),T(Y,{key:0},[L("文本内容")],64)):w.cellType==="js"?(i(),T("span",Ml,"自定义代码")):C("",!0),e(D(tt),{column:w,src:d},null,8,["column"])])],44,Dl))),128)),A.value?(i(),T("div",{style:$e(_(A.value)),key:D(fe),class:"fake-table-item"},[Ul,k("div",Ol,[e(Z,{effect:"dark",content:"配置【操作按钮】和【操作列】的宽度",placement:"top"},{default:o(()=>[e(c,{circle:"",plain:"",type:"primary",size:"small",onClick:g[1]||(g[1]=w=>R())},{default:o(()=>[Nl]),_:1})]),_:1}),e(c,{circle:"",plain:"",type:"danger",size:"small",onClick:g[2]||(g[2]=w=>n())},{default:o(()=>[Wl]),_:1})]),k("div",Bl,[l.config.actions.length?(i(),E(H,{key:0,row:{},index:1,actions:l.config.actions},null,8,["actions"])):(i(),E(z,{key:1,type:"info"},{default:o(()=>[L("待添加操作~")]),_:1}))])],4)):C("",!0),k("div",ql,[k("div",null,[k("p",null,[e(c,{type:"primary",text:"",onClick:g[3]||(g[3]=w=>J("add"))},{default:o(()=>[Ll,L(" 添加内容列 ")]),_:1})]),A.value?C("",!0):(i(),T("p",Al,[e(c,{type:"primary",text:"",onClick:g[4]||(g[4]=w=>B())},{default:o(()=>[Fl,L(" 添加操作列 ")]),_:1})]))])])]),_:1}))]),G.show?C("",!0):(i(),T("div",Yl,[e(D(et),{type:G.type,onAction:O},null,8,["type"]),m.value?(i(),T("span",jl,[Jl,L(" 当前表格列配置中存在没配置【宽度/最小宽度】，保存时将自动设置最小宽度，提高表格美观性。 ")])):C("",!0)])),e(ol,{show:p.show,"onUpdate:show":g[5]||(g[5]=w=>p.show=w),type:p.type,keys:p.keys,form:p.form,onSubmit:j},null,8,["show","type","keys","form"]),e(sl,{show:F.show,"onUpdate:show":g[6]||(g[6]=w=>F.show=w),"select-key":F.keyword,onSubmit:S},null,8,["show","select-key"]),e(xl,{show:f.show,"onUpdate:show":g[7]||(g[7]=w=>f.show=w),columnWidth:f.columnWidth,actionMax:f.actionMax,list:l.config.actions,onSubmit:M},null,8,["show","columnWidth","actionMax","list"])],64)}}}),Rl={class:"the-curd-example"},Hl={name:"Example"},zl=ue({...Hl,props:{selected:{type:String},type:{type:String}},emits:["choose"],setup(r,{emit:u}){const l=r,W=u,d=[{...de("input"),placeholder:ce.input},{...de("select"),placeholder:ce.select},{...de("select-multiple"),placeholder:ce["select-multiple"]},{...de("cascader"),placeholder:ce.cascader},{...de("date"),placeholder:ce.date},{...de("checkbox"),options:[{label:"多选-A",value:1},{label:"多选-B",value:2}],defaultValue:[1]},{...de("radio"),options:[{label:"单选-A",value:"radio-1"},{label:"单选-B",value:"radio-2"}],defaultValue:"radio-1"},{...de("switch"),defaultValue:!0},{...de("textarea"),placeholder:ce.textarea},{...de("input-between"),placeholder:["范围区间操作","范围区间操作"]}],s=["radio","checkbox","textarea","switch"],p=X(()=>l.type==="search"?d.filter(y=>!s.includes(y.type)):d);return(y,J)=>(i(),T("div",Rl,[(i(!0),T(Y,null,ee(p.value,j=>(i(),E(xe,{key:j.type,"field-data":j,class:se(["the-curd-example-item fvc",{"the-curd-selected":l.selected===j.type}]),readonly:"",onClick:N=>W("choose",j.type)},null,8,["field-data","class","onClick"]))),128))]))}}),Kl={key:0,class:"the-curd-editor-content"},Gl=k("h2",{class:"the-title mgb-20"},"基础设置",-1),Zl={class:"f-vertical f-between mgb-20"},Xl=k("h2",{class:"the-title"},"第1步：点击选取组件",-1),Ql={class:"f-vertical mgb-20"},eo={class:"the-title"},to=k("div",{class:"f1"},null,-1),lo={key:0,class:"the-curd-target-box"},oo=k("i",{class:"el-icon-question the-tips-icon mgl-10"},null,-1),no=k("a",{href:"https://www.json.cn/",target:"_blank"}," JSON编辑工具 ",-1),ao=k("span",{class:"the-tag blue mgl-10"},"例如【英雄联盟-12】",-1),io={class:"f-right"},ro=k("i",{class:"el-icon--left el-icon-plus"},null,-1),so=k("i",{class:"el-icon--left el-icon-edit"},null,-1),uo={name:"Editor"},co=ue({...uo,props:{show:{type:Boolean,default:!1},config:{type:Object,required:!0}},emits:["update:show"],setup(r,{emit:u}){const l=r,W=u;function d(){W("update:show",!1)}const s=["checkbox","radio","switch"],p=["select","select-multiple","radio","checkbox","cascader"],y=["input","textarea","select","radio"],J=["input-between","select-multiple","checkbox","cascader"],j=["input","select","radio"],N=["daterange","datetimerange"],P=j.concat(J),Q=`<p>参考 src/utils/index.ts 中的${oe("formatDate")}函数</p>`,I=`
<p>动态表单项的条件显示逻辑函数；</p>
<p>返回${oe("false")}则不展示对应项；</p>
<p>函数有一个参数：${oe("formData")}为当前表单的数据值；</p>
<p>以${oe("return")}为函数代码片段标记；</p>
<p>例如：${oe("return formData.type !== 2")}</p>
`,_=We(),A=X(()=>_.editor.action==="add"),B=X(()=>{let c=[];return n.formData&&n.formData.type==="date"&&(c=qe[n.formData.dateType].map((x,h)=>({label:x.text,value:h}))),c.unshift({label:"将预览组件中的值设为默认",value:-1}),c}),n=ie({step:0,formData:void 0});function F(c){n.step=c}const K={label:{required:!0,message:"请输入功能标题",trigger:"blur"},key:{required:!0,trigger:"blur",validator(c,t,x){t?g.includes(t)?x(new Error("当前键值已经被占用！")):x():x(new Error("绑定的键值不能为空"))}},format:{required:!0,message:"格式化规则不能为空",trigger:"blur"},separator:{required:!0,message:"请输入串联符号",trigger:"blur"},defaultValue:{required:!0,trigger:"blur",validator(c,t,x){const h=G();h===!0?x():x(new Error(h)),x()}},options:{required:!0,trigger:"blur",validator(c,t,x){const h=U();h===!0?x():x(new Error(h))}}},S=_e(),f=ie({options:"",defaultValue:""});function R(c){c.type!=="date"&&(f.defaultValue=JSON.stringify({value:c.defaultValue})),p.includes(c.type)&&(f.options=JSON.stringify(c.options))}function M(c){var h;const t=_.editor,x=de(c,"",t.type==="search");n.formData=x,R(x),(h=S.value)==null||h.clearValidate(),F(1)}function G(){const c='输入的格式必须为 { "value": "input value" }',t=f.defaultValue;if(!t)return c;const x=n.formData.type,h=n.formData.valueType,Z=ce[x];try{const H=JSON.parse(t);if(!le(H,"object"))return c;if(x==="switch"&&!le(H.value,"boolean"))return`${Z}的绑定值应该为 boolean 类型`;if(J.includes(x)){if(!le(H.value,"array"))return`${Z}的绑定值应该为 array 类型`;if(h==="array<number>"&&H.value.some(z=>z!==""&&!le(z,"number")))return"数组中只能出现数字"}if(y.includes(x)&&!["string","number"].includes(Me(H.value)))return`${Z}的绑定值应该为 string/number 类型`;if(x==="date"){const z=n.formData;if(N.includes(z.dateType)){if(!le(H.value,"array"))return"范围日期绑定值应该为 array 类型"}else if(!le(H.value,"string"))return"日期类型绑定值应该为 string 类型"}if(j.includes(x)&&h==="number"&&H.value!==""&&!le(H.value,"number"))return`${Z}的绑定值应该为 number 类型`}catch(H){return console.warn("checkDefaultValue >>",H),c}return!0}function U(){const c=f.options;if(!c)return"选项数据不能为空！";try{const t=JSON.parse(c);if(!le(t,"array"))return"选项数据格式不正确，需要为数组类型！";const x=n.formData,h=x.optionSetting.value||"value",Z=[void 0,null];for(let H=0;H<t.length;H++){const z=t[H];if(!le(z,"object"))return"数组项必须为对象！";if(Z.includes(z[h]))return`数组项的值不能为${Z.join("/")}`;if(["array<number>","number"].includes(x.valueType)&&!le(z[h],"number")&&z[h]!=="")return"数组项的值必须为 number 类型"}return!0}catch(t){return console.warn("checkOptions >>",t),"不合法的JSON,注意使用双引号,结尾不能为逗号等"}}function $(){U()===!0&&(n.formData.options=JSON.parse(f.options))}function a(){if(G()===!0){const t=n.formData,x=JSON.parse(f.defaultValue).value;t.type!=="date"&&(t.defaultValue=x)}}function m(c){const t=Re.find(h=>h.value===c),x=n.formData;x.shortcutIndex="",N.includes(t.value)?(x.value=[],x.valueType="array"):(x.value="",x.valueType="string"),x.formatShow=t.formatShow,x.format=t.format}function O(c){return/^[+-]?(\d|([1-9]\d+))(\.\d+)?$/.test(c)}function v(){var c;(c=S.value)==null||c.validate(t=>{if(mt("#the-editor-form",t),!t)return;a(),p.includes(n.formData.type)&&$();const x=_.editor,h=JSON.parse(JSON.stringify(n.formData));if(p.includes(h.type)&&$(),h.valueType||(h.valueType=Me(h.defaultValue)),p.includes(h.type)&&["number","array<number>"].includes(h.valueType)){let H=h.optionSetting.value;H||(H="value",h.optionSetting.value=H);for(let z=0;z<h.options.length;z++){const w=h.options[z],ae=w[H];if([null,void 0].includes(ae))return pe.error("数据值字段与选项数据不匹配，请检查！");if(O(ae.toString()))w[H]=Number(ae);else{const te=w[h.optionSetting.label];return pe.error(`选项数据中【${te}】的值应该为数字！`)}}}h.type==="date"&&(h.shortcutIndex===-1&&(h.shortcutDate=h.value),h.value=h.valueType==="array"?[]:""),{search(H){H?l.config.search.list.push(h):l.config.search.list[x.index]=h},table(H){if(H){const z=JSON.parse(JSON.stringify(x.form.fields));z.push(h),x.form.fields=z}else{const z=JSON.parse(JSON.stringify(x.form.fields));z[x.index]=h,x.form.fields=z}}}[x.type](A.value),d()})}let g=[];function q(c){const t=_.editor;g=[],{search(){g=l.config.search.list.map(h=>h.key)},table(){g=t.form.fields.map(h=>h.key)}}[t.type](),c&&(g=g.filter(h=>h!==c))}return ge(()=>l.show,function(c){if(!c){n.formData=void 0;return}const t=_.editor;if(t.action==="add")n.step=0,n.formData=void 0,q();else{const x=t.index;({search(){n.formData=JSON.parse(JSON.stringify(l.config.search.list[x]))},table(){var Z;n.formData=JSON.parse(JSON.stringify((Z=t.form)==null?void 0:Z.fields[x]))}})[t.type](),R(n.formData),q(n.formData.key),n.step=1}}),(c,t)=>{const x=b("el-input-number"),h=b("el-form-item"),Z=b("el-switch"),H=b("el-form"),z=b("el-button"),w=b("el-input"),ae=b("el-text"),te=b("el-tooltip"),Ce=b("el-option"),Le=b("el-select");return i(),T("section",{class:se(["the-curd-editor the-curd-scrollbar",{"is-show":l.show}])},[e(rt,{name:"the-curd-editor-move"},{default:o(()=>{var Ae;return[l.show?(i(),T("div",Kl,[Gl,e(H,{"label-position":"right","label-width":"120px"},{default:o(()=>[D(_).editor.type==="search"?(i(),T(Y,{key:0},[e(h,{label:"整体标题宽度"},{default:o(()=>[e(x,{modelValue:l.config.search.labelWidth,"onUpdate:modelValue":t[0]||(t[0]=V=>l.config.search.labelWidth=V),class:"w-full","controls-position":"right",placeholder:"例如：120px"},null,8,["modelValue"])]),_:1}),e(h,{label:"标题靠右对齐"},{default:o(()=>[e(Z,{modelValue:l.config.search.labelRight,"onUpdate:modelValue":t[1]||(t[1]=V=>l.config.search.labelRight=V),"inline-prompt":"","active-text":"是","inactive-text":"否"},null,8,["modelValue"])]),_:1})],64)):C("",!0),D(_).editor.type==="table"&&D(_).editor.form?(i(),T(Y,{key:1},[e(h,{label:"表单宽度"},{default:o(()=>[e(x,{modelValue:D(_).editor.form.width,"onUpdate:modelValue":t[2]||(t[2]=V=>D(_).editor.form.width=V),class:"w-full","controls-position":"right",placeholder:"请输入宽度(px)",clearable:""},null,8,["modelValue"])]),_:1}),e(h,{label:"文字宽度"},{default:o(()=>[e(x,{modelValue:D(_).editor.form.labelWidth,"onUpdate:modelValue":t[3]||(t[3]=V=>D(_).editor.form.labelWidth=V),class:"w-full","controls-position":"right",placeholder:"请输入标题宽度(px)",clearable:""},null,8,["modelValue"])]),_:1}),e(h,{label:"文字靠右排版"},{default:o(()=>[e(Z,{modelValue:D(_).editor.form.labelPosition,"onUpdate:modelValue":t[4]||(t[4]=V=>D(_).editor.form.labelPosition=V),"inline-prompt":"","active-value":"right","inactive-value":"left","active-text":"是","inactive-text":"否"},null,8,["modelValue"])]),_:1})],64)):C("",!0)]),_:1}),n.step===0?(i(),T(Y,{key:0},[k("div",Zl,[Xl,e(z,{link:"",type:"primary",onClick:t[5]||(t[5]=V=>d())},{default:o(()=>[L("退出编辑")]),_:1})]),e(zl,{selected:(Ae=n.formData)==null?void 0:Ae.type,type:D(_).editor.type,onChoose:M},null,8,["selected","type"])],64)):C("",!0),n.step===1?(i(),T(Y,{key:1},[k("div",Ql,[k("h2",eo,"第2步：配置"+ne(D(ce)[n.formData.type]),1),to,e(z,{link:"",type:"success",onClick:t[6]||(t[6]=V=>F(0))},{default:o(()=>[L("上一步")]),_:1}),e(z,{link:"",type:"primary",onClick:t[7]||(t[7]=V=>d())},{default:o(()=>[L("退出编辑")]),_:1})]),n.formData?(i(),T("div",lo,[e(xe,{"field-data":n.formData,"edit-mode":""},null,8,["field-data"])])):C("",!0),n.formData?(i(),E(H,{key:1,id:"the-editor-form",ref_key:"formRef",ref:S,model:n.formData,rules:K,"label-position":"right","label-width":"128px"},{default:o(()=>[e(h,{label:"组件标题",prop:"label"},{default:o(()=>[e(w,{modelValue:n.formData.label,"onUpdate:modelValue":t[8]||(t[8]=V=>n.formData.label=V),clearable:"",placeholder:K.label.message},null,8,["modelValue","placeholder"])]),_:1}),e(h,{label:"绑定的键值",prop:"key"},{default:o(()=>[e(w,{modelValue:n.formData.key,"onUpdate:modelValue":t[9]||(t[9]=V=>n.formData.key=V),clearable:"",placeholder:"请输入绑定的键值"},null,8,["modelValue"])]),_:1}),e(h,{label:"标题宽度",prop:"labelWidth"},{default:o(()=>[e(x,{modelValue:n.formData.labelWidth,"onUpdate:modelValue":t[10]||(t[10]=V=>n.formData.labelWidth=V),class:"w-full","controls-position":"right",placeholder:"请输入宽度，例如：120"},null,8,["modelValue"])]),_:1}),s.includes(n.formData.type)?C("",!0):(i(),E(h,{key:0,label:"组件宽度",prop:"valueWidth"},{default:o(()=>[e(x,{modelValue:n.formData.valueWidth,"onUpdate:modelValue":t[11]||(t[11]=V=>n.formData.valueWidth=V),class:"w-full","controls-position":"right",placeholder:"请输入宽度，例如：140"},null,8,["modelValue"])]),_:1})),e(h,{label:"提示/规则文字",prop:"placeholder"},{default:o(()=>[n.formData.type==="input-between"?(i(),T(Y,{key:0},[e(w,{modelValue:n.formData.placeholder[0],"onUpdate:modelValue":t[12]||(t[12]=V=>n.formData.placeholder[0]=V),class:"f1",clearable:"",placeholder:"请输入提示-1"},null,8,["modelValue"]),e(ae,{style:{padding:"0 6px"}},{default:o(()=>[L("-")]),_:1}),e(w,{modelValue:n.formData.placeholder[1],"onUpdate:modelValue":t[13]||(t[13]=V=>n.formData.placeholder[1]=V),class:"f1",clearable:"",placeholder:"请输入提示-2"},null,8,["modelValue"])],64)):(i(),E(w,{key:1,modelValue:n.formData.placeholder,"onUpdate:modelValue":t[14]||(t[14]=V=>n.formData.placeholder=V),clearable:"",placeholder:"请输入规则提示/输入框提示文字"},null,8,["modelValue"]))]),_:1}),e(h,{label:"是否必填",prop:"required"},{default:o(()=>[e(Z,{modelValue:n.formData.required,"onUpdate:modelValue":t[15]||(t[15]=V=>n.formData.required=V),"inline-prompt":"","active-text":"是","inactive-text":"否"},null,8,["modelValue"])]),_:1}),D(P).includes(n.formData.type)?(i(),E(h,{label:"绑定值为数字类型",key:"is-number"},{default:o(()=>[J.includes(n.formData.type)?(i(),E(Z,{key:0,modelValue:n.formData.valueType,"onUpdate:modelValue":t[16]||(t[16]=V=>n.formData.valueType=V),"inline-prompt":"","active-text":"是","inactive-text":"否","active-value":"array<number>","inactive-value":"array"},null,8,["modelValue"])):(i(),E(Z,{key:1,modelValue:n.formData.valueType,"onUpdate:modelValue":t[17]||(t[17]=V=>n.formData.valueType=V),"inline-prompt":"","active-text":"是","inactive-text":"否","active-value":"number","inactive-value":"string"},null,8,["modelValue"])),p.includes(n.formData.type)?(i(),E(te,{key:2,effect:"dark",content:"设为数字类型之后，将会在保存时校验选项数据",placement:"top"},{default:o(()=>[oo]),_:1})):C("",!0)]),_:1})):C("",!0),n.formData.type!=="date"?(i(),E(h,{key:2,label:"组件默认值",prop:"defaultValue"},{default:o(()=>[e(w,{modelValue:f.defaultValue,"onUpdate:modelValue":t[18]||(t[18]=V=>f.defaultValue=V),type:"textarea",clearable:"",placeholder:"请输入JSON，值为 value",onBlur:t[19]||(t[19]=V=>a())},null,8,["modelValue"])]),_:1})):C("",!0),n.formData.type==="input-between"?(i(),E(h,{key:3,label:"串联符号",prop:"separator"},{default:o(()=>[e(w,{modelValue:n.formData.separator,"onUpdate:modelValue":t[20]||(t[20]=V=>n.formData.separator=V),clearable:"",placeholder:K.separator.message},null,8,["modelValue","placeholder"])]),_:1})):C("",!0),p.includes(n.formData.type)?(i(),T(Y,{key:4},[e(h,{label:"选项数据",prop:"options"},{default:o(()=>[e(w,{modelValue:f.options,"onUpdate:modelValue":t[21]||(t[21]=V=>f.options=V),type:"textarea",autosize:{minRows:2,maxRows:10},placeholder:"请输入数组JSON",style:{"margin-bottom":"4px"},onBlur:t[22]||(t[22]=V=>$())},null,8,["modelValue"]),e(z,{link:"",type:"primary"},{default:o(()=>[no]),_:1})]),_:1}),e(h,{label:"数据展示字段",prop:"optionSetting.label"},{default:o(()=>[e(w,{modelValue:n.formData.optionSetting.label,"onUpdate:modelValue":t[23]||(t[23]=V=>n.formData.optionSetting.label=V),clearable:"",placeholder:"不填则使用 label"},null,8,["modelValue"])]),_:1}),e(h,{label:"数据值字段",prop:"optionSetting.value"},{default:o(()=>[e(w,{modelValue:n.formData.optionSetting.value,"onUpdate:modelValue":t[24]||(t[24]=V=>n.formData.optionSetting.value=V),clearable:"",placeholder:"不填则使用 value"},null,8,["modelValue"])]),_:1}),n.formData.type==="cascader"?(i(),T(Y,{key:0},[e(h,{label:"下级字段",prop:"optionSetting.children"},{default:o(()=>[e(w,{modelValue:n.formData.optionSetting.children,"onUpdate:modelValue":t[25]||(t[25]=V=>n.formData.optionSetting.children=V),clearable:"",placeholder:"不填则使用 children"},null,8,["modelValue"])]),_:1}),e(h,{label:"是否多选",prop:"multiple"},{default:o(()=>[e(Z,{modelValue:n.formData.multiple,"onUpdate:modelValue":t[26]||(t[26]=V=>n.formData.multiple=V),"inline-prompt":"","active-text":"是","inactive-text":"否"},null,8,["modelValue"])]),_:1}),e(h,{label:"允许只选中某一项",prop:"checkStrictly"},{default:o(()=>[e(Z,{modelValue:n.formData.checkStrictly,"onUpdate:modelValue":t[27]||(t[27]=V=>n.formData.checkStrictly=V),"inline-prompt":"","active-text":"是","inactive-text":"否"},null,8,["modelValue"])]),_:1})],64)):C("",!0),["select","select-multiple"].includes(n.formData.type)?(i(),E(h,{key:1,label:"串联显示名称",prop:"joinShow"},{default:o(()=>[e(Z,{modelValue:n.formData.joinShow,"onUpdate:modelValue":t[28]||(t[28]=V=>n.formData.joinShow=V),"inline-prompt":"","active-text":"是","inactive-text":"否"},null,8,["modelValue"]),ao]),_:1})):C("",!0)],64)):C("",!0),n.formData.type==="date"?(i(),T(Y,{key:5},[e(h,{label:"日期类型",prop:"dateType"},{default:o(()=>[e(Le,{modelValue:n.formData.dateType,"onUpdate:modelValue":t[29]||(t[29]=V=>n.formData.dateType=V),class:"w-full",onChange:m},{default:o(()=>[(i(!0),T(Y,null,ee(D(Re),V=>(i(),E(Ce,{key:V.value,label:V.label,value:V.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(h,{label:"日期默认值",prop:"shortcutIndex"},{default:o(()=>[e(Le,{modelValue:n.formData.shortcutIndex,"onUpdate:modelValue":t[30]||(t[30]=V=>n.formData.shortcutIndex=V),class:"w-full",placeholder:"请选择",clearable:""},{default:o(()=>[(i(!0),T(Y,null,ee(B.value,V=>(i(),E(Ce,{key:V.value,label:V.label,value:V.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(h,{prop:"format"},{label:o(()=>[e(D(he),{label:"格式化规则",tips:Q})]),default:o(()=>[e(w,{modelValue:n.formData.format,"onUpdate:modelValue":t[31]||(t[31]=V=>n.formData.format=V),clearable:"",placeholder:K.format.message},null,8,["modelValue","placeholder"])]),_:1})],64)):C("",!0),D(_).editor.type==="table"?(i(),E(h,{key:6,prop:"show"},{label:o(()=>[e(D(he),{label:"表单显示逻辑",tips:I})]),default:o(()=>[e(w,{modelValue:n.formData.show,"onUpdate:modelValue":t[32]||(t[32]=V=>n.formData.show=V),type:"textarea",placeholder:"请输入条件代码，为空则默认展示"},null,8,["modelValue"])]),_:1})):C("",!0),k("div",io,[e(z,{onClick:t[33]||(t[33]=V=>d())},{default:o(()=>[L("关闭")]),_:1}),A.value?(i(),E(z,{key:0,type:"primary",onClick:t[34]||(t[34]=V=>v())},{default:o(()=>[ro,L(" 新增 ")]),_:1})):(i(),E(z,{key:1,type:"success",onClick:t[35]||(t[35]=V=>v())},{default:o(()=>[so,L(" 确认 ")]),_:1}))])]),_:1},8,["model"])):C("",!0)],64)):C("",!0)])):C("",!0)]}),_:1})],2)}}}),po={class:"the-curd-main-page"},fo={key:0,class:"the-tag blue"},mo=k("i",{class:"el-icon-arrow-left"},null,-1),vo=k("p",{class:"mgb-10"},"配置筛选相关功能",-1),yo=k("p",null,"配置表格相关功能",-1),ho={name:"Curd"},xo=ue({...ho,props:{data:{type:Object,required:!0},action:{type:Object,required:!0}},setup(r){const u=r,l=ie({loading:!1,editor:{show:!1,type:void 0,form:void 0,action:"add",index:-1},showEntrance:!1}),W=X(()=>{const a=l.editor.type;return a==="search"||!a&&u.data.search.list.length>0});st(Ge,l);let d;function s(a){l.editor.type=a,l.editor.show=!1,l.editor.index=-1,l.showEntrance=!1,d={[a]:re(u.data[a])}}function p(a){const m=l.editor.type;a&&d&&(u.data[m]=d[m]),l.editor.index=-1,l.editor.show=!1,l.editor.type=void 0,l.editor.form=void 0,d=void 0}function y(){p()}function J(){Je(JSON.stringify(u.data),()=>pe.success("复制成功！"))}function j(a){a&&u.data.search.list.forEach(Be),N.pageInfo.currentPage=1,N.selectList=[],M()}const N=ie({selectList:[],data:[],pageInfo:pt(),formShow:!1,formType:"add",formLoading:!1}),P=X(()=>u.data.table),Q=X(()=>P.value.columns.filter(m=>m.visible).map(m=>{const O={...m};return O.cellType==="js"&&O.jsCode&&(O.rawContent=function(v,g){let q="";try{q=new Function("cellValue","row",O.jsCode)(v,g)}catch(c){console.warn("解析 rawContent 代码错误 >>",c),q="-"}return q}),O})),I=X(()=>P.value.actions.map(m=>{const O={...m};return O.key===me&&(O.click=K),O})),_=X(()=>{const a=[],m=[];return Q.value.forEach(O=>{O.slotHead&&a.push(O.slotHead),O.slot&&m.push(O.slot)}),{head:a,cell:m}});function A(a){return P.value.columns.find(O=>O.prop===a)||{}}const B=_e(),n=X(()=>{const a=P.value,m={title:"编辑表单",config:a.formEdit||{}};return N.formType==="add"&&(m.title="新增表单",m.config=a.formAdd||{}),m});let F=null;function K(a){a?(N.formType="edit",F=a):N.formType="add",N.formShow=!0,setTimeout(()=>{var m;return(m=B.value)==null?void 0:m.clear()}),ze(()=>{var m;return F&&((m=B.value)==null?void 0:m.setFormData(F))})}function S(){var a;N.formShow=!1,(a=B.value)==null||a.reset(),F=null}function f(){var a;(a=B.value)==null||a.validate(async(m,O)=>{if(N.formType==="add"&&u.action.onAdd){N.formLoading=!0;const v=await u.action.onAdd(m,O);if(N.formLoading=!1,v.code!==1)return;S(),M()}if(N.formType==="edit"&&u.action.onEdit){N.formLoading=!0;const v=await u.action.onEdit(m,O);if(N.formLoading=!1,v.code!==1)return;S(),M()}})}function R(a){const m=u.data.search.list,O={};for(let c=0;c<m.length;c++){const t=m[c],x=Xe(t);if(t.required&&le(x.result,"string"))return vt(document.querySelector(`.${t.id}`)),pe.error(x.result),a&&a.key==="page"&&(N.pageInfo=a.before),null;x.result===!0&&(O[t.key]=x.value)}const v=P.value.columns,g=[],q=[];return a&&a.key==="sort"?v.forEach(c=>{c.sort&&(c.prop===a.prop?c.sort=a.action:c.sort=!0),c.sort==="asc"&&g.push(c.prop),c.sort==="desc"&&q.push(c.prop)}):v.forEach(c=>{c.sort==="asc"&&g.push(c.prop),c.sort==="desc"&&q.push(c.prop)}),g.length&&(O.asc=g.toString()),q.length&&(O.desc=q.toString()),O}async function M(a){const m=R(a);if(!m)return;const O=JSON.parse(JSON.stringify(N.pageInfo));l.loading=!0;const v=await u.action.getTableData(m,O);l.loading=!1,v.code===1&&(N.pageInfo.total=v.data.total,N.data=v.data.list||[])}function G(a){const m=N.selectList;switch(a){case"add":K();break;case"delete":if(!m.length)return pe.warning("请选择要删除的列表再进行操作~");ye({title:"操作提示",content:`是否删除选中的 ${m.length} 条数据？`,cancelText:"取消",async confirm(){u.action.onDelete?(l.loading=!0,(await u.action.onDelete(JSON.parse(JSON.stringify(N.selectList)))).code===1?(pe.success("删除成功！"),N.selectList=[],M()):l.loading=!1):pe.info("请设置 action.onDelete 删除逻辑")}});break;case"export":u.action.onExport?u.action.onExport():pe.info("请设置 action.onExport 导出逻辑");break}}function U(a){({exit:()=>p(!0),copy:J,complete:y})[a]()}function $(a){l.loading=a}return ht({formatDate:Ue,copyText:Je,messageBox:ye,message:pe,jsonToPath:ft,request:yt,getData:M,setLoading:$}),Ke(function(){u.action.created&&P.value.columns.length&&u.action.created(M)}),(a,m)=>{const O=b("base-table"),v=b("base-pagination"),g=b("el-button"),q=b("el-empty"),c=b("base-dialog");return i(),T("div",po,[k("section",{class:se([l.editor.show?"f1":"w-full"])},[W.value?(i(),E(St,{key:0,data:u.data.search,onSearch:j},null,8,["data"])):C("",!0),l.editor.type==="table"?(i(),E(Pl,{key:1,config:P.value,onAction:U},null,8,["config"])):l.editor.type==="search"?(i(),E(D(et),{key:2,onAction:U})):(i(),T(Y,{key:3},[P.value.columns.length>0?(i(),T(Y,{key:0},[e(lt,{config:P.value,disabled:l.loading,onAction:G},{left:o(()=>[P.value.selectKey?(i(),T("span",fo," 已选择 "+ne(N.selectList.length)+" 条数据 ",1)):C("",!0)]),_:1},8,["config","disabled"]),e(O,{"select-list":N.selectList,"onUpdate:selectList":m[1]||(m[1]=t=>N.selectList=t),data:N.data,columns:Q.value,actions:I.value,actionMax:P.value.actionMax,loading:l.loading,"select-key":P.value.selectKey},Ee({_:2},[ee(_.value.head,t=>({name:t,fn:o(({$index:x})=>[e(nt,{column:Q.value[P.value.selectKey?x-1:x],onSort:m[0]||(m[0]=(h,Z)=>M({key:"sort",prop:h,action:Z}))},null,8,["column"])])})),ee(_.value.cell,t=>({name:t,fn:o(({row:x})=>[e(D(tt),{column:A(t),src:x[t],previewList:_.value.cell.map(h=>x[h])},null,8,["column","src","previewList"])])}))]),1032,["select-list","data","columns","actions","actionMax","loading","select-key"]),e(v,{disabled:l.loading,pageInfo:N.pageInfo,onChange:m[2]||(m[2]=t=>M({key:"page",...t}))},null,8,["disabled","pageInfo"])],64)):(i(),E(q,{key:1,description:"当前页面没有表格配置数据，请配置后再操作~"},{default:o(()=>[e(g,{type:"primary",onClick:m[3]||(m[3]=t=>s("table"))},{default:o(()=>[L("去配置")]),_:1})]),_:1}))],64))],2),e(co,{show:l.editor.show,"onUpdate:show":m[4]||(m[4]=t=>l.editor.show=t),config:u.data},null,8,["show","config"]),e(c,{modelValue:N.formShow,"onUpdate:modelValue":m[7]||(m[7]=t=>N.formShow=t),title:n.value.title,width:D(ke)(n.value.config.width),onClose:m[8]||(m[8]=t=>S())},{footer:o(()=>[e(D(Se),{loading:N.formLoading,onClose:m[5]||(m[5]=t=>S()),onSubmit:m[6]||(m[6]=t=>f())},null,8,["loading"])]),default:o(()=>[e(ot,{ref_key:"formRef",ref:B,config:n.value.config,type:N.formType,disabled:N.formLoading},null,8,["config","type","disabled"])]),_:1},8,["modelValue","title","width"]),!l.showEntrance&&!l.editor.type?(i(),E(g,{key:0,class:"the-curd-entrance",type:"primary",size:"small",onClick:m[9]||(m[9]=t=>l.showEntrance=!0)},{default:o(()=>[mo]),_:1})):C("",!0),e(c,{modelValue:l.showEntrance,"onUpdate:modelValue":m[13]||(m[13]=t=>l.showEntrance=t),title:"请选择配置操作",width:"600px"},{footer:o(()=>[e(g,{onClick:m[12]||(m[12]=t=>l.showEntrance=!1)},{default:o(()=>[L("关 闭")]),_:1})]),default:o(()=>[k("div",{class:"the-curd-entrance-item",onClick:m[10]||(m[10]=t=>s("search"))},[vo,e(D(Tt))]),k("div",{class:"the-curd-entrance-item",onClick:m[11]||(m[11]=t=>s("table"))},[yo,e(D(Et))])]),_:1},8,["modelValue"])])}}});export{xo as _,Oe as a,me as b,fe as c,de as g};
