import{h as k,_ as q,k as ae,v as ne,l as se}from"./index-CFOkvG_t.js";import{d as L,g as R,a as re,w as Z,r as s,o as p,c as A,l,k as t,D,e as g,b as h,A as ie,t as T,F as z,q as F,v as J,N as M,O as K,T as H,s as P,u as B,p as S,x as j,j as Q,X as de,Y as me,K as ue,n as Y}from"./vendor-Bnlmm1jy.js";const pe=d=>(M("data-v-1a75fd3a"),d=d(),K(),d),ce=pe(()=>g("i",{class:"el-icon-search"},null,-1)),fe={style:{"min-height":"60vh"}},_e={class:"icon-list"},ve=["onClick"],ye={name:"IconList"},ge=L({...ye,props:{show:{type:Boolean,default:!1}},emits:["update:show","select"],setup(d,{emit:x}){const b=d,$=x,I=new RegExp("(?<=(svg\\/)).*?(?=(.svg))");function e(){return Object.keys(Object.assign({"/src/icons/svg/baidu.svg":()=>k(()=>import("./baidu-G3HCnM_1.js"),[],import.meta.url),"/src/icons/svg/delete.svg":()=>k(()=>import("./delete-DGStM_07.js"),[],import.meta.url),"/src/icons/svg/exit.svg":()=>k(()=>import("./exit-DzCSaLRv.js"),[],import.meta.url),"/src/icons/svg/github.svg":()=>k(()=>import("./github-BIRCMkmE.js"),[],import.meta.url),"/src/icons/svg/guide.svg":()=>k(()=>import("./guide-CIYHRhpW.js"),[],import.meta.url),"/src/icons/svg/hamburger.svg":()=>k(()=>import("./hamburger-CtMG0GaR.js"),[],import.meta.url),"/src/icons/svg/home.svg":()=>k(()=>import("./home-Bafwmf6r.js"),[],import.meta.url),"/src/icons/svg/menu.svg":()=>k(()=>import("./menu-CSo_dGFx.js"),[],import.meta.url),"/src/icons/svg/nested.svg":()=>k(()=>import("./nested-B_Pkj2Wl.js"),[],import.meta.url),"/src/icons/svg/svg-icon.svg":()=>k(()=>import("./svg-icon-fUzp9x0w.js"),[],import.meta.url),"/src/icons/svg/tree.svg":()=>k(()=>import("./tree-dO8jLoWf.js"),[],import.meta.url)})).map(u=>u.match(I)[0])}const v=e(),y=R({show:!1,keyword:""}),E=re(function(){return y.keyword?v.filter(r=>r.includes(y.keyword)):v});Z(()=>b.show,function(r){y.show=r});function C(){$("update:show",!1)}function U(r){C(),$("select",r)}return(r,m)=>{const w=s("el-input"),u=s("svg-icon"),o=s("el-icon"),f=s("el-text"),i=s("el-empty"),n=s("el-button"),_=s("base-dialog");return p(),A(_,{modelValue:y.show,"onUpdate:modelValue":m[2]||(m[2]=c=>y.show=c),title:"图标库",width:"922px",onClose:m[3]||(m[3]=c=>C())},{header:l(()=>[t(w,{modelValue:y.keyword,"onUpdate:modelValue":m[0]||(m[0]=c=>y.keyword=c),clearable:"",placeholder:"请输入关键字查找",style:{"max-width":"280px"}},{prefix:l(()=>[ce]),_:1},8,["modelValue"])]),footer:l(()=>[t(n,{style:{width:"120px"},onClick:m[1]||(m[1]=c=>C())},{default:l(()=>[D("关 闭")]),_:1})]),default:l(()=>[g("section",fe,[g("div",_e,[(p(!0),h(z,null,ie(E.value,c=>(p(),h("div",{class:"icon-item fvc",key:c,onClick:N=>U(c)},[t(o,{size:28},{default:l(()=>[t(u,{class:"mgb-10",name:c},null,8,["name"])]),_:2},1024),t(f,{size:"small"},{default:l(()=>[D(T(c),1)]),_:2},1024)],8,ve))),128))]),F(t(i,{description:"没有你想要的图标"},null,512),[[J,!E.value.length]])])]),_:1},8,["modelValue"])}}}),he=q(ge,[["__scopeId","data-v-1a75fd3a"]]),be=d=>(M("data-v-7cfcba70"),d=d(),K(),d),we={class:"drawer"},Ve={class:"drawer-header f-vertical"},ke={key:0,class:"f1"},De={key:1,class:"f1"},xe=be(()=>g("i",{class:"el-icon-close"},null,-1)),$e=[xe],Ie={class:"content"},Ee={key:0,class:"drawer-footer"},Ce=L({name:"Drawer"}),Se=L({...Ce,props:{zIndex:{type:[Number,String],default:0},size:{type:String,default:"30%"},show:{type:Boolean,default:!1},title:{type:String,default:""},backgroundColor:{type:String,default:""}},emits:["update:show","close"],setup(d,{emit:x}){const b=x,$=ae();function I(){b("close"),b("update:show",!1)}return(e,v)=>{const y=s("el-scrollbar");return p(),h("section",we,[t(H,{name:"fade"},{default:l(()=>[F(g("div",{class:"wrap",style:P({zIndex:Number(d.zIndex)||j($)})},[g("div",{class:"f1",onClick:v[0]||(v[0]=E=>I())}),t(H,{name:"drawer-slide"},{default:l(()=>[F(g("div",{class:"drawer-slide-box",style:P({width:d.size})},[g("div",Ve,[e.$slots.header?(p(),h("div",ke,[B(e.$slots,"header",{},void 0,!0)])):(p(),h("div",De,T(d.title),1)),g("button",{class:"close-btn",onClick:v[1]||(v[1]=E=>I())},$e)]),t(y,{class:"drawer-body f1",style:P({"background-color":d.backgroundColor})},{default:l(()=>[g("div",Ie,[B(e.$slots,"default",{},void 0,!0)])]),_:3},8,["style"]),e.$slots.footer?(p(),h("div",Ee,[B(e.$slots,"footer",{},void 0,!0)])):S("",!0)],4),[[J,d.show]])]),_:3})],4),[[J,d.show]])]),_:3})])}}}),Ue=q(Se,[["__scopeId","data-v-7cfcba70"]]),W=d=>(M("data-v-d65e007b"),d=d(),K(),d),Ae=W(()=>g("i",{class:"el-icon-question"},null,-1)),Oe={key:0,class:"fvc mgr-10"},Te=W(()=>g("i",{class:"el-icon-question"},null,-1)),Le={name:"Form"},Re=L({...Le,props:{show:{type:Boolean,default:!1},type:{type:String},form:{type:Object,default:()=>({})}},emits:["update:show","submit"],setup(d,{emit:x}){const b=d,$=x;function I(){return{code:"",redirect:"",path:"",component:"",name:"",sort:1,meta:{title:"",link:"",icon:"",hidden:!1,keepAlive:!1,type:"menu",status:1,lang:""}}}const e=R({show:!1,loading:!1,formData:I(),showIcon:!1}),v={"meta.icon":[{validator(u,o,f){!e.formData.parentId&&!o?f(new Error("首级菜单必需设置图标")):f()}}],"meta.title":[{required:!0,message:"请输入名称",trigger:"blur"}],code:[{required:!0,message:"请输入权限标识",trigger:"blur"}],name:[{trigger:"blur",validator(u,o,f){e.formData.meta.keepAlive&&!o?f(new Error("当设置路由缓存时，必需设置路由名称！")):f()}}]},y={component:'<p class="el-text">路径规则为：`src/views/<b class="el-text el-text--primary">${component}</b>.vue`</p><p class="el-text"><b class="el-text el-text--primary">component</b> 就是要填写的路径</p>',lang:`
  <p class="el-text">参考 src/language/zh.ts 中的语言对象结构</p>
  <p class="el-text">比如 <b class="el-text el-text--primary">login.account</b>、<b class="el-text el-text--primary">languageSetting</b> 等</p>
  `};function E(){$("update:show",!1)}const C=Q();function U(){console.log("formData >>",JSON.parse(JSON.stringify(e.formData))),C.value.validate(u=>{if(ne(".menu-form",u),!!u){if(e.formData.meta.type==="auth"&&!e.formData.parentId){de.error("功能权限必需选择上级菜单！");return}e.formData.parentId||(e.formData.component="Layout"),e.formData.path||(e.formData.path=`/auto-set-${Date.now()}`),$("submit",JSON.parse(JSON.stringify(e.formData))),E()}})}Z(()=>b.show,function(u){e.show=u,u&&(e.formData=b.type==="edit"?JSON.parse(JSON.stringify(b.form)):I(),setTimeout(()=>{C.value&&C.value.clearValidate()}))},{immediate:!0});const r=new Array(10).fill(0).map((u,o)=>{const f=o+1;return{value:f,label:`菜单-${f}`,children:new Array(6).fill(0).map((i,n)=>{const _=f*20+n;return{value:_,label:`菜单-${_}`}})}});function m(u){e.formData.meta.icon=u}function w(){e.formData.meta.status=1}return(u,o)=>{const f=s("el-tree-select"),i=s("el-form-item"),n=s("el-radio-button"),_=s("el-radio-group"),c=s("el-text"),N=s("el-divider"),V=s("el-input"),O=s("el-button"),X=s("el-tooltip"),ee=s("svg-icon"),te=s("el-icon"),oe=s("el-input-number"),G=s("el-switch"),le=s("el-form");return p(),A(j(Ue),{title:b.type==="edit"?"编辑菜单":"添加菜单",show:e.show,"onUpdate:show":o[22]||(o[22]=a=>e.show=a),size:"620px",onClose:o[23]||(o[23]=a=>E())},{footer:l(()=>[t(O,{onClick:o[20]||(o[20]=a=>E())},{default:l(()=>[D("取 消")]),_:1}),t(O,{onClick:o[21]||(o[21]=a=>U()),type:"primary"},{default:l(()=>[D("确 认")]),_:1})]),default:l(()=>[t(le,{"label-position":"left","label-width":"128px",class:"menu-form",ref_key:"formRef",ref:C,model:e.formData,rules:v},{default:l(()=>[t(i,{label:"上级菜单",prop:"parentId"},{default:l(()=>[t(f,{modelValue:e.formData.parentId,"onUpdate:modelValue":o[0]||(o[0]=a=>e.formData.parentId=a),placeholder:"请选择上级菜单",data:j(r),"check-strictly":"","render-after-expand":!1,clearable:"",filterable:""},null,8,["modelValue","data"])]),_:1}),t(i,{label:"类型",prop:"meta.type"},{default:l(()=>[t(_,{modelValue:e.formData.meta.type,"onUpdate:modelValue":o[1]||(o[1]=a=>e.formData.meta.type=a),onChange:o[2]||(o[2]=a=>w())},{default:l(()=>[t(n,{label:"菜单",value:"menu"}),t(n,{label:"权限功能",value:"auth"})]),_:1},8,["modelValue"])]),_:1}),e.formData.meta.type==="menu"?(p(),h(z,{key:0},[t(N,{"content-position":"left","border-style":"dashed"},{default:l(()=>[t(c,{type:"info"},{default:l(()=>[D("基础配置")]),_:1})]),_:1}),t(i,{label:"菜单名称",prop:"meta.title"},{default:l(()=>[t(V,{modelValue:e.formData.meta.title,"onUpdate:modelValue":o[3]||(o[3]=a=>e.formData.meta.title=a),clearable:"",placeholder:v["meta.title"][0].message},null,8,["modelValue","placeholder"])]),_:1}),t(i,{label:"菜单权限标识",prop:"code"},{default:l(()=>[t(V,{modelValue:e.formData.code,"onUpdate:modelValue":o[4]||(o[4]=a=>e.formData.code=a),clearable:"",placeholder:v.code[0].message},null,8,["modelValue","placeholder"])]),_:1}),t(i,{label:"路由路径",prop:"path"},{default:l(()=>[t(V,{modelValue:e.formData.path,"onUpdate:modelValue":o[5]||(o[5]=a=>e.formData.path=a),clearable:"",placeholder:"请确保路径唯一性，如不填，则在提交时自动设置"},null,8,["modelValue"])]),_:1}),t(i,{label:"视图组件路径",prop:"component"},{default:l(()=>[t(V,{class:"f1 mgr-10",modelValue:e.formData.component,"onUpdate:modelValue":o[6]||(o[6]=a=>e.formData.component=a),clearable:"",placeholder:"当为目录时可以不用填"},null,8,["modelValue"]),t(X,{effect:"light",placement:"top",content:y.component,"raw-content":""},{default:l(()=>[t(O,{type:"primary",plain:""},{default:l(()=>[Ae]),_:1})]),_:1},8,["content"])]),_:1}),t(i,{label:"重定向路径",prop:"redirect"},{default:l(()=>[t(V,{modelValue:e.formData.redirect,"onUpdate:modelValue":o[7]||(o[7]=a=>e.formData.redirect=a),clearable:"",placeholder:"当为目录且不填时，则默认拿下级第一项作为该值"},null,8,["modelValue"])]),_:1}),t(i,{label:"菜单图标",prop:"meta.icon"},{default:l(()=>[t(V,{class:"f1 mgr-10",modelValue:e.formData.meta.icon,"onUpdate:modelValue":o[8]||(o[8]=a=>e.formData.meta.icon=a),clearable:"",placeholder:"请选择或者输入图标"},null,8,["modelValue"]),e.formData.meta.icon?(p(),h("div",Oe,[t(te,{size:20,style:{color:"var(--el-color-primary)"}},{default:l(()=>[t(ee,{name:e.formData.meta.icon},null,8,["name"])]),_:1})])):S("",!0),t(O,{type:"primary",plain:"",onClick:o[9]||(o[9]=a=>e.showIcon=!0)},{default:l(()=>[D("选择图标")]),_:1})]),_:1}),t(N,{"content-position":"left","border-style":"dashed"},{default:l(()=>[t(c,{type:"info"},{default:l(()=>[D("辅助配置")]),_:1})]),_:1}),t(i,{label:"菜单排序",prop:"sort"},{default:l(()=>[t(oe,{modelValue:e.formData.sort,"onUpdate:modelValue":o[10]||(o[10]=a=>e.formData.sort=a),min:1},null,8,["modelValue"])]),_:1}),t(i,{label:"菜单隐藏",prop:"meta.hidden"},{default:l(()=>[t(G,{modelValue:e.formData.meta.hidden,"onUpdate:modelValue":o[11]||(o[11]=a=>e.formData.meta.hidden=a),"inline-prompt":"","active-text":"是","inactive-text":"否"},null,8,["modelValue"])]),_:1}),t(i,{label:"是否需要路由缓存",prop:"meta.keepAlive"},{default:l(()=>[t(G,{modelValue:e.formData.meta.keepAlive,"onUpdate:modelValue":o[12]||(o[12]=a=>e.formData.meta.keepAlive=a),"inline-prompt":"","active-text":"是","inactive-text":"否"},null,8,["modelValue"])]),_:1}),t(i,{label:"路由名称",prop:"name"},{default:l(()=>[t(V,{modelValue:e.formData.name,"onUpdate:modelValue":o[13]||(o[13]=a=>e.formData.name=a),clearable:"",placeholder:"请确保名称唯一性，否则路由缓存匹配会异常"},null,8,["modelValue"])]),_:1}),t(i,{label:"设置为外链",prop:"meta.link"},{default:l(()=>[t(V,{modelValue:e.formData.meta.link,"onUpdate:modelValue":o[14]||(o[14]=a=>e.formData.meta.link=a),clearable:"",placeholder:"设置外链时则覆盖路由路径"},null,8,["modelValue"])]),_:1}),t(i,{label:"多语言设置",prop:"meta.lang"},{default:l(()=>[t(V,{class:"f1 mgr-10",modelValue:e.formData.meta.lang,"onUpdate:modelValue":o[15]||(o[15]=a=>e.formData.meta.lang=a),clearable:"",placeholder:"请输入语言配置表中的键值"},null,8,["modelValue"]),t(X,{effect:"light",placement:"top",content:y.lang,"raw-content":""},{default:l(()=>[t(O,{type:"primary",plain:""},{default:l(()=>[Te]),_:1})]),_:1},8,["content"])]),_:1})],64)):(p(),h(z,{key:1},[t(i,{label:"功能名称",prop:"meta.title",key:"auth-title"},{default:l(()=>[t(V,{modelValue:e.formData.meta.title,"onUpdate:modelValue":o[16]||(o[16]=a=>e.formData.meta.title=a),clearable:"",placeholder:v["meta.title"][0].message},null,8,["modelValue","placeholder"])]),_:1}),t(i,{label:"功能权限标识",prop:"code",key:"auth"},{default:l(()=>[t(V,{modelValue:e.formData.code,"onUpdate:modelValue":o[17]||(o[17]=a=>e.formData.code=a),clearable:"",placeholder:v.code[0].message},null,8,["modelValue","placeholder"])]),_:1}),t(i,{label:"功能权限标识",prop:"meta.status",key:"status"},{default:l(()=>[t(_,{modelValue:e.formData.meta.status,"onUpdate:modelValue":o[18]||(o[18]=a=>e.formData.meta.status=a)},{default:l(()=>[t(n,{label:"正常",value:1}),t(n,{label:"停用",value:2})]),_:1},8,["modelValue"])]),_:1})],64))]),_:1},8,["model"]),t(he,{show:e.showIcon,"onUpdate:show":o[19]||(o[19]=a=>e.showIcon=a),onSelect:m},null,8,["show"])]),_:1},8,["title","show"])}}}),ze=q(Re,[["__scopeId","data-v-d65e007b"]]),Ne={class:"page-menu"},Pe={class:"table-content"},Be={key:5,style:{width:"100%","text-align":"right"}},je=L({__name:"index",setup(d){const x=R({show:!1,showType:"add"});function b(r){x.show=!0,x.showType=r}let $=0;function I(r,m=1,w,u){return Array.from({length:r}).map((o,f)=>{$++;const i=Math.random()>.5,n=`row-${$}`,_={id:n,name:"",parentId:u,code:"权限标识",path:`/xxx/${m}/${f}`,component:u?`/xxx/${m}/${f}`:"Layout",sort:1,redirect:"",meta:{title:`菜单-${m}-${f}`,icon:u?i?"Eleme":"":"Eleme",hidden:!1,keepAlive:!1,type:u?i?"menu":"auth":"menu",status:1}};return m<w&&(_.children=I(r,m+1,w,n)),_})}const e=Q(I(100,1,3));function v(r){console.log(r)}const y=[{title:"名称",width:320,key:"meta.title"},{title:"类型",width:100,key:"meta.type"},{title:"标识",width:140,key:"code"},{title:"菜单路径",width:140,key:"path"},{title:"排序",width:180,key:"sort"},{title:"启用",width:100,key:"meta.status"},{title:"隐藏",width:100,key:"meta.hidden"},{title:"操作",width:160,key:"option",fixed:me.RIGHT,headerClass:"justify-center"}];y.forEach(r=>{r.dataKey=r.key});function E(r){b("add")}function C(r){b("edit")}const U=R({width:0,height:0});return se({el:".table-content",callback(r){U.width=r.width,U.height=r.height}}),(r,m)=>{const w=s("el-button"),u=s("el-icon"),o=s("el-input-number"),f=s("el-switch"),i=s("el-table-v2");return p(),h("div",Ne,[g("div",null,[t(w,{onClick:m[0]||(m[0]=n=>b("add"))},{default:l(()=>[D("新增菜单")]),_:1})]),g("section",Pe,[t(i,{columns:y,data:e.value,width:U.width,height:U.height,"expand-column-key":"meta.title",fixed:""},{cell:l(({rowData:n,column:_})=>[_.key==="meta.title"?(p(),h(z,{key:0},[n.meta.icon?(p(),A(u,{key:0,class:"icon mr-[6px]"},{default:l(()=>[(p(),A(ue(n.meta.icon)))]),_:2},1024)):S("",!0),g("span",null,T(n.meta.title),1)],64)):S("",!0),_.key==="meta.type"?(p(),h("span",{key:1,class:Y(["the-tag",n.meta.type==="menu"?"blue":"green"])},T(n.meta.type==="menu"?"菜单":"权限"),3)):S("",!0),_.key==="sort"?(p(),A(o,{key:2,class:"w-[140px]",modelValue:n.sort,"onUpdate:modelValue":c=>n.sort=c,min:1,onBlur:c=>v(n)},null,8,["modelValue","onUpdate:modelValue","onBlur"])):S("",!0),_.key==="meta.status"?(p(),A(f,{key:3,modelValue:n.meta.status,"onUpdate:modelValue":c=>n.meta.status=c,"active-value":1,"inactive-value":2,"inline-prompt":"","active-text":"启用","inactive-text":"禁用"},null,8,["modelValue","onUpdate:modelValue"])):S("",!0),_.key==="meta.hidden"?(p(),h("span",{key:4,class:Y(["the-tag",n.meta.hidden?"red":"purple"])},T(n.meta.hidden?"是":"否"),3)):S("",!0),_.key==="option"?(p(),h("div",Be,[n.meta.type==="menu"?(p(),A(w,{key:0,link:"",type:"primary",onClick:c=>E(n)},{default:l(()=>[D("新增")]),_:2},1032,["onClick"])):S("",!0),t(w,{link:"",type:"success",onClick:c=>C(n)},{default:l(()=>[D("编辑")]),_:2},1032,["onClick"]),t(w,{link:"",type:"danger"},{default:l(()=>[D("删除")]),_:1})])):S("",!0)]),_:1},8,["data","width","height"])]),t(ze,{show:x.show,"onUpdate:show":m[1]||(m[1]=n=>x.show=n)},null,8,["show"])])}}});export{je as default};
