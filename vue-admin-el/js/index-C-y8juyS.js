import{v as ne}from"./dom-D4K-_gXQ.js";import{q as k,_ as M,t as se,v as re}from"./index-Djcm6DHg.js";import{d as N,r as z,h as ie,w as X,b as r,e as p,k as L,g as l,i as h,c as t,C as D,f as y,z as de,t as O,F as R,l as J,v as q,S as Q,U as W,T as G,m as F,q as j,p as S,u as A,j as Y,ay as me,az as ue,n as H}from"./element-plus-CetPY_yD.js";/* empty css              */import{L as K,j as T}from"./index.vue_vue_type_style_index_0_lang-DRS5iTuO.js";import"./config-BF4QLh-Z.js";const ee=c=>(Q("data-v-5fb05712"),c=c(),W(),c),pe={class:"f-vertical",style:{width:"100%"}},ce=ee(()=>h("span",{class:"el-icon--left",style:{"font-size":"16px"}},"svg 图标库：",-1)),fe=ee(()=>h("i",{class:"el-icon-search"},null,-1)),_e={style:{"min-height":"60vh"}},ve={class:"icon-list"},ge=["onClick"],he={name:"IconList"},ye=N({...he,props:{show:{type:Boolean,default:!1}},emits:["update:show","select"],setup(c,{emit:$}){const b=c,I=$,x=new RegExp("(?<=(svg\\/)).*?(?=(.svg))");function e(){return Object.keys(Object.assign({"/src/icons/svg/baidu.svg":()=>k(()=>import("./baidu-G3HCnM_1.js"),[],import.meta.url),"/src/icons/svg/delete.svg":()=>k(()=>import("./delete-DGStM_07.js"),[],import.meta.url),"/src/icons/svg/exit.svg":()=>k(()=>import("./exit-DzCSaLRv.js"),[],import.meta.url),"/src/icons/svg/github.svg":()=>k(()=>import("./github-BIRCMkmE.js"),[],import.meta.url),"/src/icons/svg/guide.svg":()=>k(()=>import("./guide-CIYHRhpW.js"),[],import.meta.url),"/src/icons/svg/hamburger.svg":()=>k(()=>import("./hamburger-CtMG0GaR.js"),[],import.meta.url),"/src/icons/svg/home.svg":()=>k(()=>import("./home-Bafwmf6r.js"),[],import.meta.url),"/src/icons/svg/menu.svg":()=>k(()=>import("./menu-CSo_dGFx.js"),[],import.meta.url),"/src/icons/svg/nested.svg":()=>k(()=>import("./nested-B_Pkj2Wl.js"),[],import.meta.url),"/src/icons/svg/svg-icon.svg":()=>k(()=>import("./svg-icon-fUzp9x0w.js"),[],import.meta.url),"/src/icons/svg/tree.svg":()=>k(()=>import("./tree-dO8jLoWf.js"),[],import.meta.url)})).map(m=>m.match(x)[0])}const v=e(),g=z({show:!1,keyword:""}),C=ie(function(){return g.keyword?v.filter(i=>i.includes(g.keyword)):v});function E(){I("update:show",!1)}function U(i){E(),I("select",i)}return X(()=>b.show,function(i){g.show=i},{immediate:!0}),(i,d)=>{const w=r("el-input"),m=r("svg-icon"),o=r("el-icon"),f=r("el-text"),s=r("el-empty"),n=r("el-button"),_=r("base-dialog");return p(),L(_,{show:g.show,"onUpdate:show":d[2]||(d[2]=u=>g.show=u),title:"图标库",width:"922px",onClose:d[3]||(d[3]=u=>E())},{header:l(()=>[h("div",pe,[ce,t(w,{modelValue:g.keyword,"onUpdate:modelValue":d[0]||(d[0]=u=>g.keyword=u),clearable:"",placeholder:"请输入关键字查找",style:{"max-width":"280px"}},{prefix:l(()=>[fe]),_:1},8,["modelValue"])])]),footer:l(()=>[t(n,{onClick:d[1]||(d[1]=u=>E())},{default:l(()=>[D("关 闭")]),_:1})]),default:l(()=>[h("section",_e,[h("div",ve,[(p(!0),y(R,null,de(C.value,u=>(p(),y("div",{class:"icon-item fvc",key:u,onClick:B=>U(u)},[t(o,{size:28},{default:l(()=>[t(m,{class:"mgb-10",name:u},null,8,["name"])]),_:2},1024),t(f,{size:"small"},{default:l(()=>[D(O(u),1)]),_:2},1024)],8,ge))),128))]),J(t(s,{description:"没有你想要的图标"},null,512),[[q,!C.value.length]])])]),_:1},8,["show"])}}}),be=M(ye,[["__scopeId","data-v-5fb05712"]]),we=c=>(Q("data-v-e7282f71"),c=c(),W(),c),Ve={class:"drawer"},ke={class:"drawer-header f-vertical"},De={key:0,class:"f1"},$e={key:1,class:"f1"},Ie=we(()=>h("i",{class:"el-icon-close"},null,-1)),xe=[Ie],Ce={class:"content"},Ee={key:0,class:"drawer-footer"},Se={name:"Drawer"},Ue=N({...Se,props:{zIndex:{type:[Number,String],default:0},size:{type:String,default:"30%"},show:{type:Boolean,default:!1},title:{type:String,default:""},backgroundColor:{type:String,default:""}},emits:["update:show","close"],setup(c,{emit:$}){const b=$,I=se();function x(){b("close"),b("update:show",!1)}return(e,v)=>{const g=r("el-scrollbar");return p(),y("section",Ve,[t(G,{name:"fade"},{default:l(()=>[J(h("div",{class:"wrap",style:F({zIndex:Number(c.zIndex)||A(I)})},[h("div",{class:"f1",onClick:v[0]||(v[0]=C=>x())}),t(G,{name:"drawer-slide"},{default:l(()=>[J(h("div",{class:"drawer-slide-box",style:F({width:c.size})},[h("div",ke,[e.$slots.header?(p(),y("div",De,[j(e.$slots,"header",{},void 0,!0)])):(p(),y("div",$e,O(c.title),1)),h("button",{class:"close-btn",onClick:v[1]||(v[1]=C=>x())},xe)]),t(g,{class:"drawer-body f1",style:F({"background-color":c.backgroundColor})},{default:l(()=>[h("div",Ce,[j(e.$slots,"default",{},void 0,!0)])]),_:3},8,["style"]),e.$slots.footer?(p(),y("div",Ee,[j(e.$slots,"footer",{},void 0,!0)])):S("",!0)],4),[[q,c.show]])]),_:3})],4),[[q,c.show]])]),_:3})])}}}),Le=M(Ue,[["__scopeId","data-v-e7282f71"]]),Ae={key:0,class:"fvc mgr-10"},Oe={name:"Form"},Te=N({...Oe,props:{show:{type:Boolean,default:!1},type:{type:String},form:{type:Object,default:()=>({})}},emits:["update:show","submit"],setup(c,{emit:$}){const b=c,I=$;function x(){return{code:"",redirect:"",path:"",component:"",name:"",sort:1,meta:{title:"",link:"",icon:"",hidden:!1,keepAlive:!1,type:"menu",status:1,lang:""}}}const e=z({show:!1,loading:!1,formData:x(),showIcon:!1}),v={"meta.icon":[{validator(m,o,f){!e.formData.parentId&&!o?f(new Error("首级菜单必需设置图标")):f()}}],"meta.title":[{required:!0,message:"请输入名称",trigger:"blur"}],code:[{required:!0,message:"请输入权限标识",trigger:"blur"}],name:[{trigger:"blur",validator(m,o,f){e.formData.meta.keepAlive&&!o?f(new Error("当设置路由缓存时，必需设置路由名称！")):f()}}]},g={component:`<p>路径规则为："src/views/${T("${component}")}.vue"</p><p>${T("component")}就是要填写的路径</p>`,lang:`
  <p>参考 src/language/zh.ts 中的语言对象结构</p>
  <p>比如 ${T("login.account")}、${T("languageSetting")} 等</p>
  `};function C(){I("update:show",!1)}const E=Y();function U(){console.log("formData >>",JSON.parse(JSON.stringify(e.formData))),E.value.validate(m=>{if(ne(".menu-form",m),!!m){if(e.formData.meta.type==="auth"&&!e.formData.parentId){me.error("功能权限必需选择上级菜单！");return}e.formData.parentId||(e.formData.component="Layout"),e.formData.path||(e.formData.path=`/auto-set-${Date.now()}`),I("submit",JSON.parse(JSON.stringify(e.formData))),C()}})}const i=new Array(10).fill(0).map((m,o)=>{const f=o+1;return{value:f,label:`菜单-${f}`,children:new Array(6).fill(0).map((s,n)=>{const _=f*20+n;return{value:_,label:`菜单-${_}`}})}});function d(m){e.formData.meta.icon=m}function w(){e.formData.meta.status=1}return X(()=>b.show,function(m){e.show=m,m&&(e.formData=b.type==="edit"?JSON.parse(JSON.stringify(b.form)):x(),E.value&&setTimeout(()=>E.value.clearValidate()))},{immediate:!0}),(m,o)=>{const f=r("el-tree-select"),s=r("el-form-item"),n=r("el-radio-button"),_=r("el-radio-group"),u=r("el-text"),B=r("el-divider"),V=r("el-input"),te=r("svg-icon"),oe=r("el-icon"),P=r("el-button"),le=r("el-input-number"),Z=r("el-switch"),ae=r("el-form");return p(),L(A(Le),{title:b.type==="edit"?"编辑菜单":"添加菜单",show:e.show,"onUpdate:show":o[22]||(o[22]=a=>e.show=a),size:"620px",onClose:o[23]||(o[23]=a=>C())},{footer:l(()=>[t(P,{onClick:o[20]||(o[20]=a=>C())},{default:l(()=>[D("取 消")]),_:1}),t(P,{onClick:o[21]||(o[21]=a=>U()),type:"primary"},{default:l(()=>[D("确 认")]),_:1})]),default:l(()=>[t(ae,{"label-position":"left","label-width":"128px",class:"menu-form",ref_key:"formRef",ref:E,model:e.formData,rules:v},{default:l(()=>[t(s,{label:"上级菜单",prop:"parentId"},{default:l(()=>[t(f,{modelValue:e.formData.parentId,"onUpdate:modelValue":o[0]||(o[0]=a=>e.formData.parentId=a),placeholder:"请选择上级菜单",data:A(i),"check-strictly":"","render-after-expand":!1,clearable:"",filterable:""},null,8,["modelValue","data"])]),_:1}),t(s,{label:"类型",prop:"meta.type"},{default:l(()=>[t(_,{modelValue:e.formData.meta.type,"onUpdate:modelValue":o[1]||(o[1]=a=>e.formData.meta.type=a),onChange:o[2]||(o[2]=a=>w())},{default:l(()=>[t(n,{label:"菜单",value:"menu"}),t(n,{label:"权限功能",value:"auth"})]),_:1},8,["modelValue"])]),_:1}),e.formData.meta.type==="menu"?(p(),y(R,{key:0},[t(B,{"content-position":"left","border-style":"dashed"},{default:l(()=>[t(u,{type:"info"},{default:l(()=>[D("基础配置")]),_:1})]),_:1}),t(s,{label:"菜单名称",prop:"meta.title"},{default:l(()=>[t(V,{modelValue:e.formData.meta.title,"onUpdate:modelValue":o[3]||(o[3]=a=>e.formData.meta.title=a),clearable:"",placeholder:v["meta.title"][0].message},null,8,["modelValue","placeholder"])]),_:1}),t(s,{label:"菜单权限标识",prop:"code"},{default:l(()=>[t(V,{modelValue:e.formData.code,"onUpdate:modelValue":o[4]||(o[4]=a=>e.formData.code=a),clearable:"",placeholder:v.code[0].message},null,8,["modelValue","placeholder"])]),_:1}),t(s,{label:"路由路径",prop:"path"},{default:l(()=>[t(V,{modelValue:e.formData.path,"onUpdate:modelValue":o[5]||(o[5]=a=>e.formData.path=a),clearable:"",placeholder:"请确保路径唯一性，如不填，则在提交时自动设置"},null,8,["modelValue"])]),_:1}),t(s,{prop:"component"},{label:l(()=>[t(A(K),{label:"视图组件路径",tips:g.component},null,8,["tips"])]),default:l(()=>[t(V,{modelValue:e.formData.component,"onUpdate:modelValue":o[6]||(o[6]=a=>e.formData.component=a),clearable:"",placeholder:"当为目录时可以不用填"},null,8,["modelValue"])]),_:1}),t(s,{label:"重定向路径",prop:"redirect"},{default:l(()=>[t(V,{modelValue:e.formData.redirect,"onUpdate:modelValue":o[7]||(o[7]=a=>e.formData.redirect=a),clearable:"",placeholder:"当为目录且不填时，则默认拿下级第一项作为该值"},null,8,["modelValue"])]),_:1}),t(s,{label:"菜单图标",prop:"meta.icon"},{default:l(()=>[t(V,{class:"f1 mgr-10",modelValue:e.formData.meta.icon,"onUpdate:modelValue":o[8]||(o[8]=a=>e.formData.meta.icon=a),clearable:"",placeholder:"请选择或者输入图标"},null,8,["modelValue"]),e.formData.meta.icon?(p(),y("div",Ae,[t(oe,{size:20,style:{color:"var(--el-color-primary)"}},{default:l(()=>[t(te,{name:e.formData.meta.icon},null,8,["name"])]),_:1})])):S("",!0),t(P,{type:"primary",plain:"",onClick:o[9]||(o[9]=a=>e.showIcon=!0)},{default:l(()=>[D("选择图标")]),_:1})]),_:1}),t(B,{"content-position":"left","border-style":"dashed"},{default:l(()=>[t(u,{type:"info"},{default:l(()=>[D("辅助配置")]),_:1})]),_:1}),t(s,{label:"菜单排序",prop:"sort"},{default:l(()=>[t(le,{modelValue:e.formData.sort,"onUpdate:modelValue":o[10]||(o[10]=a=>e.formData.sort=a),min:1},null,8,["modelValue"])]),_:1}),t(s,{label:"菜单隐藏",prop:"meta.hidden"},{default:l(()=>[t(Z,{modelValue:e.formData.meta.hidden,"onUpdate:modelValue":o[11]||(o[11]=a=>e.formData.meta.hidden=a),"inline-prompt":"","active-text":"是","inactive-text":"否"},null,8,["modelValue"])]),_:1}),t(s,{label:"是否需要路由缓存",prop:"meta.keepAlive"},{default:l(()=>[t(Z,{modelValue:e.formData.meta.keepAlive,"onUpdate:modelValue":o[12]||(o[12]=a=>e.formData.meta.keepAlive=a),"inline-prompt":"","active-text":"是","inactive-text":"否"},null,8,["modelValue"])]),_:1}),t(s,{label:"路由名称",prop:"name"},{default:l(()=>[t(V,{modelValue:e.formData.name,"onUpdate:modelValue":o[13]||(o[13]=a=>e.formData.name=a),clearable:"",placeholder:"请确保名称唯一性，否则路由缓存匹配会异常"},null,8,["modelValue"])]),_:1}),t(s,{label:"设置为外链",prop:"meta.link"},{default:l(()=>[t(V,{modelValue:e.formData.meta.link,"onUpdate:modelValue":o[14]||(o[14]=a=>e.formData.meta.link=a),clearable:"",placeholder:"设置外链时则覆盖路由路径"},null,8,["modelValue"])]),_:1}),t(s,{prop:"meta.lang"},{label:l(()=>[t(A(K),{label:"多语言设置",tips:g.lang},null,8,["tips"])]),default:l(()=>[t(V,{modelValue:e.formData.meta.lang,"onUpdate:modelValue":o[15]||(o[15]=a=>e.formData.meta.lang=a),clearable:"",placeholder:"请输入语言配置表中的键值"},null,8,["modelValue"])]),_:1})],64)):(p(),y(R,{key:1},[t(s,{label:"功能名称",prop:"meta.title",key:"auth-title"},{default:l(()=>[t(V,{modelValue:e.formData.meta.title,"onUpdate:modelValue":o[16]||(o[16]=a=>e.formData.meta.title=a),clearable:"",placeholder:v["meta.title"][0].message},null,8,["modelValue","placeholder"])]),_:1}),t(s,{label:"功能权限标识",prop:"code",key:"auth"},{default:l(()=>[t(V,{modelValue:e.formData.code,"onUpdate:modelValue":o[17]||(o[17]=a=>e.formData.code=a),clearable:"",placeholder:v.code[0].message},null,8,["modelValue","placeholder"])]),_:1}),t(s,{label:"功能权限标识",prop:"meta.status",key:"status"},{default:l(()=>[t(_,{modelValue:e.formData.meta.status,"onUpdate:modelValue":o[18]||(o[18]=a=>e.formData.meta.status=a)},{default:l(()=>[t(n,{label:"正常",value:1}),t(n,{label:"停用",value:2})]),_:1},8,["modelValue"])]),_:1})],64))]),_:1},8,["model"]),t(be,{show:e.showIcon,"onUpdate:show":o[19]||(o[19]=a=>e.showIcon=a),onSelect:d},null,8,["show"])]),_:1},8,["title","show"])}}}),ze=M(Te,[["__scopeId","data-v-63d3736b"]]),Re={class:"page-menu"},Ne={class:"table-content"},Be={key:5,style:{width:"100%","text-align":"right"}},Ze=N({__name:"index",setup(c){const $=z({show:!1,showType:"add"});function b(i){$.show=!0,$.showType=i}let I=0;function x(i,d=1,w,m){return Array.from({length:i}).map((o,f)=>{I++;const s=Math.random()>.5,n=`row-${I}`,_={id:n,name:"",parentId:m,code:"权限标识",path:`/xxx/${d}/${f}`,component:m?`/xxx/${d}/${f}`:"Layout",sort:1,redirect:"",meta:{title:`${s?"菜单":"权限"}-${d}-${f}`,icon:s?"menu":"guide",hidden:!1,keepAlive:!1,type:s?"menu":"auth",status:1}};return d<w&&(_.children=x(i,d+1,w,n)),_})}const e=Y(x(100,1,3));function v(i){console.log(i)}const g=[{title:"名称",width:320,key:"meta.title"},{title:"类型",width:100,key:"meta.type"},{title:"标识",width:140,key:"code"},{title:"菜单路径",width:140,key:"path"},{title:"排序",width:180,key:"sort"},{title:"启用",width:100,key:"meta.status"},{title:"隐藏",width:100,key:"meta.hidden"},{title:"操作",width:160,key:"option",fixed:ue.RIGHT,headerClass:"justify-center"}];g.forEach(i=>{i.dataKey=i.key});function C(i){b("add")}function E(i){b("edit")}const U=z({width:0,height:0});return re({el:".table-content",callback(i){U.width=i.width,U.height=i.height}}),(i,d)=>{const w=r("el-button"),m=r("svg-icon"),o=r("el-input-number"),f=r("el-switch"),s=r("el-table-v2");return p(),y("div",Re,[h("div",null,[t(w,{onClick:d[0]||(d[0]=n=>b("add"))},{default:l(()=>[D("新增菜单")]),_:1})]),h("section",Ne,[t(s,{columns:g,data:e.value,width:U.width,height:U.height,"expand-column-key":"meta.title",fixed:"",border:""},{cell:l(({rowData:n,column:_})=>[_.key==="meta.title"?(p(),y(R,{key:0},[n.meta.icon?(p(),L(m,{key:0,class:"el-icon--left",name:n.meta.icon},null,8,["name"])):S("",!0),h("span",null,O(n.meta.title),1)],64)):S("",!0),_.key==="meta.type"?(p(),y("span",{key:1,class:H(["the-tag",n.meta.type==="menu"?"blue":"green"])},O(n.meta.type==="menu"?"菜单":"权限"),3)):S("",!0),_.key==="sort"?(p(),L(o,{key:2,modelValue:n.sort,"onUpdate:modelValue":u=>n.sort=u,min:1,onBlur:u=>v(n)},null,8,["modelValue","onUpdate:modelValue","onBlur"])):S("",!0),_.key==="meta.status"?(p(),L(f,{key:3,modelValue:n.meta.status,"onUpdate:modelValue":u=>n.meta.status=u,"active-value":1,"inactive-value":2,"inline-prompt":"","active-text":"启用","inactive-text":"禁用"},null,8,["modelValue","onUpdate:modelValue"])):S("",!0),_.key==="meta.hidden"?(p(),y("span",{key:4,class:H(["the-tag",n.meta.hidden?"red":"purple"])},O(n.meta.hidden?"是":"否"),3)):S("",!0),_.key==="option"?(p(),y("div",Be,[n.meta.type==="menu"?(p(),L(w,{key:0,link:"",type:"primary",onClick:u=>C(n)},{default:l(()=>[D("新增")]),_:2},1032,["onClick"])):S("",!0),t(w,{link:"",type:"success",onClick:u=>E(n)},{default:l(()=>[D("编辑")]),_:2},1032,["onClick"]),t(w,{link:"",type:"danger"},{default:l(()=>[D("删除")]),_:1})])):S("",!0)]),_:1},8,["data","width","height"])]),t(ze,{show:$.show,"onUpdate:show":d[1]||(d[1]=n=>$.show=n)},null,8,["show"])])}}});export{Ze as default};
