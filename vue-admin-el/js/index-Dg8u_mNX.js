import{v as le}from"./dom-D4K-_gXQ.js";import{q as y,_ as q,t as ie,v as re}from"./index-DoZTiG-Q.js";import{h as P,r as B,s as de,w as X,l as S,e as d,b as l,f as n,g as p,k as J,d as v,y as ue,c as o,B as b,t as T,F as Z,v as M,V as Q,W as Y,T as K,n as U,m as D,j as F,u as O,i as ee,aB as me,aC as pe,D as W}from"./element-plus-BDbIiGck.js";import"./index-DBZFnIE4.js";import{j as z}from"./index.vue_vue_type_style_index_0_lang-B6YYTYYM.js";import{_ as j}from"./index.vue_vue_type_style_index_0_lang-DEXpIx08.js";import"./config-BF4QLh-Z.js";const te=u=>(Q("data-v-5fb05712"),u=u(),Y(),u),ce={class:"f-vertical",style:{width:"100%"}},_e=te(()=>p("span",{class:"el-icon--left",style:{"font-size":"16px"}},"svg 图标库：",-1)),fe=te(()=>p("i",{class:"el-icon-search"},null,-1)),he={style:{"min-height":"60vh"}},ye={class:"icon-list"},ve=["onClick"],ge={name:"IconList"},we=P({...ge,props:{show:{type:Boolean,default:!1}},emits:["update:show","select"],setup(u,{emit:k}){const h=u,$=k,I=new RegExp("(?<=(svg\\/)).*?(?=(.svg))");function g(){return Object.keys(Object.assign({"/src/icons/svg/baidu.svg":()=>y(()=>import("./baidu-G3HCnM_1.js"),[],import.meta.url),"/src/icons/svg/circle-close.svg":()=>y(()=>import("./circle-close-Dxn1Uyx-.js"),[],import.meta.url),"/src/icons/svg/delete.svg":()=>y(()=>import("./delete-DGStM_07.js"),[],import.meta.url),"/src/icons/svg/exit.svg":()=>y(()=>import("./exit-DzCSaLRv.js"),[],import.meta.url),"/src/icons/svg/github.svg":()=>y(()=>import("./github-BIRCMkmE.js"),[],import.meta.url),"/src/icons/svg/guide.svg":()=>y(()=>import("./guide-CIYHRhpW.js"),[],import.meta.url),"/src/icons/svg/hamburger.svg":()=>y(()=>import("./hamburger-CtMG0GaR.js"),[],import.meta.url),"/src/icons/svg/home.svg":()=>y(()=>import("./home-Bafwmf6r.js"),[],import.meta.url),"/src/icons/svg/menu.svg":()=>y(()=>import("./menu-CSo_dGFx.js"),[],import.meta.url),"/src/icons/svg/nested.svg":()=>y(()=>import("./nested-B_Pkj2Wl.js"),[],import.meta.url),"/src/icons/svg/search.svg":()=>y(()=>import("./search-Dsk8sIJU.js"),[],import.meta.url),"/src/icons/svg/svg-icon.svg":()=>y(()=>import("./svg-icon-fUzp9x0w.js"),[],import.meta.url),"/src/icons/svg/tree.svg":()=>y(()=>import("./tree-dO8jLoWf.js"),[],import.meta.url)})).map(V=>V.match(I)[0])}const c=g(),_=B({show:!1,keyword:""}),E=de(function(){return _.keyword?c.filter(s=>s.includes(_.keyword)):c});function C(){$("update:show",!1)}function t(s){C(),$("select",s)}return X(()=>h.show,function(s){_.show=s},{immediate:!0}),(s,a)=>{const w=l("el-input"),V=l("svg-icon"),L=l("el-icon"),x=l("el-text"),m=l("el-empty"),e=l("el-button"),i=l("base-dialog");return d(),S(i,{show:_.show,"onUpdate:show":a[2]||(a[2]=r=>_.show=r),title:"图标库",width:"922px",onClose:a[3]||(a[3]=r=>C())},{header:n(()=>[p("div",ce,[_e,o(w,{modelValue:_.keyword,"onUpdate:modelValue":a[0]||(a[0]=r=>_.keyword=r),clearable:"",placeholder:"请输入关键字查找",style:{"max-width":"280px"}},{prefix:n(()=>[fe]),_:1},8,["modelValue"])])]),footer:n(()=>[o(e,{onClick:a[1]||(a[1]=r=>C())},{default:n(()=>[b("关 闭")]),_:1})]),default:n(()=>[p("section",he,[p("div",ye,[(d(!0),v(Z,null,ue(E.value,r=>(d(),v("div",{class:"icon-item fvc",key:r,onClick:A=>t(r)},[o(L,{size:28},{default:n(()=>[o(V,{class:"mgb-10",name:r},null,8,["name"])]),_:2},1024),o(x,{size:"small"},{default:n(()=>[b(T(r),1)]),_:2},1024)],8,ve))),128))]),J(o(m,{description:"没有你想要的图标"},null,512),[[M,!E.value.length]])])]),_:1},8,["show"])}}}),be=q(we,[["__scopeId","data-v-5fb05712"]]),ke=u=>(Q("data-v-e7282f71"),u=u(),Y(),u),$e={class:"drawer"},Ie={class:"drawer-header f-vertical"},Ve={key:0,class:"f1"},De={key:1,class:"f1"},xe=ke(()=>p("i",{class:"el-icon-close"},null,-1)),Ee=[xe],Ce={class:"content"},Se={key:0,class:"drawer-footer"},Le={name:"Drawer"},Oe=P({...Le,props:{zIndex:{type:[Number,String],default:0},size:{type:String,default:"30%"},show:{type:Boolean,default:!1},title:{type:String,default:""},backgroundColor:{type:String,default:""}},emits:["update:show","close"],setup(u,{emit:k}){const h=k,$=ie();function I(){h("close"),h("update:show",!1)}return(g,c)=>{const _=l("el-scrollbar");return d(),v("section",$e,[o(K,{name:"fade"},{default:n(()=>[J(p("div",{class:"wrap",style:U({zIndex:Number(u.zIndex)||O($)})},[p("div",{class:"f1",onClick:c[0]||(c[0]=E=>I())}),o(K,{name:"drawer-slide"},{default:n(()=>[J(p("div",{class:"drawer-slide-box",style:U({width:u.size})},[p("div",Ie,[g.$slots.header?(d(),v("div",Ve,[F(g.$slots,"header",{},void 0,!0)])):(d(),v("div",De,T(u.title),1)),p("button",{class:"close-btn",onClick:c[1]||(c[1]=E=>I())},Ee)]),o(_,{class:"drawer-body f1",style:U({"background-color":u.backgroundColor})},{default:n(()=>[p("div",Ce,[F(g.$slots,"default",{},void 0,!0)])]),_:3},8,["style"]),g.$slots.footer?(d(),v("div",Se,[F(g.$slots,"footer",{},void 0,!0)])):D("",!0)],4),[[M,u.show]])]),_:3})],4),[[M,u.show]])]),_:3})])}}}),Ae=q(Oe,[["__scopeId","data-v-e7282f71"]]),Te={key:0,class:"fvc mgr-10"},Re={name:"Form"},ze=P({...Re,props:{show:{type:Boolean,default:!1},type:{type:String},form:{type:Object,default:()=>({})}},emits:["update:show","submit"],setup(u,{emit:k}){const h=u,$=k;function I(){return{code:"",redirect:"",path:"",component:"",name:"",sort:1,meta:{title:"",link:"",icon:"",hidden:!1,keepAlive:!1,type:"menu",status:1,lang:""}}}const g={component:`<p>路径规则为："src/views/${z("${component}")}.vue"</p><p>${z("component")}就是要填写的路径</p>`,lang:`
  <p>参考 src/language/zh.ts 中的语言对象结构</p>
  <p>比如 ${z("login.account")}、${z("languageSetting")} 等</p>
  `},c={"meta.icon":{validator(m,e,i){!t.formData.parentId&&!e?i(new Error("首级菜单必需设置图标")):i()}},"meta.title":{required:!0,message:"请输入名称",trigger:"blur"},code:{required:!0,message:"请输入权限标识",trigger:"blur"},name:{trigger:"blur",validator(m,e,i){t.formData.meta.keepAlive&&!e?i(new Error("当设置路由缓存时，必需设置路由名称！")):i()}}},_=[{label:"菜单名称",prop:"meta.title",type:"input",placeholder:c["meta.title"].message},{label:"菜单权限标识",prop:"code",type:"input",placeholder:c.code.message},{label:"路由路径",prop:"path",type:"input",placeholder:"请确保路径唯一性，如不填，则在提交时自动设置"},{label:"视图组件路径",prop:"component",type:"input",placeholder:"当为目录时可以不用填",tooltip:g.component},{label:"重定向路径",prop:"redirect",type:"input",placeholder:"当为目录且不填时，则默认拿下级第一项作为该值"}],E=[{label:"菜单排序",prop:"sort",type:"number",placeholder:"请输入排序值",min:1},{label:"菜单隐藏",prop:"meta.hidden",type:"switch"},{label:"是否需要路由缓存",prop:"meta.keepAlive",type:"switch"},{label:"路由名称",prop:"name",type:"input",placeholder:"请确保名称唯一性，否则路由缓存匹配会异常"},{label:"设置为外链",prop:"meta.link",type:"input",placeholder:"设置外链时则覆盖路由路径"},{label:"多语言设置",prop:"meta.lang",type:"input",placeholder:"请输入语言配置表中的键值",tooltip:g.lang}],C=[{label:"权限标识",prop:"code",type:"input",placeholder:"请输入权限标识"},{label:"权限名称",prop:"meta.title",type:"input",placeholder:c["meta.title"].message},{label:"权限状态",prop:"meta.status",type:"select",options:[{label:"正常",value:1},{label:"停用",value:2}]}],t=B({show:!1,loading:!1,formData:I(),showIcon:!1});function s(){$("update:show",!1)}const a=ee();function w(){console.log("formData >>",JSON.parse(JSON.stringify(t.formData))),a.value.validate(m=>{if(le(".menu-form",m),!!m){if(t.formData.meta.type==="auth"&&!t.formData.parentId){me.error("功能权限必需选择上级菜单！");return}t.formData.parentId||(t.formData.component="Layout"),t.formData.path||(t.formData.path=`/auto-set-${Date.now()}`),$("submit",JSON.parse(JSON.stringify(t.formData))),s()}})}const V=new Array(10).fill(0).map((m,e)=>{const i=e+1;return{value:i,label:`菜单-${i}`,children:new Array(6).fill(0).map((r,A)=>{const R=i*20+A;return{value:R,label:`菜单-${R}`}})}});function L(m){t.formData.meta.icon=m}function x(){t.formData.meta.status=1}return X(()=>h.show,function(m){t.show=m,m&&(t.formData=h.type==="edit"?JSON.parse(JSON.stringify(h.form)):I(),a.value&&setTimeout(()=>a.value.clearValidate()))},{immediate:!0}),(m,e)=>{const i=l("el-tree-select"),r=l("el-form-item"),A=l("el-radio-button"),R=l("el-radio-group"),G=l("el-text"),H=l("el-divider"),oe=l("el-input"),ne=l("svg-icon"),se=l("el-icon"),N=l("el-button"),ae=l("el-form");return d(),S(O(Ae),{title:h.type==="edit"?"编辑菜单":"添加菜单",show:t.show,"onUpdate:show":e[8]||(e[8]=f=>t.show=f),size:"620px",onClose:e[9]||(e[9]=f=>s())},{footer:n(()=>[o(N,{onClick:e[6]||(e[6]=f=>s())},{default:n(()=>[b("取 消")]),_:1}),o(N,{onClick:e[7]||(e[7]=f=>w()),type:"primary"},{default:n(()=>[b("确 认")]),_:1})]),default:n(()=>[o(ae,{"label-position":"left","label-width":"128px",class:"menu-form",ref_key:"formRef",ref:a,model:t.formData,rules:c},{default:n(()=>[o(r,{label:"上级菜单",prop:"parentId"},{default:n(()=>[o(i,{modelValue:t.formData.parentId,"onUpdate:modelValue":e[0]||(e[0]=f=>t.formData.parentId=f),placeholder:"请选择上级菜单",data:O(V),"check-strictly":"","render-after-expand":!1,clearable:"",filterable:""},null,8,["modelValue","data"])]),_:1}),o(r,{label:"类型",prop:"meta.type"},{default:n(()=>[o(R,{modelValue:t.formData.meta.type,"onUpdate:modelValue":e[1]||(e[1]=f=>t.formData.meta.type=f),onChange:e[2]||(e[2]=f=>x())},{default:n(()=>[o(A,{label:"菜单",value:"menu"}),o(A,{label:"权限功能",value:"auth"})]),_:1},8,["modelValue"])]),_:1}),t.formData.meta.type==="menu"?(d(),v(Z,{key:0},[o(H,{"content-position":"left","border-style":"dashed"},{default:n(()=>[o(G,{type:"info"},{default:n(()=>[b("基础配置")]),_:1})]),_:1}),o(O(j),{data:t.formData,list:_},null,8,["data"]),o(r,{label:"菜单图标",prop:"meta.icon"},{default:n(()=>[o(oe,{class:"f1 mgr-10",modelValue:t.formData.meta.icon,"onUpdate:modelValue":e[3]||(e[3]=f=>t.formData.meta.icon=f),clearable:"",placeholder:"请选择或者输入图标"},null,8,["modelValue"]),t.formData.meta.icon?(d(),v("div",Te,[o(se,{size:20,style:{color:"var(--el-color-primary)"}},{default:n(()=>[o(ne,{name:t.formData.meta.icon},null,8,["name"])]),_:1})])):D("",!0),o(N,{type:"primary",plain:"",onClick:e[4]||(e[4]=f=>t.showIcon=!0)},{default:n(()=>[b("选择图标")]),_:1})]),_:1}),o(H,{"content-position":"left","border-style":"dashed"},{default:n(()=>[o(G,{type:"info"},{default:n(()=>[b("辅助配置")]),_:1})]),_:1}),o(O(j),{data:t.formData,list:E},null,8,["data"])],64)):(d(),S(O(j),{key:1,data:t.formData,list:C},null,8,["data"]))]),_:1},8,["model"]),o(be,{show:t.showIcon,"onUpdate:show":e[5]||(e[5]=f=>t.showIcon=f),onSelect:L},null,8,["show"])]),_:1},8,["title","show"])}}}),Be=q(ze,[["__scopeId","data-v-7f0c6cc6"]]),Pe={class:"page-menu"},Ne={class:"table-content"},Ue={key:5,style:{width:"100%","text-align":"right"}},He=P({__name:"index",setup(u){const k=B({show:!1,showType:"add"});function h(s){k.show=!0,k.showType=s}let $=0;function I(s,a=1,w,V){return Array.from({length:s}).map((L,x)=>{$++;const m=Math.random()>.5,e=`row-${$}`,i={id:e,name:"",parentId:V,code:"权限标识",path:`/xxx/${a}/${x}`,component:V?`/xxx/${a}/${x}`:"Layout",sort:1,redirect:"",meta:{title:`${m?"菜单":"权限"}-${a}-${x}`,icon:m?"menu":"guide",hidden:!1,keepAlive:!1,type:m?"menu":"auth",status:1}};return a<w&&(i.children=I(s,a+1,w,e)),i})}const g=ee(I(100,1,3));function c(s){console.log(s)}const _=[{title:"名称",width:320,key:"meta.title"},{title:"类型",width:100,key:"meta.type"},{title:"标识",width:140,key:"code"},{title:"菜单路径",width:140,key:"path"},{title:"排序",width:180,key:"sort"},{title:"启用",width:100,key:"meta.status"},{title:"隐藏",width:100,key:"meta.hidden"},{title:"操作",width:160,key:"option",fixed:pe.RIGHT,headerClass:"justify-center"}];_.forEach(s=>{s.dataKey=s.key});function E(s){h("add")}function C(s){h("edit")}const t=B({width:0,height:0});return re({el:".table-content",callback(s){t.width=s.width,t.height=s.height}}),(s,a)=>{const w=l("el-button"),V=l("svg-icon"),L=l("el-input-number"),x=l("el-switch"),m=l("el-table-v2");return d(),v("div",Pe,[p("div",null,[o(w,{onClick:a[0]||(a[0]=e=>h("add"))},{default:n(()=>[b("新增菜单")]),_:1})]),p("section",Ne,[o(m,{columns:_,data:g.value,width:t.width,height:t.height,"expand-column-key":"meta.title",fixed:"",border:""},{cell:n(({rowData:e,column:i})=>[i.key==="meta.title"?(d(),v(Z,{key:0},[e.meta.icon?(d(),S(V,{key:0,class:"el-icon--left",name:e.meta.icon},null,8,["name"])):D("",!0),p("span",null,T(e.meta.title),1)],64)):D("",!0),i.key==="meta.type"?(d(),v("span",{key:1,class:W(["the-tag",e.meta.type==="menu"?"blue":"green"])},T(e.meta.type==="menu"?"菜单":"权限"),3)):D("",!0),i.key==="sort"?(d(),S(L,{key:2,modelValue:e.sort,"onUpdate:modelValue":r=>e.sort=r,min:1,onBlur:r=>c(e)},null,8,["modelValue","onUpdate:modelValue","onBlur"])):D("",!0),i.key==="meta.status"?(d(),S(x,{key:3,modelValue:e.meta.status,"onUpdate:modelValue":r=>e.meta.status=r,"active-value":1,"inactive-value":2,"inline-prompt":"","active-text":"启用","inactive-text":"禁用"},null,8,["modelValue","onUpdate:modelValue"])):D("",!0),i.key==="meta.hidden"?(d(),v("span",{key:4,class:W(["the-tag",e.meta.hidden?"red":"purple"])},T(e.meta.hidden?"是":"否"),3)):D("",!0),i.key==="option"?(d(),v("div",Ue,[e.meta.type==="menu"?(d(),S(w,{key:0,link:"",type:"primary",onClick:r=>E(e)},{default:n(()=>[b("新增")]),_:2},1032,["onClick"])):D("",!0),o(w,{link:"",type:"success",onClick:r=>C(e)},{default:n(()=>[b("编辑")]),_:2},1032,["onClick"]),o(w,{link:"",type:"danger"},{default:n(()=>[b("删除")]),_:1})])):D("",!0)]),_:1},8,["data","width","height"])]),o(Be,{show:k.show,"onUpdate:show":a[1]||(a[1]=e=>k.show=e)},null,8,["show"])])}}});export{He as default};
