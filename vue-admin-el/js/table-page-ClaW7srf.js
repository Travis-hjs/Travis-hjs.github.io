import{O as b,S as y,d as S,g as k,f as w,r as x,P as C,a as m}from"./index-Da4p7Ns4.js";import{d as _,g as L,k as P,i as I,m as u,c as i,u as s,A as $,l as A,q as B,C as v,aA as W,r as q,o as z,h as D}from"./element-plus-D8VYLuQe.js";import{_ as F}from"./Table.vue_vue_type_script_setup_true_lang-CnEKXaiR.js";const O={name:"SearchHeader"},T=_({...O,props:{loading:Boolean,labelWidth:String,searchInfo:{type:Object,required:!0},list:{type:Array,required:!0}},emits:["search"],setup(h,{emit:r}){const o=h,d=r,p=L(()=>o.list.filter(e=>e.type==="slot").map(e=>e.slotName));function g(e){d("search",e)}return(e,f)=>(I(),P(s(S),{"label-width":o.labelWidth},{right:u(()=>[i(s(y),{loading:o.loading,onSearch:g},null,8,["loading"])]),default:u(()=>[i(s(b),{type:"search",data:o.searchInfo,list:o.list},$({_:2},[A(p.value,n=>({name:n,fn:u(c=>[B(e.$slots,n,v(W(c)))])}))]),1032,["data","list"])]),_:3},8,["label-width"]))}}),U={class:"the-common-table-page"},E=_({__name:"table-page",setup(h){function r(){return{}}const o=[{label:"查询名称",prop:"keyword",type:"input",placeholder:"请输入查询关键字"},{label:"日期范围",prop:"date",type:"date",dateType:"datetimerange",bind:["start","end"],placeholder:"请选择日期",class:"w-[380px]"}],d=[{title:"ID",prop:"id",width:80},{title:"名称",prop:"name",minWidth:180,sort:"asc"},{title:"类型",prop:"type",width:100,sort:!0},{title:"日期",prop:"date",width:180,sort:"desc"},{title:"操作",prop:"action-right",width:140}],p=[{text:"新增",icon:"el-icon-plus",click(){m.info("新增")}}],g=[{text:"编辑",icon:"el-icon-edit",type:"success",click(a){m.success(`编辑: ${a.name}`)}},{text:"删除",icon:"el-icon-delete",type:"danger",click(a){m.error(`删除: ${a.name}`)}}],e=q({loading:!1,data:[],selectList:[],pageInfo:k(),searchFields:o,searchInfo:r(),tableColumns:d}),f=Array.from({length:62}).map((a,t)=>({id:t+1,name:x(2,40),date:w(),type:Math.random()<.5?"正常":"异常"}));async function n(){console.log("pageInfo >>",e.pageInfo);const a=e.pageInfo.pageSize,t=e.pageInfo.currentPage;e.data=f.slice((t-1)*a,t*a),e.pageInfo.total=f.length}function c(a){a&&(e.searchInfo=r()),e.pageInfo.currentPage=1,n()}return z(function(){c()}),(a,t)=>(I(),D("div",U,[i(s(T),{"search-info":e.searchInfo,list:e.searchFields,loading:e.loading,onSearch:c},null,8,["search-info","list","loading"]),i(s(C),{columns:e.tableColumns,"onUpdate:columns":t[0]||(t[0]=l=>e.tableColumns=l),operations:p,loading:e.loading},null,8,["columns","loading"]),i(s(F),{class:"f1","select-key":"id","sort-multiple":"","select-list":e.selectList,"onUpdate:selectList":t[1]||(t[1]=l=>e.selectList=l),"page-info":e.pageInfo,"onUpdate:pageInfo":t[2]||(t[2]=l=>e.pageInfo=l),columns:e.tableColumns,data:e.data,actions:g,loading:e.loading,onPage:n,onSort:n},null,8,["select-list","page-info","columns","data","loading"])]))}});export{E as default};
