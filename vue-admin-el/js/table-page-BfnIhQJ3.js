import{p as I,a4 as k,k as x,e as w,f as S,h as $,a5 as v,a as r}from"./index-C_bH1vCy.js";import{f as b,g as C,k as L,i as _,m,c,u as l,A as P,l as W,q as B,ay as z,az as A,r as T,o as q,h as D}from"./element-plus-q5-fTtZa.js";import{_ as F}from"./Table.vue_vue_type_script_setup_true_lang-uURJbbk7.js";const U={name:"SearchHeader"},E=b({...U,props:{loading:Boolean,labelWidth:String,searchInfo:{type:Object,required:!0},list:{type:Array,required:!0}},emits:["search"],setup(h,{emit:p}){const s=h,g=p,f=C(()=>s.list.filter(e=>e.type==="slot").map(e=>e.slotName));function d(e){g("search",e)}return(e,i)=>(_(),L(l(x),{labelWidth:s.labelWidth},{right:m(()=>[c(l(k),{loading:s.loading,onSearch:d},null,8,["loading"])]),default:m(()=>[c(l(I),{type:"search",data:s.searchInfo,list:s.list,onEnter:i[0]||(i[0]=n=>d(!1))},P({_:2},[W(f.value,n=>({name:n,fn:m(u=>[B(e.$slots,n,z(A(u)))])}))]),1032,["data","list"])]),_:3},8,["labelWidth"]))}}),M={class:"the-common-table-page"},H=b({__name:"table-page",setup(h){function p(){return{}}const s=[{label:"查询名称",prop:"keyword",type:"input",placeholder:"请输入查询关键字",tooltip:"提示：模糊查询"},{label:"日期范围",prop:"date",type:"date",dateType:"datetimerange",bind:["start","end"],placeholder:"请选择日期",class:"w-[380px]"},{label:"状态",prop:"status",type:"select",options:[{label:"正常",value:0},{label:"禁用",value:1}]}],g=[{title:"ID",prop:"id",width:80},{title:"名称\\n通过斜杠+n换行",prop:"name",minWidth:180,sort:"asc"},{title:"状态",prop:"status",width:100,sort:!0,rawContent(a,t){const o=t.status===1?"green":"gray",y=t.status===1?"正常":"禁用";return`<span class="the-tag ${o}">${y}</span>`}},{title:"日期",prop:"date",width:180,sort:"desc",titleTips:"静态数据，当前刷新日期"},{title:"操作",prop:"action-right",width:140}],f=[{text:"同步数据",icon:"el-icon-refresh",type:"warning",click(){r.warning("同步数据")}},{text:"导出",icon:"el-icon-download",type:"success",click(){r.success("导出")}},{text:"新增",icon:"el-icon-plus",click(){r.info("新增")}}],d=[{text:"编辑",icon:"el-icon-edit",type:"success",click(a){r.success(`编辑: ${a.name}`)}},{text:"删除",icon:"el-icon-delete",type:"danger",click(a){r.error(`删除: ${a.name}`)}}],e=T({loading:!1,data:[],selectList:[],pageInfo:w(),searchFields:s,searchInfo:p(),tableColumns:g}),i=Array.from({length:62}).map((a,t)=>({id:t+1,name:$(2,40),date:S(),status:Math.random()<.5?1:0}));async function n(){console.log("pageInfo >>",e.pageInfo);const a=e.pageInfo.pageSize,t=e.pageInfo.currentPage;e.data=i.slice((t-1)*a,t*a),e.pageInfo.total=i.length}function u(a){a&&(e.searchInfo=p()),e.pageInfo.currentPage=1,n()}return q(function(){u()}),(a,t)=>(_(),D("div",M,[c(l(E),{"search-info":e.searchInfo,list:e.searchFields,loading:e.loading,onSearch:u},null,8,["search-info","list","loading"]),c(l(v),{columns:e.tableColumns,"onUpdate:columns":t[0]||(t[0]=o=>e.tableColumns=o),operations:f,loading:e.loading},null,8,["columns","loading"]),c(l(F),{class:"f1","select-key":"id","sort-multiple":"","select-list":e.selectList,"onUpdate:selectList":t[1]||(t[1]=o=>e.selectList=o),"page-info":e.pageInfo,"onUpdate:pageInfo":t[2]||(t[2]=o=>e.pageInfo=o),columns:e.tableColumns,data:e.data,actions:d,loading:e.loading,onPage:n,onSort:n},null,8,["select-list","page-info","columns","data","loading"])]))}});export{H as default};
